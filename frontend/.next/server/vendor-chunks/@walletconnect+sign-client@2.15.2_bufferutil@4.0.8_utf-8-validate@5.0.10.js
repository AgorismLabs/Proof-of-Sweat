"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@walletconnect+sign-client@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10";
exports.ids = ["vendor-chunks/@walletconnect+sign-client@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+sign-client@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10/node_modules/@walletconnect/sign-client/dist/index.es.js":
/*!**************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+sign-client@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10/node_modules/@walletconnect/sign-client/dist/index.es.js ***!
  \**************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AUTH_CONTEXT: () => (/* binding */ Be),\n/* harmony export */   AUTH_KEYS_CONTEXT: () => (/* binding */ We),\n/* harmony export */   AUTH_PAIRING_TOPIC_CONTEXT: () => (/* binding */ Ze),\n/* harmony export */   AUTH_PROTOCOL: () => (/* binding */ Je),\n/* harmony export */   AUTH_PUBLIC_KEY_NAME: () => (/* binding */ ie),\n/* harmony export */   AUTH_REQUEST_CONTEXT: () => (/* binding */ et),\n/* harmony export */   AUTH_STORAGE_PREFIX: () => (/* binding */ se),\n/* harmony export */   AUTH_VERSION: () => (/* binding */ Wt),\n/* harmony export */   ENGINE_CONTEXT: () => (/* binding */ ze),\n/* harmony export */   ENGINE_QUEUE_STATES: () => (/* binding */ x),\n/* harmony export */   ENGINE_RPC_OPTS: () => (/* binding */ S),\n/* harmony export */   HISTORY_CONTEXT: () => (/* binding */ Xt),\n/* harmony export */   HISTORY_EVENTS: () => (/* binding */ Yt),\n/* harmony export */   HISTORY_STORAGE_VERSION: () => (/* binding */ Jt),\n/* harmony export */   METHODS_TO_VERIFY: () => (/* binding */ Xe),\n/* harmony export */   PROPOSAL_CONTEXT: () => (/* binding */ Fe),\n/* harmony export */   PROPOSAL_EXPIRY: () => (/* binding */ Bt),\n/* harmony export */   PROPOSAL_EXPIRY_MESSAGE: () => (/* binding */ Qe),\n/* harmony export */   REQUEST_CONTEXT: () => (/* binding */ Ye),\n/* harmony export */   SESSION_CONTEXT: () => (/* binding */ He),\n/* harmony export */   SESSION_EXPIRY: () => (/* binding */ k),\n/* harmony export */   SESSION_REQUEST_EXPIRY_BOUNDARIES: () => (/* binding */ he),\n/* harmony export */   SIGN_CLIENT_CONTEXT: () => (/* binding */ Ne),\n/* harmony export */   SIGN_CLIENT_DEFAULT: () => (/* binding */ le),\n/* harmony export */   SIGN_CLIENT_EVENTS: () => (/* binding */ Ht),\n/* harmony export */   SIGN_CLIENT_PROTOCOL: () => (/* binding */ qe),\n/* harmony export */   SIGN_CLIENT_STORAGE_OPTIONS: () => (/* binding */ zt),\n/* harmony export */   SIGN_CLIENT_STORAGE_PREFIX: () => (/* binding */ ce),\n/* harmony export */   SIGN_CLIENT_VERSION: () => (/* binding */ ve),\n/* harmony export */   SessionStore: () => (/* binding */ ps),\n/* harmony export */   SignClient: () => (/* binding */ ds),\n/* harmony export */   WALLETCONNECT_DEEPLINK_CHOICE: () => (/* binding */ Pe),\n/* harmony export */   \"default\": () => (/* binding */ pe)\n/* harmony export */ });\n/* harmony import */ var _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @walletconnect/core */ \"(ssr)/./node_modules/.pnpm/@walletconnect+core@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10/node_modules/@walletconnect/core/dist/index.es.js\");\n/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/logger */ \"(ssr)/./node_modules/.pnpm/@walletconnect+logger@2.1.2/node_modules/@walletconnect/logger/dist/index.es.js\");\n/* harmony import */ var _walletconnect_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @walletconnect/types */ \"(ssr)/./node_modules/.pnpm/@walletconnect+types@2.15.2/node_modules/@walletconnect/types/dist/index.es.js\");\n/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @walletconnect/utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+utils@2.15.2/node_modules/@walletconnect/utils/dist/index.es.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/time */ \"(ssr)/./node_modules/.pnpm/@walletconnect+time@1.0.2/node_modules/@walletconnect/time/dist/cjs/index.js\");\n/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+jsonrpc-utils@1.0.8/node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js\");\nconst qe=\"wc\",ve=2,Ne=\"client\",ce=`${qe}@${ve}:${Ne}:`,le={name:Ne,logger:\"error\",controller:!1,relayUrl:\"wss://relay.walletconnect.com\"},Ht={session_proposal:\"session_proposal\",session_update:\"session_update\",session_extend:\"session_extend\",session_ping:\"session_ping\",session_delete:\"session_delete\",session_expire:\"session_expire\",session_request:\"session_request\",session_request_sent:\"session_request_sent\",session_event:\"session_event\",proposal_expire:\"proposal_expire\",session_authenticate:\"session_authenticate\",session_request_expire:\"session_request_expire\"},zt={database:\":memory:\"},Pe=\"WALLETCONNECT_DEEPLINK_CHOICE\",Yt={created:\"history_created\",updated:\"history_updated\",deleted:\"history_deleted\",sync:\"history_sync\"},Xt=\"history\",Jt=\"0.3\",Fe=\"proposal\",Bt=_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.THIRTY_DAYS,Qe=\"Proposal expired\",He=\"session\",k=_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.SEVEN_DAYS,ze=\"engine\",S={wc_sessionPropose:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1119}}},he={min:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,max:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.SEVEN_DAYS},x={idle:\"IDLE\",active:\"ACTIVE\"},Ye=\"request\",Xe=[\"wc_sessionPropose\",\"wc_sessionRequest\",\"wc_authRequest\",\"wc_sessionAuthenticate\"],Je=\"wc\",Wt=1.5,Be=\"auth\",We=\"authKeys\",Ze=\"pairingTopics\",et=\"requests\",se=`${Je}@${1.5}:${Be}:`,ie=`${se}:PUB_KEY`;var Zt=Object.defineProperty,es=Object.defineProperties,ts=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,ss=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,st=(I,n,t)=>n in I?Zt(I,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):I[n]=t,E=(I,n)=>{for(var t in n||(n={}))ss.call(n,t)&&st(I,t,n[t]);if(tt)for(var t of tt(n))is.call(n,t)&&st(I,t,n[t]);return I},j=(I,n)=>es(I,ts(n));class rs extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_4__.IEngine{constructor(n){super(n),this.name=ze,this.events=new (events__WEBPACK_IMPORTED_MODULE_1___default()),this.initialized=!1,this.requestQueue={state:x.idle,queue:[]},this.sessionRequestQueue={state:x.idle,queue:[]},this.requestQueueDelay=_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(S)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.toMiliseconds)(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const e=j(E({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(e);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:o,relays:a}=e;let c=s,h,l=!1;try{c&&(l=this.client.core.pairing.pairings.get(c).active)}catch(y){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),y}if(!c||!l){const{topic:y,uri:R}=await this.client.core.pairing.create();c=y,h=R}if(!c){const{message:y}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`connect() pairing topic: ${c}`);throw new Error(y)}const g=await this.client.core.crypto.generateKeyPair(),d=S.wc_sessionPropose.req.ttl||_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,u=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(d),_=E({requiredNamespaces:i,optionalNamespaces:r,relays:a??[{protocol:_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:u,pairingTopic:c},o&&{sessionProperties:o}),{reject:q,resolve:m,done:O}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)(d,Qe);this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),async({error:y,session:R})=>{if(y)q(y);else if(R){R.self.publicKey=g;const K=j(E({},R),{pairingTopic:_.pairingTopic,requiredNamespaces:_.requiredNamespaces,optionalNamespaces:_.optionalNamespaces});await this.client.session.set(R.topic,K),await this.setExpiry(R.topic,R.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:R.peer.metadata}),this.cleanupDuplicatePairings(K),m(K)}});const D=await this.sendRequest({topic:c,method:\"wc_sessionPropose\",params:_,throwOnFailedPublish:!0});return await this.setProposal(D,E({id:D},_)),{uri:h,approval:O}},this.pair=async t=>{await this.isInitialized();try{return await this.client.core.pairing.pair(t)}catch(e){throw this.client.logger.error(\"pair() failed\"),e}},this.approve=async t=>{var e,s,i;const r=this.client.core.eventClient.createEvent({properties:{topic:(e=t?.id)==null?void 0:e.toString(),trace:[_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_approve_started]}});try{await this.isInitialized()}catch(f){throw r.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.no_internet_connection),f}try{await this.isValidProposalId(t?.id)}catch(f){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),r.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.proposal_not_found),f}try{await this.isValidApprove(t)}catch(f){throw this.client.logger.error(\"approve() -> isValidApprove() failed\"),r.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.session_approve_namespace_validation_failure),f}const{id:o,relayProtocol:a,namespaces:c,sessionProperties:h,sessionConfig:l}=t,g=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:r.eventId});const{pairingTopic:d,proposer:u,requiredNamespaces:_,optionalNamespaces:q}=g;let m=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:d});m||(m=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_approve_started,properties:{topic:d,trace:[_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_approve_started,_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_namespaces_validation_success]}}));const O=await this.client.core.crypto.generateKeyPair(),D=u.publicKey,y=await this.client.core.crypto.generateSharedKey(O,D),R=E(E({relay:{protocol:a??\"irn\"},namespaces:c,controller:{publicKey:O,metadata:this.client.metadata},expiry:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k)},h&&{sessionProperties:h}),l&&{sessionConfig:l});m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.subscribing_session_topic);try{await this.client.core.relayer.subscribe(y)}catch(f){throw m.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.subscribe_session_topic_failure),f}m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.subscribe_session_topic_success);const K=j(E({},R),{topic:y,requiredNamespaces:_,optionalNamespaces:q,pairingTopic:d,acknowledged:!1,self:R.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:O});await this.client.session.set(y,K),m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.store_session);try{m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.publishing_session_settle),await this.sendRequest({topic:y,method:\"wc_sessionSettle\",params:R,throwOnFailedPublish:!0}).catch(f=>{throw m?.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.session_settle_publish_failure),f}),m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_settle_publish_success),m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.publishing_session_approve),await this.sendResult({id:o,topic:d,result:{relay:{protocol:a??\"irn\"},responderPublicKey:O},throwOnFailedPublish:!0}).catch(f=>{throw m?.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.session_approve_publish_failure),f}),m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_approve_publish_success)}catch(f){throw this.client.logger.error(f),this.client.session.delete(y,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),await this.client.core.relayer.unsubscribe(y),f}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:u.metadata}),await this.client.proposal.delete(o,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(y,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k)),{topic:y,acknowledged:()=>Promise.resolve(this.client.session.get(y))}},this.reject=async t=>{await this.isInitialized();try{await this.isValidReject(t)}catch(r){throw this.client.logger.error(\"reject() -> isValidReject() failed\"),r}const{id:e,reason:s}=t;let i;try{i=this.client.proposal.get(e).pairingTopic}catch(r){throw this.client.logger.error(`reject() -> proposal.get(${e}) failed`),r}i&&(await this.sendError({id:e,topic:i,error:s,rpcOpts:S.wc_sessionPropose.reject}),await this.client.proposal.delete(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")))},this.update=async t=>{await this.isInitialized();try{await this.isValidUpdate(t)}catch(l){throw this.client.logger.error(\"update() -> isValidUpdate() failed\"),l}const{topic:e,namespaces:s}=t,{done:i,resolve:r,reject:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)(),a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),c=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.getBigIntRpcId)().toString(),h=this.client.session.get(e).namespaces;return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_update\",a),({error:l})=>{l?o(l):r()}),await this.client.session.update(e,{namespaces:s}),await this.sendRequest({topic:e,method:\"wc_sessionUpdate\",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:c}).catch(l=>{this.client.logger.error(l),this.client.session.update(e,{namespaces:h}),o(l)}),{acknowledged:i}},this.extend=async t=>{await this.isInitialized();try{await this.isValidExtend(t)}catch(a){throw this.client.logger.error(\"extend() -> isValidExtend() failed\"),a}const{topic:e}=t,s=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),{done:i,resolve:r,reject:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)();return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_extend\",s),({error:a})=>{a?o(a):r()}),await this.setExpiry(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k)),this.sendRequest({topic:e,method:\"wc_sessionExtend\",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(a=>{o(a)}),{acknowledged:i}},this.request=async t=>{await this.isInitialized();try{await this.isValidRequest(t)}catch(d){throw this.client.logger.error(\"request() -> isValidRequest() failed\"),d}const{chainId:e,request:s,topic:i,expiry:r=S.wc_sessionRequest.req.ttl}=t,o=this.client.session.get(i),a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),c=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.getBigIntRpcId)().toString(),{done:h,resolve:l,reject:g}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)(r,\"Request expired. Please try again.\");return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",a),({error:d,result:u})=>{d?g(d):l(u)}),await Promise.all([new Promise(async d=>{await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:i,method:\"wc_sessionRequest\",params:{request:j(E({},s),{expiryTimestamp:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(r)}),chainId:e},expiry:r,throwOnFailedPublish:!0}).catch(u=>g(u)),this.client.events.emit(\"session_request_sent\",{topic:i,request:s,chainId:e,id:a}),d()}),new Promise(async d=>{var u;if(!((u=o.sessionConfig)!=null&&u.disableDeepLink)){const _=await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getDeepLink)(this.client.core.storage,Pe);(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.handleDeeplinkRedirect)({id:a,topic:i,wcDeepLink:_})}d()}),h()]).then(d=>d[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:e,response:s}=t,{id:i}=s;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(s)?await this.sendResult({id:i,topic:e,result:s.result,throwOnFailedPublish:!0}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(s)&&await this.sendError({id:i,topic:e,error:s.error}),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error(\"ping() -> isValidPing() failed\"),s}const{topic:e}=t;if(this.client.session.keys.includes(e)){const s=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),i=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.getBigIntRpcId)().toString(),{done:r,resolve:o,reject:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)();this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_ping\",s),({error:c})=>{c?a(c):o()}),await Promise.all([this.sendRequest({topic:e,method:\"wc_sessionPing\",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),r()])}else this.client.core.pairing.pairings.keys.includes(e)&&await this.client.core.pairing.ping({topic:e})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:e,event:s,chainId:i}=t,r=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.getBigIntRpcId)().toString();await this.sendRequest({topic:e,method:\"wc_sessionEvent\",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:r})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:e}=t;if(this.client.session.keys.includes(e))await this.sendRequest({topic:e,method:\"wc_sessionDelete\",params:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\"),throwOnFailedPublish:!0}),await this.deleteSession({topic:e,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(e))await this.client.core.pairing.disconnect({topic:e});else{const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISMATCHED_TOPIC\",`Session or pairing topic not found: ${e}`);throw new Error(s)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(e=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isSessionCompatible)(e,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async t=>{this.isInitialized(),this.isValidAuthenticate(t);const{chains:e,statement:s=\"\",uri:i,domain:r,nonce:o,type:a,exp:c,nbf:h,methods:l=[],expiry:g}=t,d=[...t.resources||[]],{topic:u,uri:_}=await this.client.core.pairing.create({methods:[\"wc_sessionAuthenticate\"]});this.client.logger.info({message:\"Generated new pairing\",pairing:{topic:u,uri:_}});const q=await this.client.core.crypto.generateKeyPair(),m=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashKey)(q);if(await Promise.all([this.client.auth.authKeys.set(ie,{responseTopic:m,publicKey:q}),this.client.auth.pairingTopics.set(m,{topic:m,pairingTopic:u})]),await this.client.core.relayer.subscribe(m),this.client.logger.info(`sending request to new pairing topic: ${u}`),l.length>0){const{namespace:A}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.parseChainId)(e[0]);let v=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createEncodedRecap)(A,\"request\",l);(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getRecapFromResources)(d)&&(v=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.mergeEncodedRecaps)(v,d.pop())),d.push(v)}const O=g&&g>S.wc_sessionAuthenticate.req.ttl?g:S.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:a??\"caip122\",chains:e,statement:s,aud:i,domain:r,version:\"1\",nonce:o,iat:new Date().toISOString(),exp:c,nbf:h,resources:d},requester:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(O)},y={eip155:{chains:e,methods:[...new Set([\"personal_sign\",...l])],events:[\"chainChanged\",\"accountsChanged\"]}},R={requiredNamespaces:{},optionalNamespaces:y,relays:[{protocol:\"irn\"}],pairingTopic:u,proposer:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(S.wc_sessionPropose.req.ttl)},{done:K,resolve:f,reject:de}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)(O,\"Request expired\"),re=async({error:A,session:v})=>{if(this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",F),ue),A)de(A);else if(v){v.self.publicKey=q,await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:v.peer.metadata});const Q=this.client.session.get(v.topic);await this.deleteProposal(B),f({session:Q})}},ue=async A=>{if(await this.deletePendingAuthRequest(F,{message:\"fulfilled\",code:0}),A.error){const W=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"WC_METHOD_UNSUPPORTED\",\"wc_sessionAuthenticate\");return A.error.code===W.code?void 0:(this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),re),de(A.error.message))}await this.deleteProposal(B),this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),re);const{cacaos:v,responder:Q}=A.result,ge=[],Te=[];for(const W of v){await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.validateSignedCacao)({cacao:W,projectId:this.client.core.projectId})||(this.client.logger.error(W,\"Signature verification failed\"),de((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"SESSION_SETTLEMENT_FAILED\",\"Signature verification failed\")));const{p:we}=W,ye=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getRecapFromResources)(we.resources),Oe=[(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getNamespacedDidChainId)(we.iss)],rt=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getDidAddress)(we.iss);if(ye){const me=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getMethodsFromRecap)(ye),nt=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getChainsFromRecap)(ye);ge.push(...me),Oe.push(...nt)}for(const me of Oe)Te.push(`${me}:${rt}`)}const ne=await this.client.core.crypto.generateSharedKey(q,Q.publicKey);let oe;ge.length>0&&(oe={topic:ne,acknowledged:!0,self:{publicKey:q,metadata:this.client.metadata},peer:Q,controller:Q.publicKey,expiry:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:\"irn\"},pairingTopic:u,namespaces:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.buildNamespacesFromAuth)([...new Set(ge)],[...new Set(Te)])},await this.client.core.relayer.subscribe(ne),await this.client.session.set(ne,oe),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:Q.metadata}),oe=this.client.session.get(ne)),f({auths:v,session:oe})},F=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),B=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)();this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),re),this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",F),ue);try{await Promise.all([this.sendRequest({topic:u,method:\"wc_sessionAuthenticate\",params:D,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:F}),this.sendRequest({topic:u,method:\"wc_sessionPropose\",params:R,expiry:S.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B})])}catch(A){throw this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),re),this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",F),ue),A}return await this.setProposal(B,E({id:B},R)),await this.setAuthRequest(F,{request:j(E({},D),{verifyContext:{}}),pairingTopic:u}),{uri:_,response:K}},this.approveSessionAuthenticate=async t=>{const{id:e,auths:s}=t,i=this.client.core.eventClient.createEvent({properties:{topic:e.toString(),trace:[_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.authenticated_session_approve_started]}});try{this.isInitialized()}catch(_){throw i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.no_internet_connection),_}const r=this.getPendingAuthRequest(e);if(!r)throw i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${e}`);const o=r.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashKey)(o),h={type:_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.TYPE_1,receiverPublicKey:o,senderPublicKey:a},l=[],g=[];for(const _ of s){if(!await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.validateSignedCacao)({cacao:_,projectId:this.client.core.projectId})){i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.invalid_cacao);const y=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"SESSION_SETTLEMENT_FAILED\",\"Signature verification failed\");throw await this.sendError({id:e,topic:c,error:y,encodeOpts:h}),new Error(y.message)}i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.cacaos_verified);const{p:q}=_,m=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getRecapFromResources)(q.resources),O=[(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getNamespacedDidChainId)(q.iss)],D=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getDidAddress)(q.iss);if(m){const y=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getMethodsFromRecap)(m),R=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getChainsFromRecap)(m);l.push(...y),O.push(...R)}for(const y of O)g.push(`${y}:${D}`)}const d=await this.client.core.crypto.generateSharedKey(a,o);i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.create_authenticated_session_topic);let u;if(l?.length>0){u={topic:d,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:r.requester.metadata},controller:o,expiry:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:\"irn\"},pairingTopic:r.pairingTopic,namespaces:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.buildNamespacesFromAuth)([...new Set(l)],[...new Set(g)])},i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(d)}catch(_){throw i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.subscribe_authenticated_session_topic_failure),_}i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.subscribe_authenticated_session_topic_success),await this.client.session.set(d,u),i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:r.pairingTopic,metadata:r.requester.metadata})}i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:e,result:{cacaos:s,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0})}catch(_){throw i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.authenticated_session_approve_publish_failure),_}return await this.client.auth.requests.delete(e,{message:\"fulfilled\",code:0}),await this.client.core.pairing.activate({topic:r.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:u}},this.rejectSessionAuthenticate=async t=>{await this.isInitialized();const{id:e,reason:s}=t,i=this.getPendingAuthRequest(e);if(!i)throw new Error(`Could not find pending auth request with id ${e}`);const r=i.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashKey)(r),c={type:_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.TYPE_1,receiverPublicKey:r,senderPublicKey:o};await this.sendError({id:e,topic:a,error:s,encodeOpts:c,rpcOpts:S.wc_sessionAuthenticate.reject}),await this.client.auth.requests.delete(e,{message:\"rejected\",code:0}),await this.client.proposal.delete(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:e,iss:s}=t;return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.formatMessage)(e,s)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const e=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var r,o;return((r=i.peerMetadata)==null?void 0:r.url)&&((o=i.peerMetadata)==null?void 0:o.url)===t.peer.metadata.url&&i.topic&&i.topic!==e.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info(\"Duplicate pairings clean up finished\")}catch(e){this.client.logger.error(e)}},this.deleteSession=async t=>{var e;const{topic:s,expirerHasDeleted:i=!1,emitEvent:r=!0,id:o=0}=t,{self:a}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),this.addToRecentlyDeleted(s,\"session\"),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Pe).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===s&&this.deletePendingSessionRequest(c.id,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\"))}),s===((e=this.sessionRequestQueue.queue[0])==null?void 0:e.topic)&&(this.sessionRequestQueue.state=x.idle),r&&this.client.events.emit(\"session_delete\",{id:o,topic:s})},this.deleteProposal=async(t,e)=>{if(e)try{const s=this.client.proposal.get(t),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i?.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),e?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,\"proposal\")},this.deletePendingSessionRequest=async(t,e,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,e),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,\"request\"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==t),s&&(this.sessionRequestQueue.state=x.idle,this.client.events.emit(\"session_request_expire\",{id:t}))},this.deletePendingAuthRequest=async(t,e,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,e),s?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,e)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,e),await this.client.session.update(t,{expiry:e}))},this.setProposal=async(t,e)=>{this.client.core.expirer.set(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(S.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,e)},this.setAuthRequest=async(t,e)=>{const{request:s,pairingTopic:i}=e;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:i,verifyContext:s.verifyContext})},this.setPendingSessionRequest=async t=>{const{id:e,topic:s,params:i,verifyContext:r}=t,o=i.request.expiryTimestamp||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(S.wc_sessionRequest.req.ttl);this.client.core.expirer.set(e,o),await this.client.pendingRequest.set(e,{id:e,topic:s,params:i,verifyContext:r})},this.sendRequest=async t=>{const{topic:e,method:s,params:i,expiry:r,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c}=t,h=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcRequest)(s,i,a);let l;try{l=await this.client.core.crypto.encode(e,h)}catch(u){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${e} failed`),u}let g;if(Xe.includes(s)){const u=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(JSON.stringify(h)),_=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(l);g=await this.client.core.verify.register({id:_,decryptedId:u})}const d=S[s].req;return d.attestation=g,r&&(d.ttl=r),o&&(d.id=o),this.client.core.history.set(e,h),c?(d.internal=j(E({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(e,l,d)):this.client.core.relayer.publish(e,l,d).catch(u=>this.client.logger.error(u)),h.id},this.sendResult=async t=>{const{id:e,topic:s,result:i,throwOnFailedPublish:r,encodeOpts:o}=t,a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcResult)(e,i);let c;try{c=await this.client.core.crypto.encode(s,a,o)}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let h;try{h=await this.client.core.history.get(s,e)}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${e}) failed`),g}const l=S[h.request.method].res;r?(l.internal=j(E({},l.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,c,l)):this.client.core.relayer.publish(s,c,l).catch(g=>this.client.logger.error(g)),await this.client.core.history.resolve(a)},this.sendError=async t=>{const{id:e,topic:s,error:i,encodeOpts:r,rpcOpts:o}=t,a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcError)(e,i);let c;try{c=await this.client.core.crypto.encode(s,a,r)}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),g}let h;try{h=await this.client.core.history.get(s,e)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${s}, ${e}) failed`),g}const l=o||S[h.request.method].res;this.client.core.relayer.publish(s,c,l),await this.client.core.history.resolve(a)},this.cleanup=async()=>{const t=[],e=[];this.client.session.getAll().forEach(s=>{let i=!1;(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(s.expiryTimestamp)&&e.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...e.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===x.active){this.client.logger.info(\"Request queue already active, skipping...\");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=x.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=x.idle},this.processRequest=async t=>{const{topic:e,payload:s,attestation:i,encryptedId:r}=t,o=s.method;if(!this.shouldIgnorePairingRequest({topic:e,requestMethod:o}))switch(o){case\"wc_sessionPropose\":return await this.onSessionProposeRequest({topic:e,payload:s,attestation:i,encryptedId:r});case\"wc_sessionSettle\":return await this.onSessionSettleRequest(e,s);case\"wc_sessionUpdate\":return await this.onSessionUpdateRequest(e,s);case\"wc_sessionExtend\":return await this.onSessionExtendRequest(e,s);case\"wc_sessionPing\":return await this.onSessionPingRequest(e,s);case\"wc_sessionDelete\":return await this.onSessionDeleteRequest(e,s);case\"wc_sessionRequest\":return await this.onSessionRequest({topic:e,payload:s,attestation:i,encryptedId:r});case\"wc_sessionEvent\":return await this.onSessionEventRequest(e,s);case\"wc_sessionAuthenticate\":return await this.onSessionAuthenticateRequest({topic:e,payload:s,attestation:i,encryptedId:r});default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async t=>{const{topic:e,payload:s}=t,i=(await this.client.core.history.get(e,s.id)).request.method;switch(i){case\"wc_sessionPropose\":return this.onSessionProposeResponse(e,s);case\"wc_sessionSettle\":return this.onSessionSettleResponse(e,s);case\"wc_sessionUpdate\":return this.onSessionUpdateResponse(e,s);case\"wc_sessionExtend\":return this.onSessionExtendResponse(e,s);case\"wc_sessionPing\":return this.onSessionPingResponse(e,s);case\"wc_sessionRequest\":return this.onSessionRequestResponse(e,s);case\"wc_sessionAuthenticate\":return this.onSessionAuthenticateResponse(e,s);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:e}=t,{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`Decoded payload on topic ${e} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=t=>{const{topic:e,requestMethod:s}=t,i=this.expectedPairingMethodMap.get(e);return!i||i.includes(s)?!1:!!(i.includes(\"wc_sessionAuthenticate\")&&this.client.events.listenerCount(\"session_authenticate\")>0)},this.onSessionProposeRequest=async t=>{const{topic:e,payload:s,attestation:i,encryptedId:r}=t,{params:o,id:a}=s;try{const c=this.client.core.eventClient.getEvent({topic:e});this.isValidConnect(E({},s.params));const h=o.expiryTimestamp||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(S.wc_sessionPropose.req.ttl),l=E({id:a,pairingTopic:e,expiryTimestamp:h},o);await this.setProposal(a,l);const g=await this.getVerifyContext({attestationId:i,hash:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(JSON.stringify(s)),encryptedId:r,metadata:l.proposer.metadata});this.client.events.listenerCount(\"session_proposal\")===0&&(console.warn(\"No listener for session_proposal event\"),c?.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_PAIRING_ERRORS.proposal_listener_not_found)),c?.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_PAIRING_TRACES.emit_session_proposal),this.client.events.emit(\"session_proposal\",{id:a,params:l,verifyContext:g})}catch(c){await this.sendError({id:a,topic:e,error:c,rpcOpts:S.wc_sessionPropose.autoReject}),this.client.logger.error(c)}},this.onSessionProposeResponse=async(t,e)=>{const{id:s}=e;if((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)){const{result:i}=e;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",result:i});const r=this.client.proposal.get(s);this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",proposal:r});const o=r.proposer.publicKey;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",sessionTopic:c});const h=await this.client.core.relayer.subscribe(c);this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",subscriptionId:h}),await this.client.core.pairing.activate({topic:t})}else if((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)){await this.client.proposal.delete(s,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\"));const i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\");if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners, 954`);this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),{error:e.error})}},this.onSessionSettleRequest=async(t,e)=>{const{id:s,params:i}=e;try{this.isValidSessionSettleRequest(i);const{relay:r,controller:o,expiry:a,namespaces:c,sessionProperties:h,sessionConfig:l}=e.params,g=E(E({topic:t,relay:r,expiry:a,namespaces:c,acknowledged:!0,pairingTopic:\"\",requiredNamespaces:{},optionalNamespaces:{},controller:o.publicKey,self:{publicKey:\"\",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},h&&{sessionProperties:h}),l&&{sessionConfig:l}),d=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\");if(this.events.listenerCount(d)===0)throw new Error(`emitting ${d} without any listeners 997`);this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),{session:g}),await this.sendResult({id:e.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(r){await this.sendError({id:s,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionSettleResponse=async(t,e)=>{const{id:s}=e;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_approve\",s),{})):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&(await this.client.session.delete(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_approve\",s),{error:e.error}))},this.onSessionUpdateRequest=async(t,e)=>{const{params:s,id:i}=e;try{const r=`${t}_session_update`,o=_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.get(r);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.info(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:t,error:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"INVALID_UPDATE_REQUEST\")});return}this.isValidUpdate(E({topic:t},s));try{_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.set(r,i),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0})}catch(a){throw _walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.delete(r),a}this.client.events.emit(\"session_update\",{id:i,topic:t,params:s})}catch(r){await this.sendError({id:i,topic:t,error:r}),this.client.logger.error(r)}},this.isRequestOutOfSync=(t,e)=>parseInt(e.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,e)=>{const{id:s}=e,i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_update\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_update\",s),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_update\",s),{error:e.error})},this.onSessionExtendRequest=async(t,e)=>{const{id:s}=e;try{this.isValidExtend({topic:t}),await this.setExpiry(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit(\"session_extend\",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}},this.onSessionExtendResponse=(t,e)=>{const{id:s}=e,i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_extend\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_extend\",s),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_extend\",s),{error:e.error})},this.onSessionPingRequest=async(t,e)=>{const{id:s}=e;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit(\"session_ping\",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}},this.onSessionPingResponse=(t,e)=>{const{id:s}=e,i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_ping\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);setTimeout(()=>{(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_ping\",s),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_ping\",s),{error:e.error})},500)},this.onSessionDeleteRequest=async(t,e)=>{const{id:s}=e;try{this.isValidDisconnect({topic:t,reason:e.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.RELAYER_EVENTS.publish,async()=>{i(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")})])}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async t=>{var e;const{topic:s,payload:i,attestation:r,encryptedId:o}=t,{id:a,params:c}=i;try{await this.isValidRequest(E({topic:s},c));const h=this.client.session.get(s),l=await this.getVerifyContext({attestationId:r,hash:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(JSON.stringify((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcRequest)(\"wc_sessionRequest\",c,a))),encryptedId:o,metadata:h.peer.metadata}),g={id:a,topic:s,params:c,verifyContext:l};await this.setPendingSessionRequest(g),(e=this.client.signConfig)!=null&&e.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:a,topic:s,error:h}),this.client.logger.error(h)}},this.onSessionRequestResponse=(t,e)=>{const{id:s}=e,i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s),{result:e.result}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s),{error:e.error})},this.onSessionEventRequest=async(t,e)=>{const{id:s,params:i}=e;try{const r=`${t}_session_event_${i.event.name}`,o=_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.get(r);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(E({topic:t},i)),this.client.events.emit(\"session_event\",{id:s,topic:t,params:i}),_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.set(r,s)}catch(r){await this.sendError({id:s,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionAuthenticateResponse=(t,e)=>{const{id:s}=e;this.client.logger.trace({type:\"method\",method:\"onSessionAuthenticateResponse\",topic:t,payload:e}),(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s),{result:e.result}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s),{error:e.error})},this.onSessionAuthenticateRequest=async t=>{const{topic:e,payload:s,attestation:i,encryptedId:r}=t;try{const{requester:o,authPayload:a,expiryTimestamp:c}=s.params,h=await this.getVerifyContext({attestationId:i,hash:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(JSON.stringify(s)),encryptedId:r,metadata:this.client.metadata}),l={requester:o,pairingTopic:e,id:s.id,authPayload:a,verifyContext:h,expiryTimestamp:c};await this.setAuthRequest(s.id,{request:l,pairingTopic:e}),this.client.events.emit(\"session_authenticate\",{topic:e,params:s.params,id:s.id,verifyContext:h})}catch(o){this.client.logger.error(o);const a=s.params.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),h={type:_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.TYPE_1,receiverPublicKey:a,senderPublicKey:c};await this.sendError({id:s.id,topic:e,error:o,encodeOpts:h,rpcOpts:S.wc_sessionAuthenticate.autoReject})}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:\"fulfilled\",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=x.idle,this.processSessionRequestQueue()},(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:e})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===t&&i.request.method===\"wc_sessionRequest\").forEach(i=>{const r=i.request.id,o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",r);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",i.request.id),{error:e})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===x.active){this.client.logger.info(\"session request queue is already active.\");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info(\"session request queue is empty.\");return}try{this.sessionRequestQueue.state=x.active,this.emitSessionRequest(t)}catch(e){this.client.logger.error(e)}},this.emitSessionRequest=t=>{this.client.events.emit(\"session_request\",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const e=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);e&&this.onSessionProposeRequest({topic:t.topic,payload:(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcRequest)(\"wc_sessionPropose\",{requiredNamespaces:e.requiredNamespaces,optionalNamespaces:e.optionalNamespaces,relays:e.relays,proposer:e.proposer,sessionProperties:e.sessionProperties},e.id)})},this.isValidConnect=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`connect() params: ${JSON.stringify(t)}`);throw new Error(a)}const{pairingTopic:e,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:r,relays:o}=t;if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(e)||await this.isValidPairingTopic(e),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRelays)(o,!0)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`connect() relays: ${o}`);throw new Error(a)}!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(s)&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidObject)(s)!==0&&this.validateNamespaces(s,\"requiredNamespaces\"),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(i)&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidObject)(i)!==0&&this.validateNamespaces(i,\"optionalNamespaces\"),(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(r)||this.validateSessionProps(r,\"sessionProperties\")},this.validateNamespaces=(t,e)=>{const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRequiredNamespaces)(t,\"connect()\",e);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t))throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`approve() params: ${t}`).message);const{id:e,namespaces:s,relayProtocol:i,sessionProperties:r}=t;this.checkRecentlyDeleted(e),await this.isValidProposalId(e);const o=this.client.proposal.get(e),a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespaces)(s,\"approve()\");if(a)throw new Error(a.message);const c=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isConformingNamespaces)(o.requiredNamespaces,s,\"approve()\");if(c)throw new Error(c.message);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(i,!0)){const{message:h}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`approve() relayProtocol: ${i}`);throw new Error(h)}(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(r)||this.validateSessionProps(r,\"sessionProperties\")},this.isValidReject=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`reject() params: ${t}`);throw new Error(i)}const{id:e,reason:s}=t;if(this.checkRecentlyDeleted(e),await this.isValidProposalId(e),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidErrorReason)(s)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}},this.isValidSessionSettleRequest=t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:c}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`onSessionSettleRequest() params: ${t}`);throw new Error(c)}const{relay:e,controller:s,namespaces:i,expiry:r}=t;if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRelay)(e)){const{message:c}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",\"onSessionSettleRequest() relay protocol should be a string\");throw new Error(c)}const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidController)(s,\"onSessionSettleRequest()\");if(o)throw new Error(o.message);const a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespaces)(i,\"onSessionSettleRequest()\");if(a)throw new Error(a.message);if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(r)){const{message:c}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\",\"onSessionSettleRequest()\");throw new Error(c)}},this.isValidUpdate=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`update() params: ${t}`);throw new Error(a)}const{topic:e,namespaces:s}=t;this.checkRecentlyDeleted(e),await this.isValidSessionTopic(e);const i=this.client.session.get(e),r=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespaces)(s,\"update()\");if(r)throw new Error(r.message);const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isConformingNamespaces)(i.requiredNamespaces,s,\"update()\");if(o)throw new Error(o.message)},this.isValidExtend=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`extend() params: ${t}`);throw new Error(s)}const{topic:e}=t;this.checkRecentlyDeleted(e),await this.isValidSessionTopic(e)},this.isValidRequest=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() params: ${t}`);throw new Error(a)}const{topic:e,request:s,chainId:i,expiry:r}=t;this.checkRecentlyDeleted(e),await this.isValidSessionTopic(e);const{namespaces:o}=this.client.session.get(e);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespacesChainId)(o,i)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() chainId: ${i}`);throw new Error(a)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRequest)(s)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() ${JSON.stringify(s)}`);throw new Error(a)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespacesRequest)(o,i,s.method)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() method: ${s.method}`);throw new Error(a)}if(r&&!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRequestExpiry)(r,he)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() expiry: ${r}. Expiry must be a number (in seconds) between ${he.min} and ${he.max}`);throw new Error(a)}},this.isValidRespond=async t=>{var e;if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`respond() params: ${t}`);throw new Error(r)}const{topic:s,response:i}=t;try{await this.isValidSessionTopic(s)}catch(r){throw(e=t?.response)!=null&&e.id&&this.cleanupAfterResponse(t),r}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidResponse)(i)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`respond() response: ${JSON.stringify(i)}`);throw new Error(r)}},this.isValidPing=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`ping() params: ${t}`);throw new Error(s)}const{topic:e}=t;await this.isValidSessionOrPairingTopic(e)},this.isValidEmit=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`emit() params: ${t}`);throw new Error(o)}const{topic:e,event:s,chainId:i}=t;await this.isValidSessionTopic(e);const{namespaces:r}=this.client.session.get(e);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespacesChainId)(r,i)){const{message:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`emit() chainId: ${i}`);throw new Error(o)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidEvent)(s)){const{message:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespacesEvent)(r,i,s.name)){const{message:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidDisconnect=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`disconnect() params: ${t}`);throw new Error(s)}const{topic:e}=t;await this.isValidSessionOrPairingTopic(e)},this.isValidAuthenticate=t=>{const{chains:e,uri:s,domain:i,nonce:r}=t;if(!Array.isArray(e)||e.length===0)throw new Error(\"chains is required and must be a non-empty array\");if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(s,!1))throw new Error(\"uri is required parameter\");if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(i,!1))throw new Error(\"domain is required parameter\");if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(r,!1))throw new Error(\"nonce is required parameter\");if([...new Set(e.map(a=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.parseChainId)(a).namespace))].length>1)throw new Error(\"Multi-namespace requests are not supported. Please request single namespace only.\");const{namespace:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.parseChainId)(e[0]);if(o!==\"eip155\")throw new Error(\"Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.\")},this.getVerifyContext=async t=>{const{attestationId:e,hash:s,encryptedId:i,metadata:r}=t,o={verified:{verifyUrl:r.verifyUrl||_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.VERIFY_SERVER,validation:\"UNKNOWN\",origin:r.url||\"\"}};try{const a=await this.client.core.verify.resolve({attestationId:e,hash:s,encryptedId:i,verifyUrl:r.verifyUrl});a&&(o.verified.origin=a.origin,o.verified.isScam=a.isScam,o.verified.validation=a.origin===new URL(r.url).origin?\"VALID\":\"INVALID\")}catch(a){this.client.logger.warn(a)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,e)=>{Object.values(t).forEach(s=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(s,!1)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`${e} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(i)}})},this.getPendingAuthRequest=t=>{const e=this.client.auth.requests.get(t);return typeof e==\"object\"?e:void 0},this.addToRecentlyDeleted=(t,e)=>{if(this.recentlyDeletedMap.set(t,e),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(r)}}},this.checkRecentlyDeleted=t=>{const e=this.recentlyDeletedMap.get(t);if(e){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`Record was recently deleted - ${e}: ${t}`);throw new Error(s)}}}async isInitialized(){if(!this.initialized){const{message:n}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NOT_INITIALIZED\",this.name);throw new Error(n)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.RELAYER_EVENTS.message,n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):this.onRelayMessage(n)})}async onRelayMessage(n){const{topic:t,message:e,attestation:s}=n,{publicKey:i}=this.client.auth.authKeys.keys.includes(ie)?this.client.auth.authKeys.get(ie):{responseTopic:void 0,publicKey:void 0},r=await this.client.core.crypto.decode(t,e,{receiverPublicKey:i});try{(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcRequest)(r)?(this.client.core.history.set(t,r),this.onRelayEventRequest({topic:t,payload:r,attestation:s,encryptedId:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(e)})):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResponse)(r)?(await this.client.core.history.resolve(r),await this.onRelayEventResponse({topic:t,payload:r}),this.client.core.history.delete(t,r.id)):this.onRelayEventUnknownPayload({topic:t,payload:r})}catch(o){this.client.logger.error(o)}}registerExpirerEvents(){this.client.core.expirer.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EXPIRER_EVENTS.expired,async n=>{const{topic:t,id:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.parseExpirerTarget)(n.target);if(e&&this.client.pendingRequest.keys.includes(e))return await this.deletePendingSessionRequest(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\"),!0);if(e&&this.client.auth.requests.keys.includes(e))return await this.deletePendingAuthRequest(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit(\"session_expire\",{topic:t})):e&&(await this.deleteProposal(e,!0),this.client.events.emit(\"proposal_expire\",{id:e}))})}registerPairingEvents(){this.client.core.pairing.events.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.PAIRING_EVENTS.create,n=>this.onPairingCreated(n)),this.client.core.pairing.events.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.PAIRING_EVENTS.delete,n=>{this.addToRecentlyDeleted(n.topic,\"pairing\")})}isValidPairingTopic(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(n,!1)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`pairing topic should be a string: ${n}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`pairing topic doesn't exist: ${n}`);throw new Error(t)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(this.client.core.pairing.pairings.get(n).expiry)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\",`pairing topic: ${n}`);throw new Error(t)}}async isValidSessionTopic(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(n,!1)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`session topic should be a string: ${n}`);throw new Error(t)}if(this.checkRecentlyDeleted(n),!this.client.session.keys.includes(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`session topic doesn't exist: ${n}`);throw new Error(t)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(this.client.session.get(n).expiry)){await this.deleteSession({topic:n});const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\",`session topic: ${n}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`session topic does not exist in keychain: ${n}`);throw await this.deleteSession({topic:n}),new Error(t)}}async isValidSessionOrPairingTopic(n){if(this.checkRecentlyDeleted(n),this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else if(this.client.core.pairing.pairings.keys.includes(n))this.isValidPairingTopic(n);else if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(n,!1)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`session or pairing topic doesn't exist: ${n}`);throw new Error(t)}else{const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`session or pairing topic should be a string: ${n}`);throw new Error(t)}}async isValidProposalId(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidId)(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`proposal id should be a number: ${n}`);throw new Error(t)}if(!this.client.proposal.keys.includes(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`proposal id doesn't exist: ${n}`);throw new Error(t)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(this.client.proposal.get(n).expiryTimestamp)){await this.deleteProposal(n);const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\",`proposal id: ${n}`);throw new Error(t)}}}class ns extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,Fe,ce),this.core=n,this.logger=t}}class it extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,He,ce),this.core=n,this.logger=t}}class os extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,Ye,ce,e=>e.id),this.core=n,this.logger=t}}class as extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,We,se,()=>ie),this.core=n,this.logger=t}}class cs extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,Ze,se),this.core=n,this.logger=t}}class ls extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,et,se,e=>e.id),this.core=n,this.logger=t}}class hs{constructor(n,t){this.core=n,this.logger=t,this.authKeys=new as(this.core,this.logger),this.pairingTopics=new cs(this.core,this.logger),this.requests=new ls(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class pe extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_4__.ISignClient{constructor(n){super(n),this.protocol=qe,this.version=ve,this.name=le.name,this.events=new events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter,this.on=(e,s)=>this.events.on(e,s),this.once=(e,s)=>this.events.once(e,s),this.off=(e,s)=>this.events.off(e,s),this.removeListener=(e,s)=>this.events.removeListener(e,s),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(s){throw this.logger.error(s.message),s}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(s){throw this.logger.error(s.message),s}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(s){throw this.logger.error(s.message),s}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(s){throw this.logger.error(s.message),s}},this.update=async e=>{try{return await this.engine.update(e)}catch(s){throw this.logger.error(s.message),s}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(s){throw this.logger.error(s.message),s}},this.request=async e=>{try{return await this.engine.request(e)}catch(s){throw this.logger.error(s.message),s}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(s){throw this.logger.error(s.message),s}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(s){throw this.logger.error(s.message),s}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(s){throw this.logger.error(s.message),s}},this.find=e=>{try{return this.engine.find(e)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.authenticate=async e=>{try{return await this.engine.authenticate(e)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(s){throw this.logger.error(s.message),s}},this.name=n?.name||le.name,this.metadata=n?.metadata||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getAppMetadata)(),this.signConfig=n?.signConfig;const t=typeof n?.logger<\"u\"&&typeof n?.logger!=\"string\"?n.logger:(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__.pino)((0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__.getDefaultLoggerOptions)({level:n?.logger||le.logger}));this.core=n?.core||new _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Core(n),this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__.generateChildLogger)(t,this.name),this.session=new it(this.core,this.logger),this.proposal=new ns(this.core,this.logger),this.pendingRequest=new os(this.core,this.logger),this.engine=new rs(this),this.auth=new hs(this.core,this.logger)}static async init(n){const t=new pe(n);return await t.initialize(),t}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace(\"Initialized\");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.logger.info(\"SignClient Initialization Success\"),this.engine.processRelayMessageCache()}catch(n){throw this.logger.info(\"SignClient Initialization Failure\"),this.logger.error(n.message),n}}}const ps=it,ds=pe;\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3Qrc2lnbi1jbGllbnRAMi4xNS4yX2J1ZmZlcnV0aWxANC4wLjhfdXRmLTgtdmFsaWRhdGVANS4wLjEwL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9zaWduLWNsaWVudC9kaXN0L2luZGV4LmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1Z0UscUNBQXFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxPQUFPLDhFQUE4RSxLQUFLLDBhQUEwYSxLQUFLLG9CQUFvQix3Q0FBd0Msa0dBQWtHLHdDQUF3Qyw0REFBRSxzQ0FBc0MsMkRBQUUsZ0JBQWdCLG1CQUFtQixLQUFLLElBQUksNkRBQUMsb0JBQW9CLE1BQU0sSUFBSSw2REFBQyxvQkFBb0IsU0FBUyxJQUFJLDZEQUFDLG9CQUFvQixhQUFhLElBQUksNkRBQUMscUJBQXFCLG1CQUFtQixLQUFLLElBQUksNkRBQUMsb0JBQW9CLE1BQU0sSUFBSSw2REFBQyxxQkFBcUIsbUJBQW1CLEtBQUssSUFBSSx3REFBQyxvQkFBb0IsTUFBTSxJQUFJLHdEQUFDLHFCQUFxQixtQkFBbUIsS0FBSyxJQUFJLHdEQUFDLG9CQUFvQixNQUFNLElBQUksd0RBQUMscUJBQXFCLG9CQUFvQixLQUFLLElBQUksNkRBQUMsb0JBQW9CLE1BQU0sSUFBSSw2REFBQyxxQkFBcUIsa0JBQWtCLEtBQUssSUFBSSw2REFBQyxvQkFBb0IsTUFBTSxJQUFJLDZEQUFDLHFCQUFxQixtQkFBbUIsS0FBSyxJQUFJLHdEQUFDLG9CQUFvQixNQUFNLElBQUksd0RBQUMscUJBQXFCLGlCQUFpQixLQUFLLElBQUksd0RBQUMsb0JBQW9CLE1BQU0sSUFBSSx3REFBQyxxQkFBcUIseUJBQXlCLEtBQUssSUFBSSx5REFBRSxvQkFBb0IsTUFBTSxJQUFJLHlEQUFFLG9CQUFvQixTQUFTLElBQUksNkRBQUMsb0JB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c0Msd0JBQXdCLElBQUksb0NBQW9DLFNBQVMsc0NBQXNDLHFCQUFxQixJQUFJLGlDQUFpQyxTQUFTLHNDQUFzQyxxQkFBcUIsSUFBSSxpQ0FBaUMsU0FBUyxzQ0FBc0MsMkJBQTJCLElBQUksdUNBQXVDLFNBQVMsc0NBQXNDLGVBQWUsSUFBSSwyQkFBMkIsU0FBUyxzQ0FBc0MscUNBQXFDLElBQUksK0NBQStDLFNBQVMsc0NBQXNDLDZCQUE2QixJQUFJLHlDQUF5QyxTQUFTLHNDQUFzQyw0QkFBNEIsSUFBSSx3Q0FBd0MsU0FBUyxzQ0FBc0MsMkNBQTJDLElBQUksdURBQXVELFNBQVMsc0NBQXNDLDBDQUEwQyxJQUFJLHNEQUFzRCxTQUFTLHNDQUFzQyx1REFBdUQsb0VBQUUsaUNBQWlDLGtFQUFrRSwyREFBRSxDQUFDLDhFQUFFLEVBQUUsMkJBQTJCLEdBQUcsdUJBQXVCLHFEQUFFLGdCQUFnQiwwRUFBRSx3TkFBd04scUJBQXFCLGtCQUFrQiw4QkFBOEIsY0FBYyxPQUFPLHVFQUFFLGNBQWMsY0FBYyxrQ0FBa0MsbUJBQW1CLGlDQUFpQyxJQUFJLDJQQUEyUCxTQUFTLDZGQUE2RixrQkFBKzBCO0FBQ3J3cUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZ29yaXNtLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3YWxsZXRjb25uZWN0K3NpZ24tY2xpZW50QDIuMTUuMl9idWZmZXJ1dGlsQDQuMC44X3V0Zi04LXZhbGlkYXRlQDUuMC4xMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnQvZGlzdC9pbmRleC5lcy5qcz9kMWM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydHtSRUxBWUVSX0RFRkFVTFRfUFJPVE9DT0wgYXMgb3QsRVZFTlRfQ0xJRU5UX1NFU1NJT05fVFJBQ0VTIGFzIEMsRVZFTlRfQ0xJRU5UX1NFU1NJT05fRVJST1JTIGFzIFUsRVZFTlRfQ0xJRU5UX0FVVEhFTlRJQ0FURV9UUkFDRVMgYXMgRyxFVkVOVF9DTElFTlRfQVVUSEVOVElDQVRFX0VSUk9SUyBhcyBaLEVWRU5UX0NMSUVOVF9QQUlSSU5HX0VSUk9SUyBhcyBhdCxFVkVOVF9DTElFTlRfUEFJUklOR19UUkFDRVMgYXMgY3QsUkVMQVlFUl9FVkVOVFMgYXMgQWUsVkVSSUZZX1NFUlZFUiBhcyBsdCxFWFBJUkVSX0VWRU5UUyBhcyBodCxQQUlSSU5HX0VWRU5UUyBhcyBDZSxTdG9yZSBhcyBILENvcmUgYXMgcHR9ZnJvbVwiQHdhbGxldGNvbm5lY3QvY29yZVwiO2ltcG9ydHtwaW5vIGFzIGR0LGdldERlZmF1bHRMb2dnZXJPcHRpb25zIGFzIHV0LGdlbmVyYXRlQ2hpbGRMb2dnZXIgYXMgZ3QsZ2V0TG9nZ2VyQ29udGV4dCBhcyB3dH1mcm9tXCJAd2FsbGV0Y29ubmVjdC9sb2dnZXJcIjtpbXBvcnR7SUVuZ2luZSBhcyB5dCxJU2lnbkNsaWVudCBhcyBtdH1mcm9tXCJAd2FsbGV0Y29ubmVjdC90eXBlc1wiO2ltcG9ydHtnZXRJbnRlcm5hbEVycm9yIGFzIHAsY2FsY0V4cGlyeSBhcyBULGNyZWF0ZURlbGF5ZWRQcm9taXNlIGFzIHosZW5naW5lRXZlbnQgYXMgdyxnZXRTZGtFcnJvciBhcyBOLGdldERlZXBMaW5rIGFzIF90LGhhbmRsZURlZXBsaW5rUmVkaXJlY3QgYXMgRXQsaXNTZXNzaW9uQ29tcGF0aWJsZSBhcyBSdCxoYXNoS2V5IGFzIF9lLHBhcnNlQ2hhaW5JZCBhcyBFZSxjcmVhdGVFbmNvZGVkUmVjYXAgYXMgU3QsZ2V0UmVjYXBGcm9tUmVzb3VyY2VzIGFzIFJlLG1lcmdlRW5jb2RlZFJlY2FwcyBhcyBJdCx2YWxpZGF0ZVNpZ25lZENhY2FvIGFzIGJlLGdldE5hbWVzcGFjZWREaWRDaGFpbklkIGFzIHhlLGdldERpZEFkZHJlc3MgYXMgRGUsZ2V0TWV0aG9kc0Zyb21SZWNhcCBhcyBWZSxnZXRDaGFpbnNGcm9tUmVjYXAgYXMgTWUsYnVpbGROYW1lc3BhY2VzRnJvbUF1dGggYXMgTGUsZm9ybWF0TWVzc2FnZSBhcyBmdCxoYXNoTWVzc2FnZSBhcyBZLGlzRXhwaXJlZCBhcyBYLE1lbW9yeVN0b3JlIGFzIGVlLGlzVmFsaWRQYXJhbXMgYXMgYixpc1VuZGVmaW5lZCBhcyB0ZSxpc1ZhbGlkUmVsYXlzIGFzIHF0LGlzVmFsaWRPYmplY3QgYXMgJGUsaXNWYWxpZFJlcXVpcmVkTmFtZXNwYWNlcyBhcyB2dCxpc1ZhbGlkTmFtZXNwYWNlcyBhcyBTZSxpc0NvbmZvcm1pbmdOYW1lc3BhY2VzIGFzIEtlLGlzVmFsaWRTdHJpbmcgYXMgVixpc1ZhbGlkRXJyb3JSZWFzb24gYXMgTnQsaXNWYWxpZFJlbGF5IGFzIFB0LGlzVmFsaWRDb250cm9sbGVyIGFzIFR0LGlzVmFsaWROYW1lc3BhY2VzQ2hhaW5JZCBhcyBVZSxpc1ZhbGlkUmVxdWVzdCBhcyBPdCxpc1ZhbGlkTmFtZXNwYWNlc1JlcXVlc3QgYXMgQXQsaXNWYWxpZFJlcXVlc3RFeHBpcnkgYXMgQ3QsaXNWYWxpZFJlc3BvbnNlIGFzIGJ0LGlzVmFsaWRFdmVudCBhcyB4dCxpc1ZhbGlkTmFtZXNwYWNlc0V2ZW50IGFzIER0LHBhcnNlRXhwaXJlclRhcmdldCBhcyBWdCxpc1ZhbGlkSWQgYXMgTXQsVFlQRV8xIGFzIEllLGdldEFwcE1ldGFkYXRhIGFzIEx0fWZyb21cIkB3YWxsZXRjb25uZWN0L3V0aWxzXCI7aW1wb3J0ICR0LHtFdmVudEVtaXR0ZXIgYXMgS3R9ZnJvbVwiZXZlbnRzXCI7aW1wb3J0e1RISVJUWV9EQVlTIGFzIFV0LFNFVkVOX0RBWVMgYXMgR2UsRklWRV9NSU5VVEVTIGFzIFAsT05FX0RBWSBhcyBNLE9ORV9IT1VSIGFzIGtlLE9ORV9TRUNPTkQgYXMgR3QsdG9NaWxpc2Vjb25kcyBhcyBqZX1mcm9tXCJAd2FsbGV0Y29ubmVjdC90aW1lXCI7aW1wb3J0e3BheWxvYWRJZCBhcyBKLGdldEJpZ0ludFJwY0lkIGFzIGFlLGlzSnNvblJwY1Jlc3VsdCBhcyBMLGlzSnNvblJwY0Vycm9yIGFzICQsZm9ybWF0SnNvblJwY1JlcXVlc3QgYXMgZmUsZm9ybWF0SnNvblJwY1Jlc3VsdCBhcyBrdCxmb3JtYXRKc29uUnBjRXJyb3IgYXMganQsaXNKc29uUnBjUmVxdWVzdCBhcyBGdCxpc0pzb25ScGNSZXNwb25zZSBhcyBRdH1mcm9tXCJAd2FsbGV0Y29ubmVjdC9qc29ucnBjLXV0aWxzXCI7Y29uc3QgcWU9XCJ3Y1wiLHZlPTIsTmU9XCJjbGllbnRcIixjZT1gJHtxZX1AJHt2ZX06JHtOZX06YCxsZT17bmFtZTpOZSxsb2dnZXI6XCJlcnJvclwiLGNvbnRyb2xsZXI6ITEscmVsYXlVcmw6XCJ3c3M6Ly9yZWxheS53YWxsZXRjb25uZWN0LmNvbVwifSxIdD17c2Vzc2lvbl9wcm9wb3NhbDpcInNlc3Npb25fcHJvcG9zYWxcIixzZXNzaW9uX3VwZGF0ZTpcInNlc3Npb25fdXBkYXRlXCIsc2Vzc2lvbl9leHRlbmQ6XCJzZXNzaW9uX2V4dGVuZFwiLHNlc3Npb25fcGluZzpcInNlc3Npb25fcGluZ1wiLHNlc3Npb25fZGVsZXRlOlwic2Vzc2lvbl9kZWxldGVcIixzZXNzaW9uX2V4cGlyZTpcInNlc3Npb25fZXhwaXJlXCIsc2Vzc2lvbl9yZXF1ZXN0Olwic2Vzc2lvbl9yZXF1ZXN0XCIsc2Vzc2lvbl9yZXF1ZXN0X3NlbnQ6XCJzZXNzaW9uX3JlcXVlc3Rfc2VudFwiLHNlc3Npb25fZXZlbnQ6XCJzZXNzaW9uX2V2ZW50XCIscHJvcG9zYWxfZXhwaXJlOlwicHJvcG9zYWxfZXhwaXJlXCIsc2Vzc2lvbl9hdXRoZW50aWNhdGU6XCJzZXNzaW9uX2F1dGhlbnRpY2F0ZVwiLHNlc3Npb25fcmVxdWVzdF9leHBpcmU6XCJzZXNzaW9uX3JlcXVlc3RfZXhwaXJlXCJ9LHp0PXtkYXRhYmFzZTpcIjptZW1vcnk6XCJ9LFBlPVwiV0FMTEVUQ09OTkVDVF9ERUVQTElOS19DSE9JQ0VcIixZdD17Y3JlYXRlZDpcImhpc3RvcnlfY3JlYXRlZFwiLHVwZGF0ZWQ6XCJoaXN0b3J5X3VwZGF0ZWRcIixkZWxldGVkOlwiaGlzdG9yeV9kZWxldGVkXCIsc3luYzpcImhpc3Rvcnlfc3luY1wifSxYdD1cImhpc3RvcnlcIixKdD1cIjAuM1wiLEZlPVwicHJvcG9zYWxcIixCdD1VdCxRZT1cIlByb3Bvc2FsIGV4cGlyZWRcIixIZT1cInNlc3Npb25cIixrPUdlLHplPVwiZW5naW5lXCIsUz17d2Nfc2Vzc2lvblByb3Bvc2U6e3JlcTp7dHRsOlAscHJvbXB0OiEwLHRhZzoxMTAwfSxyZXM6e3R0bDpQLHByb21wdDohMSx0YWc6MTEwMX0scmVqZWN0Ont0dGw6UCxwcm9tcHQ6ITEsdGFnOjExMjB9LGF1dG9SZWplY3Q6e3R0bDpQLHByb21wdDohMSx0YWc6MTEyMX19LHdjX3Nlc3Npb25TZXR0bGU6e3JlcTp7dHRsOlAscHJvbXB0OiExLHRhZzoxMTAyfSxyZXM6e3R0bDpQLHByb21wdDohMSx0YWc6MTEwM319LHdjX3Nlc3Npb25VcGRhdGU6e3JlcTp7dHRsOk0scHJvbXB0OiExLHRhZzoxMTA0fSxyZXM6e3R0bDpNLHByb21wdDohMSx0YWc6MTEwNX19LHdjX3Nlc3Npb25FeHRlbmQ6e3JlcTp7dHRsOk0scHJvbXB0OiExLHRhZzoxMTA2fSxyZXM6e3R0bDpNLHByb21wdDohMSx0YWc6MTEwN319LHdjX3Nlc3Npb25SZXF1ZXN0OntyZXE6e3R0bDpQLHByb21wdDohMCx0YWc6MTEwOH0scmVzOnt0dGw6UCxwcm9tcHQ6ITEsdGFnOjExMDl9fSx3Y19zZXNzaW9uRXZlbnQ6e3JlcTp7dHRsOlAscHJvbXB0OiEwLHRhZzoxMTEwfSxyZXM6e3R0bDpQLHByb21wdDohMSx0YWc6MTExMX19LHdjX3Nlc3Npb25EZWxldGU6e3JlcTp7dHRsOk0scHJvbXB0OiExLHRhZzoxMTEyfSxyZXM6e3R0bDpNLHByb21wdDohMSx0YWc6MTExM319LHdjX3Nlc3Npb25QaW5nOntyZXE6e3R0bDpNLHByb21wdDohMSx0YWc6MTExNH0scmVzOnt0dGw6TSxwcm9tcHQ6ITEsdGFnOjExMTV9fSx3Y19zZXNzaW9uQXV0aGVudGljYXRlOntyZXE6e3R0bDprZSxwcm9tcHQ6ITAsdGFnOjExMTZ9LHJlczp7dHRsOmtlLHByb21wdDohMSx0YWc6MTExN30scmVqZWN0Ont0dGw6UCxwcm9tcHQ6ITEsdGFnOjExMTh9LGF1dG9SZWplY3Q6e3R0bDpQLHByb21wdDohMSx0YWc6MTExOX19fSxoZT17bWluOlAsbWF4OkdlfSx4PXtpZGxlOlwiSURMRVwiLGFjdGl2ZTpcIkFDVElWRVwifSxZZT1cInJlcXVlc3RcIixYZT1bXCJ3Y19zZXNzaW9uUHJvcG9zZVwiLFwid2Nfc2Vzc2lvblJlcXVlc3RcIixcIndjX2F1dGhSZXF1ZXN0XCIsXCJ3Y19zZXNzaW9uQXV0aGVudGljYXRlXCJdLEplPVwid2NcIixXdD0xLjUsQmU9XCJhdXRoXCIsV2U9XCJhdXRoS2V5c1wiLFplPVwicGFpcmluZ1RvcGljc1wiLGV0PVwicmVxdWVzdHNcIixzZT1gJHtKZX1AJHsxLjV9OiR7QmV9OmAsaWU9YCR7c2V9OlBVQl9LRVlgO3ZhciBadD1PYmplY3QuZGVmaW5lUHJvcGVydHksZXM9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsdHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsdHQ9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxzcz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGlzPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsc3Q9KEksbix0KT0+biBpbiBJP1p0KEksbix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOklbbl09dCxFPShJLG4pPT57Zm9yKHZhciB0IGluIG58fChuPXt9KSlzcy5jYWxsKG4sdCkmJnN0KEksdCxuW3RdKTtpZih0dClmb3IodmFyIHQgb2YgdHQobikpaXMuY2FsbChuLHQpJiZzdChJLHQsblt0XSk7cmV0dXJuIEl9LGo9KEksbik9PmVzKEksdHMobikpO2NsYXNzIHJzIGV4dGVuZHMgeXR7Y29uc3RydWN0b3Iobil7c3VwZXIobiksdGhpcy5uYW1lPXplLHRoaXMuZXZlbnRzPW5ldyAkdCx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMucmVxdWVzdFF1ZXVlPXtzdGF0ZTp4LmlkbGUscXVldWU6W119LHRoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZT17c3RhdGU6eC5pZGxlLHF1ZXVlOltdfSx0aGlzLnJlcXVlc3RRdWV1ZURlbGF5PUd0LHRoaXMuZXhwZWN0ZWRQYWlyaW5nTWV0aG9kTWFwPW5ldyBNYXAsdGhpcy5yZWNlbnRseURlbGV0ZWRNYXA9bmV3IE1hcCx0aGlzLnJlY2VudGx5RGVsZXRlZExpbWl0PTIwMCx0aGlzLnJlbGF5TWVzc2FnZUNhY2hlPVtdLHRoaXMuaW5pdD1hc3luYygpPT57dGhpcy5pbml0aWFsaXplZHx8KGF3YWl0IHRoaXMuY2xlYW51cCgpLHRoaXMucmVnaXN0ZXJSZWxheWVyRXZlbnRzKCksdGhpcy5yZWdpc3RlckV4cGlyZXJFdmVudHMoKSx0aGlzLnJlZ2lzdGVyUGFpcmluZ0V2ZW50cygpLHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5yZWdpc3Rlcih7bWV0aG9kczpPYmplY3Qua2V5cyhTKX0pLHRoaXMuaW5pdGlhbGl6ZWQ9ITAsc2V0VGltZW91dCgoKT0+e3RoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZS5xdWV1ZT10aGlzLmdldFBlbmRpbmdTZXNzaW9uUmVxdWVzdHMoKSx0aGlzLnByb2Nlc3NTZXNzaW9uUmVxdWVzdFF1ZXVlKCl9LGplKHRoaXMucmVxdWVzdFF1ZXVlRGVsYXkpKSl9LHRoaXMuY29ubmVjdD1hc3luYyB0PT57YXdhaXQgdGhpcy5pc0luaXRpYWxpemVkKCk7Y29uc3QgZT1qKEUoe30sdCkse3JlcXVpcmVkTmFtZXNwYWNlczp0LnJlcXVpcmVkTmFtZXNwYWNlc3x8e30sb3B0aW9uYWxOYW1lc3BhY2VzOnQub3B0aW9uYWxOYW1lc3BhY2VzfHx7fX0pO2F3YWl0IHRoaXMuaXNWYWxpZENvbm5lY3QoZSk7Y29uc3R7cGFpcmluZ1RvcGljOnMscmVxdWlyZWROYW1lc3BhY2VzOmksb3B0aW9uYWxOYW1lc3BhY2VzOnIsc2Vzc2lvblByb3BlcnRpZXM6byxyZWxheXM6YX09ZTtsZXQgYz1zLGgsbD0hMTt0cnl7YyYmKGw9dGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmdldChjKS5hY3RpdmUpfWNhdGNoKHkpe3Rocm93IHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihgY29ubmVjdCgpIC0+IHBhaXJpbmcuZ2V0KCR7Y30pIGZhaWxlZGApLHl9aWYoIWN8fCFsKXtjb25zdHt0b3BpYzp5LHVyaTpSfT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuY3JlYXRlKCk7Yz15LGg9Un1pZighYyl7Y29uc3R7bWVzc2FnZTp5fT1wKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYGNvbm5lY3QoKSBwYWlyaW5nIHRvcGljOiAke2N9YCk7dGhyb3cgbmV3IEVycm9yKHkpfWNvbnN0IGc9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZ2VuZXJhdGVLZXlQYWlyKCksZD1TLndjX3Nlc3Npb25Qcm9wb3NlLnJlcS50dGx8fFAsdT1UKGQpLF89RSh7cmVxdWlyZWROYW1lc3BhY2VzOmksb3B0aW9uYWxOYW1lc3BhY2VzOnIscmVsYXlzOmE/P1t7cHJvdG9jb2w6b3R9XSxwcm9wb3Nlcjp7cHVibGljS2V5OmcsbWV0YWRhdGE6dGhpcy5jbGllbnQubWV0YWRhdGF9LGV4cGlyeVRpbWVzdGFtcDp1LHBhaXJpbmdUb3BpYzpjfSxvJiZ7c2Vzc2lvblByb3BlcnRpZXM6b30pLHtyZWplY3Q6cSxyZXNvbHZlOm0sZG9uZTpPfT16KGQsUWUpO3RoaXMuZXZlbnRzLm9uY2UodyhcInNlc3Npb25fY29ubmVjdFwiKSxhc3luYyh7ZXJyb3I6eSxzZXNzaW9uOlJ9KT0+e2lmKHkpcSh5KTtlbHNlIGlmKFIpe1Iuc2VsZi5wdWJsaWNLZXk9Zztjb25zdCBLPWooRSh7fSxSKSx7cGFpcmluZ1RvcGljOl8ucGFpcmluZ1RvcGljLHJlcXVpcmVkTmFtZXNwYWNlczpfLnJlcXVpcmVkTmFtZXNwYWNlcyxvcHRpb25hbE5hbWVzcGFjZXM6Xy5vcHRpb25hbE5hbWVzcGFjZXN9KTthd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLnNldChSLnRvcGljLEspLGF3YWl0IHRoaXMuc2V0RXhwaXJ5KFIudG9waWMsUi5leHBpcnkpLGMmJmF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy51cGRhdGVNZXRhZGF0YSh7dG9waWM6YyxtZXRhZGF0YTpSLnBlZXIubWV0YWRhdGF9KSx0aGlzLmNsZWFudXBEdXBsaWNhdGVQYWlyaW5ncyhLKSxtKEspfX0pO2NvbnN0IEQ9YXdhaXQgdGhpcy5zZW5kUmVxdWVzdCh7dG9waWM6YyxtZXRob2Q6XCJ3Y19zZXNzaW9uUHJvcG9zZVwiLHBhcmFtczpfLHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSk7cmV0dXJuIGF3YWl0IHRoaXMuc2V0UHJvcG9zYWwoRCxFKHtpZDpEfSxfKSkse3VyaTpoLGFwcHJvdmFsOk99fSx0aGlzLnBhaXI9YXN5bmMgdD0+e2F3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpO3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXIodCl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKFwicGFpcigpIGZhaWxlZFwiKSxlfX0sdGhpcy5hcHByb3ZlPWFzeW5jIHQ9Pnt2YXIgZSxzLGk7Y29uc3Qgcj10aGlzLmNsaWVudC5jb3JlLmV2ZW50Q2xpZW50LmNyZWF0ZUV2ZW50KHtwcm9wZXJ0aWVzOnt0b3BpYzooZT10Py5pZCk9PW51bGw/dm9pZCAwOmUudG9TdHJpbmcoKSx0cmFjZTpbQy5zZXNzaW9uX2FwcHJvdmVfc3RhcnRlZF19fSk7dHJ5e2F3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpfWNhdGNoKGYpe3Rocm93IHIuc2V0RXJyb3IoVS5ub19pbnRlcm5ldF9jb25uZWN0aW9uKSxmfXRyeXthd2FpdCB0aGlzLmlzVmFsaWRQcm9wb3NhbElkKHQ/LmlkKX1jYXRjaChmKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYGFwcHJvdmUoKSAtPiBwcm9wb3NhbC5nZXQoJHt0Py5pZH0pIGZhaWxlZGApLHIuc2V0RXJyb3IoVS5wcm9wb3NhbF9ub3RfZm91bmQpLGZ9dHJ5e2F3YWl0IHRoaXMuaXNWYWxpZEFwcHJvdmUodCl9Y2F0Y2goZil7dGhyb3cgdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKFwiYXBwcm92ZSgpIC0+IGlzVmFsaWRBcHByb3ZlKCkgZmFpbGVkXCIpLHIuc2V0RXJyb3IoVS5zZXNzaW9uX2FwcHJvdmVfbmFtZXNwYWNlX3ZhbGlkYXRpb25fZmFpbHVyZSksZn1jb25zdHtpZDpvLHJlbGF5UHJvdG9jb2w6YSxuYW1lc3BhY2VzOmMsc2Vzc2lvblByb3BlcnRpZXM6aCxzZXNzaW9uQ29uZmlnOmx9PXQsZz10aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQobyk7dGhpcy5jbGllbnQuY29yZS5ldmVudENsaWVudC5kZWxldGVFdmVudCh7ZXZlbnRJZDpyLmV2ZW50SWR9KTtjb25zdHtwYWlyaW5nVG9waWM6ZCxwcm9wb3Nlcjp1LHJlcXVpcmVkTmFtZXNwYWNlczpfLG9wdGlvbmFsTmFtZXNwYWNlczpxfT1nO2xldCBtPShzPXRoaXMuY2xpZW50LmNvcmUuZXZlbnRDbGllbnQpPT1udWxsP3ZvaWQgMDpzLmdldEV2ZW50KHt0b3BpYzpkfSk7bXx8KG09KGk9dGhpcy5jbGllbnQuY29yZS5ldmVudENsaWVudCk9PW51bGw/dm9pZCAwOmkuY3JlYXRlRXZlbnQoe3R5cGU6Qy5zZXNzaW9uX2FwcHJvdmVfc3RhcnRlZCxwcm9wZXJ0aWVzOnt0b3BpYzpkLHRyYWNlOltDLnNlc3Npb25fYXBwcm92ZV9zdGFydGVkLEMuc2Vzc2lvbl9uYW1lc3BhY2VzX3ZhbGlkYXRpb25fc3VjY2Vzc119fSkpO2NvbnN0IE89YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZ2VuZXJhdGVLZXlQYWlyKCksRD11LnB1YmxpY0tleSx5PWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmdlbmVyYXRlU2hhcmVkS2V5KE8sRCksUj1FKEUoe3JlbGF5Ontwcm90b2NvbDphPz9cImlyblwifSxuYW1lc3BhY2VzOmMsY29udHJvbGxlcjp7cHVibGljS2V5Ok8sbWV0YWRhdGE6dGhpcy5jbGllbnQubWV0YWRhdGF9LGV4cGlyeTpUKGspfSxoJiZ7c2Vzc2lvblByb3BlcnRpZXM6aH0pLGwmJntzZXNzaW9uQ29uZmlnOmx9KTttLmFkZFRyYWNlKEMuc3Vic2NyaWJpbmdfc2Vzc2lvbl90b3BpYyk7dHJ5e2F3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmUoeSl9Y2F0Y2goZil7dGhyb3cgbS5zZXRFcnJvcihVLnN1YnNjcmliZV9zZXNzaW9uX3RvcGljX2ZhaWx1cmUpLGZ9bS5hZGRUcmFjZShDLnN1YnNjcmliZV9zZXNzaW9uX3RvcGljX3N1Y2Nlc3MpO2NvbnN0IEs9aihFKHt9LFIpLHt0b3BpYzp5LHJlcXVpcmVkTmFtZXNwYWNlczpfLG9wdGlvbmFsTmFtZXNwYWNlczpxLHBhaXJpbmdUb3BpYzpkLGFja25vd2xlZGdlZDohMSxzZWxmOlIuY29udHJvbGxlcixwZWVyOntwdWJsaWNLZXk6dS5wdWJsaWNLZXksbWV0YWRhdGE6dS5tZXRhZGF0YX0sY29udHJvbGxlcjpPfSk7YXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi5zZXQoeSxLKSxtLmFkZFRyYWNlKEMuc3RvcmVfc2Vzc2lvbik7dHJ5e20uYWRkVHJhY2UoQy5wdWJsaXNoaW5nX3Nlc3Npb25fc2V0dGxlKSxhd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KHt0b3BpYzp5LG1ldGhvZDpcIndjX3Nlc3Npb25TZXR0bGVcIixwYXJhbXM6Uix0aHJvd09uRmFpbGVkUHVibGlzaDohMH0pLmNhdGNoKGY9Pnt0aHJvdyBtPy5zZXRFcnJvcihVLnNlc3Npb25fc2V0dGxlX3B1Ymxpc2hfZmFpbHVyZSksZn0pLG0uYWRkVHJhY2UoQy5zZXNzaW9uX3NldHRsZV9wdWJsaXNoX3N1Y2Nlc3MpLG0uYWRkVHJhY2UoQy5wdWJsaXNoaW5nX3Nlc3Npb25fYXBwcm92ZSksYXdhaXQgdGhpcy5zZW5kUmVzdWx0KHtpZDpvLHRvcGljOmQscmVzdWx0OntyZWxheTp7cHJvdG9jb2w6YT8/XCJpcm5cIn0scmVzcG9uZGVyUHVibGljS2V5Ok99LHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSkuY2F0Y2goZj0+e3Rocm93IG0/LnNldEVycm9yKFUuc2Vzc2lvbl9hcHByb3ZlX3B1Ymxpc2hfZmFpbHVyZSksZn0pLG0uYWRkVHJhY2UoQy5zZXNzaW9uX2FwcHJvdmVfcHVibGlzaF9zdWNjZXNzKX1jYXRjaChmKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoZiksdGhpcy5jbGllbnQuc2Vzc2lvbi5kZWxldGUoeSxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci51bnN1YnNjcmliZSh5KSxmfXJldHVybiB0aGlzLmNsaWVudC5jb3JlLmV2ZW50Q2xpZW50LmRlbGV0ZUV2ZW50KHtldmVudElkOm0uZXZlbnRJZH0pLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy51cGRhdGVNZXRhZGF0YSh7dG9waWM6ZCxtZXRhZGF0YTp1Lm1ldGFkYXRhfSksYXdhaXQgdGhpcy5jbGllbnQucHJvcG9zYWwuZGVsZXRlKG8sTihcIlVTRVJfRElTQ09OTkVDVEVEXCIpKSxhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuYWN0aXZhdGUoe3RvcGljOmR9KSxhd2FpdCB0aGlzLnNldEV4cGlyeSh5LFQoaykpLHt0b3BpYzp5LGFja25vd2xlZGdlZDooKT0+UHJvbWlzZS5yZXNvbHZlKHRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KHkpKX19LHRoaXMucmVqZWN0PWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkUmVqZWN0KHQpfWNhdGNoKHIpe3Rocm93IHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihcInJlamVjdCgpIC0+IGlzVmFsaWRSZWplY3QoKSBmYWlsZWRcIikscn1jb25zdHtpZDplLHJlYXNvbjpzfT10O2xldCBpO3RyeXtpPXRoaXMuY2xpZW50LnByb3Bvc2FsLmdldChlKS5wYWlyaW5nVG9waWN9Y2F0Y2gocil7dGhyb3cgdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGByZWplY3QoKSAtPiBwcm9wb3NhbC5nZXQoJHtlfSkgZmFpbGVkYCkscn1pJiYoYXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOmUsdG9waWM6aSxlcnJvcjpzLHJwY09wdHM6Uy53Y19zZXNzaW9uUHJvcG9zZS5yZWplY3R9KSxhd2FpdCB0aGlzLmNsaWVudC5wcm9wb3NhbC5kZWxldGUoZSxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpKX0sdGhpcy51cGRhdGU9YXN5bmMgdD0+e2F3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpO3RyeXthd2FpdCB0aGlzLmlzVmFsaWRVcGRhdGUodCl9Y2F0Y2gobCl7dGhyb3cgdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKFwidXBkYXRlKCkgLT4gaXNWYWxpZFVwZGF0ZSgpIGZhaWxlZFwiKSxsfWNvbnN0e3RvcGljOmUsbmFtZXNwYWNlczpzfT10LHtkb25lOmkscmVzb2x2ZTpyLHJlamVjdDpvfT16KCksYT1KKCksYz1hZSgpLnRvU3RyaW5nKCksaD10aGlzLmNsaWVudC5zZXNzaW9uLmdldChlKS5uYW1lc3BhY2VzO3JldHVybiB0aGlzLmV2ZW50cy5vbmNlKHcoXCJzZXNzaW9uX3VwZGF0ZVwiLGEpLCh7ZXJyb3I6bH0pPT57bD9vKGwpOnIoKX0pLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKGUse25hbWVzcGFjZXM6c30pLGF3YWl0IHRoaXMuc2VuZFJlcXVlc3Qoe3RvcGljOmUsbWV0aG9kOlwid2Nfc2Vzc2lvblVwZGF0ZVwiLHBhcmFtczp7bmFtZXNwYWNlczpzfSx0aHJvd09uRmFpbGVkUHVibGlzaDohMCxjbGllbnRScGNJZDphLHJlbGF5UnBjSWQ6Y30pLmNhdGNoKGw9Pnt0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IobCksdGhpcy5jbGllbnQuc2Vzc2lvbi51cGRhdGUoZSx7bmFtZXNwYWNlczpofSksbyhsKX0pLHthY2tub3dsZWRnZWQ6aX19LHRoaXMuZXh0ZW5kPWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkRXh0ZW5kKHQpfWNhdGNoKGEpe3Rocm93IHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihcImV4dGVuZCgpIC0+IGlzVmFsaWRFeHRlbmQoKSBmYWlsZWRcIiksYX1jb25zdHt0b3BpYzplfT10LHM9SigpLHtkb25lOmkscmVzb2x2ZTpyLHJlamVjdDpvfT16KCk7cmV0dXJuIHRoaXMuZXZlbnRzLm9uY2UodyhcInNlc3Npb25fZXh0ZW5kXCIscyksKHtlcnJvcjphfSk9PnthP28oYSk6cigpfSksYXdhaXQgdGhpcy5zZXRFeHBpcnkoZSxUKGspKSx0aGlzLnNlbmRSZXF1ZXN0KHt0b3BpYzplLG1ldGhvZDpcIndjX3Nlc3Npb25FeHRlbmRcIixwYXJhbXM6e30sY2xpZW50UnBjSWQ6cyx0aHJvd09uRmFpbGVkUHVibGlzaDohMH0pLmNhdGNoKGE9PntvKGEpfSkse2Fja25vd2xlZGdlZDppfX0sdGhpcy5yZXF1ZXN0PWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkUmVxdWVzdCh0KX1jYXRjaChkKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoXCJyZXF1ZXN0KCkgLT4gaXNWYWxpZFJlcXVlc3QoKSBmYWlsZWRcIiksZH1jb25zdHtjaGFpbklkOmUscmVxdWVzdDpzLHRvcGljOmksZXhwaXJ5OnI9Uy53Y19zZXNzaW9uUmVxdWVzdC5yZXEudHRsfT10LG89dGhpcy5jbGllbnQuc2Vzc2lvbi5nZXQoaSksYT1KKCksYz1hZSgpLnRvU3RyaW5nKCkse2RvbmU6aCxyZXNvbHZlOmwscmVqZWN0Omd9PXoocixcIlJlcXVlc3QgZXhwaXJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7cmV0dXJuIHRoaXMuZXZlbnRzLm9uY2UodyhcInNlc3Npb25fcmVxdWVzdFwiLGEpLCh7ZXJyb3I6ZCxyZXN1bHQ6dX0pPT57ZD9nKGQpOmwodSl9KSxhd2FpdCBQcm9taXNlLmFsbChbbmV3IFByb21pc2UoYXN5bmMgZD0+e2F3YWl0IHRoaXMuc2VuZFJlcXVlc3Qoe2NsaWVudFJwY0lkOmEscmVsYXlScGNJZDpjLHRvcGljOmksbWV0aG9kOlwid2Nfc2Vzc2lvblJlcXVlc3RcIixwYXJhbXM6e3JlcXVlc3Q6aihFKHt9LHMpLHtleHBpcnlUaW1lc3RhbXA6VChyKX0pLGNoYWluSWQ6ZX0sZXhwaXJ5OnIsdGhyb3dPbkZhaWxlZFB1Ymxpc2g6ITB9KS5jYXRjaCh1PT5nKHUpKSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInNlc3Npb25fcmVxdWVzdF9zZW50XCIse3RvcGljOmkscmVxdWVzdDpzLGNoYWluSWQ6ZSxpZDphfSksZCgpfSksbmV3IFByb21pc2UoYXN5bmMgZD0+e3ZhciB1O2lmKCEoKHU9by5zZXNzaW9uQ29uZmlnKSE9bnVsbCYmdS5kaXNhYmxlRGVlcExpbmspKXtjb25zdCBfPWF3YWl0IF90KHRoaXMuY2xpZW50LmNvcmUuc3RvcmFnZSxQZSk7RXQoe2lkOmEsdG9waWM6aSx3Y0RlZXBMaW5rOl99KX1kKCl9KSxoKCldKS50aGVuKGQ9PmRbMl0pfSx0aGlzLnJlc3BvbmQ9YXN5bmMgdD0+e2F3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpLGF3YWl0IHRoaXMuaXNWYWxpZFJlc3BvbmQodCk7Y29uc3R7dG9waWM6ZSxyZXNwb25zZTpzfT10LHtpZDppfT1zO0wocyk/YXdhaXQgdGhpcy5zZW5kUmVzdWx0KHtpZDppLHRvcGljOmUscmVzdWx0OnMucmVzdWx0LHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSk6JChzKSYmYXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOmksdG9waWM6ZSxlcnJvcjpzLmVycm9yfSksdGhpcy5jbGVhbnVwQWZ0ZXJSZXNwb25zZSh0KX0sdGhpcy5waW5nPWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkUGluZyh0KX1jYXRjaChzKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoXCJwaW5nKCkgLT4gaXNWYWxpZFBpbmcoKSBmYWlsZWRcIiksc31jb25zdHt0b3BpYzplfT10O2lmKHRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhlKSl7Y29uc3Qgcz1KKCksaT1hZSgpLnRvU3RyaW5nKCkse2RvbmU6cixyZXNvbHZlOm8scmVqZWN0OmF9PXooKTt0aGlzLmV2ZW50cy5vbmNlKHcoXCJzZXNzaW9uX3BpbmdcIixzKSwoe2Vycm9yOmN9KT0+e2M/YShjKTpvKCl9KSxhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5zZW5kUmVxdWVzdCh7dG9waWM6ZSxtZXRob2Q6XCJ3Y19zZXNzaW9uUGluZ1wiLHBhcmFtczp7fSx0aHJvd09uRmFpbGVkUHVibGlzaDohMCxjbGllbnRScGNJZDpzLHJlbGF5UnBjSWQ6aX0pLHIoKV0pfWVsc2UgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMoZSkmJmF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5waW5nKHt0b3BpYzplfSl9LHRoaXMuZW1pdD1hc3luYyB0PT57YXdhaXQgdGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkRW1pdCh0KTtjb25zdHt0b3BpYzplLGV2ZW50OnMsY2hhaW5JZDppfT10LHI9YWUoKS50b1N0cmluZygpO2F3YWl0IHRoaXMuc2VuZFJlcXVlc3Qoe3RvcGljOmUsbWV0aG9kOlwid2Nfc2Vzc2lvbkV2ZW50XCIscGFyYW1zOntldmVudDpzLGNoYWluSWQ6aX0sdGhyb3dPbkZhaWxlZFB1Ymxpc2g6ITAscmVsYXlScGNJZDpyfSl9LHRoaXMuZGlzY29ubmVjdD1hc3luYyB0PT57YXdhaXQgdGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkRGlzY29ubmVjdCh0KTtjb25zdHt0b3BpYzplfT10O2lmKHRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhlKSlhd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KHt0b3BpYzplLG1ldGhvZDpcIndjX3Nlc3Npb25EZWxldGVcIixwYXJhbXM6TihcIlVTRVJfRElTQ09OTkVDVEVEXCIpLHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSksYXdhaXQgdGhpcy5kZWxldGVTZXNzaW9uKHt0b3BpYzplLGVtaXRFdmVudDohMX0pO2Vsc2UgaWYodGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMoZSkpYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmRpc2Nvbm5lY3Qoe3RvcGljOmV9KTtlbHNle2NvbnN0e21lc3NhZ2U6c309cChcIk1JU01BVENIRURfVE9QSUNcIixgU2Vzc2lvbiBvciBwYWlyaW5nIHRvcGljIG5vdCBmb3VuZDogJHtlfWApO3Rocm93IG5ldyBFcnJvcihzKX19LHRoaXMuZmluZD10PT4odGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5jbGllbnQuc2Vzc2lvbi5nZXRBbGwoKS5maWx0ZXIoZT0+UnQoZSx0KSkpLHRoaXMuZ2V0UGVuZGluZ1Nlc3Npb25SZXF1ZXN0cz0oKT0+dGhpcy5jbGllbnQucGVuZGluZ1JlcXVlc3QuZ2V0QWxsKCksdGhpcy5hdXRoZW50aWNhdGU9YXN5bmMgdD0+e3RoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMuaXNWYWxpZEF1dGhlbnRpY2F0ZSh0KTtjb25zdHtjaGFpbnM6ZSxzdGF0ZW1lbnQ6cz1cIlwiLHVyaTppLGRvbWFpbjpyLG5vbmNlOm8sdHlwZTphLGV4cDpjLG5iZjpoLG1ldGhvZHM6bD1bXSxleHBpcnk6Z309dCxkPVsuLi50LnJlc291cmNlc3x8W11dLHt0b3BpYzp1LHVyaTpffT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuY3JlYXRlKHttZXRob2RzOltcIndjX3Nlc3Npb25BdXRoZW50aWNhdGVcIl19KTt0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyh7bWVzc2FnZTpcIkdlbmVyYXRlZCBuZXcgcGFpcmluZ1wiLHBhaXJpbmc6e3RvcGljOnUsdXJpOl99fSk7Y29uc3QgcT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZUtleVBhaXIoKSxtPV9lKHEpO2lmKGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLmNsaWVudC5hdXRoLmF1dGhLZXlzLnNldChpZSx7cmVzcG9uc2VUb3BpYzptLHB1YmxpY0tleTpxfSksdGhpcy5jbGllbnQuYXV0aC5wYWlyaW5nVG9waWNzLnNldChtLHt0b3BpYzptLHBhaXJpbmdUb3BpYzp1fSldKSxhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIuc3Vic2NyaWJlKG0pLHRoaXMuY2xpZW50LmxvZ2dlci5pbmZvKGBzZW5kaW5nIHJlcXVlc3QgdG8gbmV3IHBhaXJpbmcgdG9waWM6ICR7dX1gKSxsLmxlbmd0aD4wKXtjb25zdHtuYW1lc3BhY2U6QX09RWUoZVswXSk7bGV0IHY9U3QoQSxcInJlcXVlc3RcIixsKTtSZShkKSYmKHY9SXQodixkLnBvcCgpKSksZC5wdXNoKHYpfWNvbnN0IE89ZyYmZz5TLndjX3Nlc3Npb25BdXRoZW50aWNhdGUucmVxLnR0bD9nOlMud2Nfc2Vzc2lvbkF1dGhlbnRpY2F0ZS5yZXEudHRsLEQ9e2F1dGhQYXlsb2FkOnt0eXBlOmE/P1wiY2FpcDEyMlwiLGNoYWluczplLHN0YXRlbWVudDpzLGF1ZDppLGRvbWFpbjpyLHZlcnNpb246XCIxXCIsbm9uY2U6byxpYXQ6bmV3IERhdGUoKS50b0lTT1N0cmluZygpLGV4cDpjLG5iZjpoLHJlc291cmNlczpkfSxyZXF1ZXN0ZXI6e3B1YmxpY0tleTpxLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSxleHBpcnlUaW1lc3RhbXA6VChPKX0seT17ZWlwMTU1OntjaGFpbnM6ZSxtZXRob2RzOlsuLi5uZXcgU2V0KFtcInBlcnNvbmFsX3NpZ25cIiwuLi5sXSldLGV2ZW50czpbXCJjaGFpbkNoYW5nZWRcIixcImFjY291bnRzQ2hhbmdlZFwiXX19LFI9e3JlcXVpcmVkTmFtZXNwYWNlczp7fSxvcHRpb25hbE5hbWVzcGFjZXM6eSxyZWxheXM6W3twcm90b2NvbDpcImlyblwifV0scGFpcmluZ1RvcGljOnUscHJvcG9zZXI6e3B1YmxpY0tleTpxLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSxleHBpcnlUaW1lc3RhbXA6VChTLndjX3Nlc3Npb25Qcm9wb3NlLnJlcS50dGwpfSx7ZG9uZTpLLHJlc29sdmU6ZixyZWplY3Q6ZGV9PXooTyxcIlJlcXVlc3QgZXhwaXJlZFwiKSxyZT1hc3luYyh7ZXJyb3I6QSxzZXNzaW9uOnZ9KT0+e2lmKHRoaXMuZXZlbnRzLm9mZih3KFwic2Vzc2lvbl9yZXF1ZXN0XCIsRiksdWUpLEEpZGUoQSk7ZWxzZSBpZih2KXt2LnNlbGYucHVibGljS2V5PXEsYXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi5zZXQodi50b3BpYyx2KSxhd2FpdCB0aGlzLnNldEV4cGlyeSh2LnRvcGljLHYuZXhwaXJ5KSx1JiZhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcudXBkYXRlTWV0YWRhdGEoe3RvcGljOnUsbWV0YWRhdGE6di5wZWVyLm1ldGFkYXRhfSk7Y29uc3QgUT10aGlzLmNsaWVudC5zZXNzaW9uLmdldCh2LnRvcGljKTthd2FpdCB0aGlzLmRlbGV0ZVByb3Bvc2FsKEIpLGYoe3Nlc3Npb246UX0pfX0sdWU9YXN5bmMgQT0+e2lmKGF3YWl0IHRoaXMuZGVsZXRlUGVuZGluZ0F1dGhSZXF1ZXN0KEYse21lc3NhZ2U6XCJmdWxmaWxsZWRcIixjb2RlOjB9KSxBLmVycm9yKXtjb25zdCBXPU4oXCJXQ19NRVRIT0RfVU5TVVBQT1JURURcIixcIndjX3Nlc3Npb25BdXRoZW50aWNhdGVcIik7cmV0dXJuIEEuZXJyb3IuY29kZT09PVcuY29kZT92b2lkIDA6KHRoaXMuZXZlbnRzLm9mZih3KFwic2Vzc2lvbl9jb25uZWN0XCIpLHJlKSxkZShBLmVycm9yLm1lc3NhZ2UpKX1hd2FpdCB0aGlzLmRlbGV0ZVByb3Bvc2FsKEIpLHRoaXMuZXZlbnRzLm9mZih3KFwic2Vzc2lvbl9jb25uZWN0XCIpLHJlKTtjb25zdHtjYWNhb3M6dixyZXNwb25kZXI6UX09QS5yZXN1bHQsZ2U9W10sVGU9W107Zm9yKGNvbnN0IFcgb2Ygdil7YXdhaXQgYmUoe2NhY2FvOlcscHJvamVjdElkOnRoaXMuY2xpZW50LmNvcmUucHJvamVjdElkfSl8fCh0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoVyxcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkXCIpLGRlKE4oXCJTRVNTSU9OX1NFVFRMRU1FTlRfRkFJTEVEXCIsXCJTaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZFwiKSkpO2NvbnN0e3A6d2V9PVcseWU9UmUod2UucmVzb3VyY2VzKSxPZT1beGUod2UuaXNzKV0scnQ9RGUod2UuaXNzKTtpZih5ZSl7Y29uc3QgbWU9VmUoeWUpLG50PU1lKHllKTtnZS5wdXNoKC4uLm1lKSxPZS5wdXNoKC4uLm50KX1mb3IoY29uc3QgbWUgb2YgT2UpVGUucHVzaChgJHttZX06JHtydH1gKX1jb25zdCBuZT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZVNoYXJlZEtleShxLFEucHVibGljS2V5KTtsZXQgb2U7Z2UubGVuZ3RoPjAmJihvZT17dG9waWM6bmUsYWNrbm93bGVkZ2VkOiEwLHNlbGY6e3B1YmxpY0tleTpxLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSxwZWVyOlEsY29udHJvbGxlcjpRLnB1YmxpY0tleSxleHBpcnk6VChrKSxyZXF1aXJlZE5hbWVzcGFjZXM6e30sb3B0aW9uYWxOYW1lc3BhY2VzOnt9LHJlbGF5Ontwcm90b2NvbDpcImlyblwifSxwYWlyaW5nVG9waWM6dSxuYW1lc3BhY2VzOkxlKFsuLi5uZXcgU2V0KGdlKV0sWy4uLm5ldyBTZXQoVGUpXSl9LGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmUobmUpLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24uc2V0KG5lLG9lKSx1JiZhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcudXBkYXRlTWV0YWRhdGEoe3RvcGljOnUsbWV0YWRhdGE6US5tZXRhZGF0YX0pLG9lPXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KG5lKSksZih7YXV0aHM6dixzZXNzaW9uOm9lfSl9LEY9SigpLEI9SigpO3RoaXMuZXZlbnRzLm9uY2UodyhcInNlc3Npb25fY29ubmVjdFwiKSxyZSksdGhpcy5ldmVudHMub25jZSh3KFwic2Vzc2lvbl9yZXF1ZXN0XCIsRiksdWUpO3RyeXthd2FpdCBQcm9taXNlLmFsbChbdGhpcy5zZW5kUmVxdWVzdCh7dG9waWM6dSxtZXRob2Q6XCJ3Y19zZXNzaW9uQXV0aGVudGljYXRlXCIscGFyYW1zOkQsZXhwaXJ5OnQuZXhwaXJ5LHRocm93T25GYWlsZWRQdWJsaXNoOiEwLGNsaWVudFJwY0lkOkZ9KSx0aGlzLnNlbmRSZXF1ZXN0KHt0b3BpYzp1LG1ldGhvZDpcIndjX3Nlc3Npb25Qcm9wb3NlXCIscGFyYW1zOlIsZXhwaXJ5OlMud2Nfc2Vzc2lvblByb3Bvc2UucmVxLnR0bCx0aHJvd09uRmFpbGVkUHVibGlzaDohMCxjbGllbnRScGNJZDpCfSldKX1jYXRjaChBKXt0aHJvdyB0aGlzLmV2ZW50cy5vZmYodyhcInNlc3Npb25fY29ubmVjdFwiKSxyZSksdGhpcy5ldmVudHMub2ZmKHcoXCJzZXNzaW9uX3JlcXVlc3RcIixGKSx1ZSksQX1yZXR1cm4gYXdhaXQgdGhpcy5zZXRQcm9wb3NhbChCLEUoe2lkOkJ9LFIpKSxhd2FpdCB0aGlzLnNldEF1dGhSZXF1ZXN0KEYse3JlcXVlc3Q6aihFKHt9LEQpLHt2ZXJpZnlDb250ZXh0Ont9fSkscGFpcmluZ1RvcGljOnV9KSx7dXJpOl8scmVzcG9uc2U6S319LHRoaXMuYXBwcm92ZVNlc3Npb25BdXRoZW50aWNhdGU9YXN5bmMgdD0+e2NvbnN0e2lkOmUsYXV0aHM6c309dCxpPXRoaXMuY2xpZW50LmNvcmUuZXZlbnRDbGllbnQuY3JlYXRlRXZlbnQoe3Byb3BlcnRpZXM6e3RvcGljOmUudG9TdHJpbmcoKSx0cmFjZTpbRy5hdXRoZW50aWNhdGVkX3Nlc3Npb25fYXBwcm92ZV9zdGFydGVkXX19KTt0cnl7dGhpcy5pc0luaXRpYWxpemVkKCl9Y2F0Y2goXyl7dGhyb3cgaS5zZXRFcnJvcihaLm5vX2ludGVybmV0X2Nvbm5lY3Rpb24pLF99Y29uc3Qgcj10aGlzLmdldFBlbmRpbmdBdXRoUmVxdWVzdChlKTtpZighcil0aHJvdyBpLnNldEVycm9yKFouYXV0aGVudGljYXRlZF9zZXNzaW9uX3BlbmRpbmdfcmVxdWVzdF9ub3RfZm91bmQpLG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgcGVuZGluZyBhdXRoIHJlcXVlc3Qgd2l0aCBpZCAke2V9YCk7Y29uc3Qgbz1yLnJlcXVlc3Rlci5wdWJsaWNLZXksYT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZUtleVBhaXIoKSxjPV9lKG8pLGg9e3R5cGU6SWUscmVjZWl2ZXJQdWJsaWNLZXk6byxzZW5kZXJQdWJsaWNLZXk6YX0sbD1bXSxnPVtdO2Zvcihjb25zdCBfIG9mIHMpe2lmKCFhd2FpdCBiZSh7Y2FjYW86Xyxwcm9qZWN0SWQ6dGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWR9KSl7aS5zZXRFcnJvcihaLmludmFsaWRfY2FjYW8pO2NvbnN0IHk9TihcIlNFU1NJT05fU0VUVExFTUVOVF9GQUlMRURcIixcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkXCIpO3Rocm93IGF3YWl0IHRoaXMuc2VuZEVycm9yKHtpZDplLHRvcGljOmMsZXJyb3I6eSxlbmNvZGVPcHRzOmh9KSxuZXcgRXJyb3IoeS5tZXNzYWdlKX1pLmFkZFRyYWNlKEcuY2FjYW9zX3ZlcmlmaWVkKTtjb25zdHtwOnF9PV8sbT1SZShxLnJlc291cmNlcyksTz1beGUocS5pc3MpXSxEPURlKHEuaXNzKTtpZihtKXtjb25zdCB5PVZlKG0pLFI9TWUobSk7bC5wdXNoKC4uLnkpLE8ucHVzaCguLi5SKX1mb3IoY29uc3QgeSBvZiBPKWcucHVzaChgJHt5fToke0R9YCl9Y29uc3QgZD1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZVNoYXJlZEtleShhLG8pO2kuYWRkVHJhY2UoRy5jcmVhdGVfYXV0aGVudGljYXRlZF9zZXNzaW9uX3RvcGljKTtsZXQgdTtpZihsPy5sZW5ndGg+MCl7dT17dG9waWM6ZCxhY2tub3dsZWRnZWQ6ITAsc2VsZjp7cHVibGljS2V5OmEsbWV0YWRhdGE6dGhpcy5jbGllbnQubWV0YWRhdGF9LHBlZXI6e3B1YmxpY0tleTpvLG1ldGFkYXRhOnIucmVxdWVzdGVyLm1ldGFkYXRhfSxjb250cm9sbGVyOm8sZXhwaXJ5OlQoayksYXV0aGVudGljYXRpb246cyxyZXF1aXJlZE5hbWVzcGFjZXM6e30sb3B0aW9uYWxOYW1lc3BhY2VzOnt9LHJlbGF5Ontwcm90b2NvbDpcImlyblwifSxwYWlyaW5nVG9waWM6ci5wYWlyaW5nVG9waWMsbmFtZXNwYWNlczpMZShbLi4ubmV3IFNldChsKV0sWy4uLm5ldyBTZXQoZyldKX0saS5hZGRUcmFjZShHLnN1YnNjcmliaW5nX2F1dGhlbnRpY2F0ZWRfc2Vzc2lvbl90b3BpYyk7dHJ5e2F3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmUoZCl9Y2F0Y2goXyl7dGhyb3cgaS5zZXRFcnJvcihaLnN1YnNjcmliZV9hdXRoZW50aWNhdGVkX3Nlc3Npb25fdG9waWNfZmFpbHVyZSksX31pLmFkZFRyYWNlKEcuc3Vic2NyaWJlX2F1dGhlbnRpY2F0ZWRfc2Vzc2lvbl90b3BpY19zdWNjZXNzKSxhd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLnNldChkLHUpLGkuYWRkVHJhY2UoRy5zdG9yZV9hdXRoZW50aWNhdGVkX3Nlc3Npb24pLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy51cGRhdGVNZXRhZGF0YSh7dG9waWM6ci5wYWlyaW5nVG9waWMsbWV0YWRhdGE6ci5yZXF1ZXN0ZXIubWV0YWRhdGF9KX1pLmFkZFRyYWNlKEcucHVibGlzaGluZ19hdXRoZW50aWNhdGVkX3Nlc3Npb25fYXBwcm92ZSk7dHJ5e2F3YWl0IHRoaXMuc2VuZFJlc3VsdCh7dG9waWM6YyxpZDplLHJlc3VsdDp7Y2FjYW9zOnMscmVzcG9uZGVyOntwdWJsaWNLZXk6YSxtZXRhZGF0YTp0aGlzLmNsaWVudC5tZXRhZGF0YX19LGVuY29kZU9wdHM6aCx0aHJvd09uRmFpbGVkUHVibGlzaDohMH0pfWNhdGNoKF8pe3Rocm93IGkuc2V0RXJyb3IoWi5hdXRoZW50aWNhdGVkX3Nlc3Npb25fYXBwcm92ZV9wdWJsaXNoX2ZhaWx1cmUpLF99cmV0dXJuIGF3YWl0IHRoaXMuY2xpZW50LmF1dGgucmVxdWVzdHMuZGVsZXRlKGUse21lc3NhZ2U6XCJmdWxmaWxsZWRcIixjb2RlOjB9KSxhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuYWN0aXZhdGUoe3RvcGljOnIucGFpcmluZ1RvcGljfSksdGhpcy5jbGllbnQuY29yZS5ldmVudENsaWVudC5kZWxldGVFdmVudCh7ZXZlbnRJZDppLmV2ZW50SWR9KSx7c2Vzc2lvbjp1fX0sdGhpcy5yZWplY3RTZXNzaW9uQXV0aGVudGljYXRlPWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTtjb25zdHtpZDplLHJlYXNvbjpzfT10LGk9dGhpcy5nZXRQZW5kaW5nQXV0aFJlcXVlc3QoZSk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBwZW5kaW5nIGF1dGggcmVxdWVzdCB3aXRoIGlkICR7ZX1gKTtjb25zdCByPWkucmVxdWVzdGVyLnB1YmxpY0tleSxvPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmdlbmVyYXRlS2V5UGFpcigpLGE9X2UociksYz17dHlwZTpJZSxyZWNlaXZlclB1YmxpY0tleTpyLHNlbmRlclB1YmxpY0tleTpvfTthd2FpdCB0aGlzLnNlbmRFcnJvcih7aWQ6ZSx0b3BpYzphLGVycm9yOnMsZW5jb2RlT3B0czpjLHJwY09wdHM6Uy53Y19zZXNzaW9uQXV0aGVudGljYXRlLnJlamVjdH0pLGF3YWl0IHRoaXMuY2xpZW50LmF1dGgucmVxdWVzdHMuZGVsZXRlKGUse21lc3NhZ2U6XCJyZWplY3RlZFwiLGNvZGU6MH0pLGF3YWl0IHRoaXMuY2xpZW50LnByb3Bvc2FsLmRlbGV0ZShlLE4oXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSl9LHRoaXMuZm9ybWF0QXV0aE1lc3NhZ2U9dD0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0e3JlcXVlc3Q6ZSxpc3M6c309dDtyZXR1cm4gZnQoZSxzKX0sdGhpcy5wcm9jZXNzUmVsYXlNZXNzYWdlQ2FjaGU9KCk9PntzZXRUaW1lb3V0KGFzeW5jKCk9PntpZih0aGlzLnJlbGF5TWVzc2FnZUNhY2hlLmxlbmd0aCE9PTApZm9yKDt0aGlzLnJlbGF5TWVzc2FnZUNhY2hlLmxlbmd0aD4wOyl0cnl7Y29uc3QgdD10aGlzLnJlbGF5TWVzc2FnZUNhY2hlLnNoaWZ0KCk7dCYmYXdhaXQgdGhpcy5vblJlbGF5TWVzc2FnZSh0KX1jYXRjaCh0KXt0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IodCl9fSw1MCl9LHRoaXMuY2xlYW51cER1cGxpY2F0ZVBhaXJpbmdzPWFzeW5jIHQ9PntpZih0LnBhaXJpbmdUb3BpYyl0cnl7Y29uc3QgZT10aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcucGFpcmluZ3MuZ2V0KHQucGFpcmluZ1RvcGljKSxzPXRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5wYWlyaW5ncy5nZXRBbGwoKS5maWx0ZXIoaT0+e3ZhciByLG87cmV0dXJuKChyPWkucGVlck1ldGFkYXRhKT09bnVsbD92b2lkIDA6ci51cmwpJiYoKG89aS5wZWVyTWV0YWRhdGEpPT1udWxsP3ZvaWQgMDpvLnVybCk9PT10LnBlZXIubWV0YWRhdGEudXJsJiZpLnRvcGljJiZpLnRvcGljIT09ZS50b3BpY30pO2lmKHMubGVuZ3RoPT09MClyZXR1cm47dGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYENsZWFuaW5nIHVwICR7cy5sZW5ndGh9IGR1cGxpY2F0ZSBwYWlyaW5nKHMpYCksYXdhaXQgUHJvbWlzZS5hbGwocy5tYXAoaT0+dGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmRpc2Nvbm5lY3Qoe3RvcGljOmkudG9waWN9KSkpLHRoaXMuY2xpZW50LmxvZ2dlci5pbmZvKFwiRHVwbGljYXRlIHBhaXJpbmdzIGNsZWFuIHVwIGZpbmlzaGVkXCIpfWNhdGNoKGUpe3RoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihlKX19LHRoaXMuZGVsZXRlU2Vzc2lvbj1hc3luYyB0PT57dmFyIGU7Y29uc3R7dG9waWM6cyxleHBpcmVySGFzRGVsZXRlZDppPSExLGVtaXRFdmVudDpyPSEwLGlkOm89MH09dCx7c2VsZjphfT10aGlzLmNsaWVudC5zZXNzaW9uLmdldChzKTthd2FpdCB0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIudW5zdWJzY3JpYmUocyksYXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi5kZWxldGUocyxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpLHRoaXMuYWRkVG9SZWNlbnRseURlbGV0ZWQocyxcInNlc3Npb25cIiksdGhpcy5jbGllbnQuY29yZS5jcnlwdG8ua2V5Y2hhaW4uaGFzKGEucHVibGljS2V5KSYmYXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZGVsZXRlS2V5UGFpcihhLnB1YmxpY0tleSksdGhpcy5jbGllbnQuY29yZS5jcnlwdG8ua2V5Y2hhaW4uaGFzKHMpJiZhd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5kZWxldGVTeW1LZXkocyksaXx8dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLmRlbChzKSx0aGlzLmNsaWVudC5jb3JlLnN0b3JhZ2UucmVtb3ZlSXRlbShQZSkuY2F0Y2goYz0+dGhpcy5jbGllbnQubG9nZ2VyLndhcm4oYykpLHRoaXMuZ2V0UGVuZGluZ1Nlc3Npb25SZXF1ZXN0cygpLmZvckVhY2goYz0+e2MudG9waWM9PT1zJiZ0aGlzLmRlbGV0ZVBlbmRpbmdTZXNzaW9uUmVxdWVzdChjLmlkLE4oXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSl9KSxzPT09KChlPXRoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZS5xdWV1ZVswXSk9PW51bGw/dm9pZCAwOmUudG9waWMpJiYodGhpcy5zZXNzaW9uUmVxdWVzdFF1ZXVlLnN0YXRlPXguaWRsZSksciYmdGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX2RlbGV0ZVwiLHtpZDpvLHRvcGljOnN9KX0sdGhpcy5kZWxldGVQcm9wb3NhbD1hc3luYyh0LGUpPT57aWYoZSl0cnl7Y29uc3Qgcz10aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQodCksaT10aGlzLmNsaWVudC5jb3JlLmV2ZW50Q2xpZW50LmdldEV2ZW50KHt0b3BpYzpzLnBhaXJpbmdUb3BpY30pO2k/LnNldEVycm9yKFUucHJvcG9zYWxfZXhwaXJlZCl9Y2F0Y2h7fWF3YWl0IFByb21pc2UuYWxsKFt0aGlzLmNsaWVudC5wcm9wb3NhbC5kZWxldGUodCxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpLGU/UHJvbWlzZS5yZXNvbHZlKCk6dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLmRlbCh0KV0pLHRoaXMuYWRkVG9SZWNlbnRseURlbGV0ZWQodCxcInByb3Bvc2FsXCIpfSx0aGlzLmRlbGV0ZVBlbmRpbmdTZXNzaW9uUmVxdWVzdD1hc3luYyh0LGUscz0hMSk9Pnthd2FpdCBQcm9taXNlLmFsbChbdGhpcy5jbGllbnQucGVuZGluZ1JlcXVlc3QuZGVsZXRlKHQsZSkscz9Qcm9taXNlLnJlc29sdmUoKTp0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIuZGVsKHQpXSksdGhpcy5hZGRUb1JlY2VudGx5RGVsZXRlZCh0LFwicmVxdWVzdFwiKSx0aGlzLnNlc3Npb25SZXF1ZXN0UXVldWUucXVldWU9dGhpcy5zZXNzaW9uUmVxdWVzdFF1ZXVlLnF1ZXVlLmZpbHRlcihpPT5pLmlkIT09dCkscyYmKHRoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZS5zdGF0ZT14LmlkbGUsdGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3JlcXVlc3RfZXhwaXJlXCIse2lkOnR9KSl9LHRoaXMuZGVsZXRlUGVuZGluZ0F1dGhSZXF1ZXN0PWFzeW5jKHQsZSxzPSExKT0+e2F3YWl0IFByb21pc2UuYWxsKFt0aGlzLmNsaWVudC5hdXRoLnJlcXVlc3RzLmRlbGV0ZSh0LGUpLHM/UHJvbWlzZS5yZXNvbHZlKCk6dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLmRlbCh0KV0pfSx0aGlzLnNldEV4cGlyeT1hc3luYyh0LGUpPT57dGhpcy5jbGllbnQuc2Vzc2lvbi5rZXlzLmluY2x1ZGVzKHQpJiYodGhpcy5jbGllbnQuY29yZS5leHBpcmVyLnNldCh0LGUpLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKHQse2V4cGlyeTplfSkpfSx0aGlzLnNldFByb3Bvc2FsPWFzeW5jKHQsZSk9Pnt0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIuc2V0KHQsVChTLndjX3Nlc3Npb25Qcm9wb3NlLnJlcS50dGwpKSxhd2FpdCB0aGlzLmNsaWVudC5wcm9wb3NhbC5zZXQodCxlKX0sdGhpcy5zZXRBdXRoUmVxdWVzdD1hc3luYyh0LGUpPT57Y29uc3R7cmVxdWVzdDpzLHBhaXJpbmdUb3BpYzppfT1lO3RoaXMuY2xpZW50LmNvcmUuZXhwaXJlci5zZXQodCxzLmV4cGlyeVRpbWVzdGFtcCksYXdhaXQgdGhpcy5jbGllbnQuYXV0aC5yZXF1ZXN0cy5zZXQodCx7YXV0aFBheWxvYWQ6cy5hdXRoUGF5bG9hZCxyZXF1ZXN0ZXI6cy5yZXF1ZXN0ZXIsZXhwaXJ5VGltZXN0YW1wOnMuZXhwaXJ5VGltZXN0YW1wLGlkOnQscGFpcmluZ1RvcGljOmksdmVyaWZ5Q29udGV4dDpzLnZlcmlmeUNvbnRleHR9KX0sdGhpcy5zZXRQZW5kaW5nU2Vzc2lvblJlcXVlc3Q9YXN5bmMgdD0+e2NvbnN0e2lkOmUsdG9waWM6cyxwYXJhbXM6aSx2ZXJpZnlDb250ZXh0OnJ9PXQsbz1pLnJlcXVlc3QuZXhwaXJ5VGltZXN0YW1wfHxUKFMud2Nfc2Vzc2lvblJlcXVlc3QucmVxLnR0bCk7dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLnNldChlLG8pLGF3YWl0IHRoaXMuY2xpZW50LnBlbmRpbmdSZXF1ZXN0LnNldChlLHtpZDplLHRvcGljOnMscGFyYW1zOmksdmVyaWZ5Q29udGV4dDpyfSl9LHRoaXMuc2VuZFJlcXVlc3Q9YXN5bmMgdD0+e2NvbnN0e3RvcGljOmUsbWV0aG9kOnMscGFyYW1zOmksZXhwaXJ5OnIscmVsYXlScGNJZDpvLGNsaWVudFJwY0lkOmEsdGhyb3dPbkZhaWxlZFB1Ymxpc2g6Y309dCxoPWZlKHMsaSxhKTtsZXQgbDt0cnl7bD1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5lbmNvZGUoZSxoKX1jYXRjaCh1KXt0aHJvdyBhd2FpdCB0aGlzLmNsZWFudXAoKSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYHNlbmRSZXF1ZXN0KCkgLT4gY29yZS5jcnlwdG8uZW5jb2RlKCkgZm9yIHRvcGljICR7ZX0gZmFpbGVkYCksdX1sZXQgZztpZihYZS5pbmNsdWRlcyhzKSl7Y29uc3QgdT1ZKEpTT04uc3RyaW5naWZ5KGgpKSxfPVkobCk7Zz1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLnZlcmlmeS5yZWdpc3Rlcih7aWQ6XyxkZWNyeXB0ZWRJZDp1fSl9Y29uc3QgZD1TW3NdLnJlcTtyZXR1cm4gZC5hdHRlc3RhdGlvbj1nLHImJihkLnR0bD1yKSxvJiYoZC5pZD1vKSx0aGlzLmNsaWVudC5jb3JlLmhpc3Rvcnkuc2V0KGUsaCksYz8oZC5pbnRlcm5hbD1qKEUoe30sZC5pbnRlcm5hbCkse3Rocm93T25GYWlsZWRQdWJsaXNoOiEwfSksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5yZWxheWVyLnB1Ymxpc2goZSxsLGQpKTp0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIucHVibGlzaChlLGwsZCkuY2F0Y2godT0+dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKHUpKSxoLmlkfSx0aGlzLnNlbmRSZXN1bHQ9YXN5bmMgdD0+e2NvbnN0e2lkOmUsdG9waWM6cyxyZXN1bHQ6aSx0aHJvd09uRmFpbGVkUHVibGlzaDpyLGVuY29kZU9wdHM6b309dCxhPWt0KGUsaSk7bGV0IGM7dHJ5e2M9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZW5jb2RlKHMsYSxvKX1jYXRjaChnKXt0aHJvdyBhd2FpdCB0aGlzLmNsZWFudXAoKSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYHNlbmRSZXN1bHQoKSAtPiBjb3JlLmNyeXB0by5lbmNvZGUoKSBmb3IgdG9waWMgJHtzfSBmYWlsZWRgKSxnfWxldCBoO3RyeXtoPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5nZXQocyxlKX1jYXRjaChnKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYHNlbmRSZXN1bHQoKSAtPiBoaXN0b3J5LmdldCgke3N9LCAke2V9KSBmYWlsZWRgKSxnfWNvbnN0IGw9U1toLnJlcXVlc3QubWV0aG9kXS5yZXM7cj8obC5pbnRlcm5hbD1qKEUoe30sbC5pbnRlcm5hbCkse3Rocm93T25GYWlsZWRQdWJsaXNoOiEwfSksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5yZWxheWVyLnB1Ymxpc2gocyxjLGwpKTp0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIucHVibGlzaChzLGMsbCkuY2F0Y2goZz0+dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGcpKSxhd2FpdCB0aGlzLmNsaWVudC5jb3JlLmhpc3RvcnkucmVzb2x2ZShhKX0sdGhpcy5zZW5kRXJyb3I9YXN5bmMgdD0+e2NvbnN0e2lkOmUsdG9waWM6cyxlcnJvcjppLGVuY29kZU9wdHM6cixycGNPcHRzOm99PXQsYT1qdChlLGkpO2xldCBjO3RyeXtjPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmVuY29kZShzLGEscil9Y2F0Y2goZyl7dGhyb3cgYXdhaXQgdGhpcy5jbGVhbnVwKCksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGBzZW5kRXJyb3IoKSAtPiBjb3JlLmNyeXB0by5lbmNvZGUoKSBmb3IgdG9waWMgJHtzfSBmYWlsZWRgKSxnfWxldCBoO3RyeXtoPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5nZXQocyxlKX1jYXRjaChnKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYHNlbmRFcnJvcigpIC0+IGhpc3RvcnkuZ2V0KCR7c30sICR7ZX0pIGZhaWxlZGApLGd9Y29uc3QgbD1vfHxTW2gucmVxdWVzdC5tZXRob2RdLnJlczt0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIucHVibGlzaChzLGMsbCksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnJlc29sdmUoYSl9LHRoaXMuY2xlYW51cD1hc3luYygpPT57Y29uc3QgdD1bXSxlPVtdO3RoaXMuY2xpZW50LnNlc3Npb24uZ2V0QWxsKCkuZm9yRWFjaChzPT57bGV0IGk9ITE7WChzLmV4cGlyeSkmJihpPSEwKSx0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5rZXljaGFpbi5oYXMocy50b3BpYyl8fChpPSEwKSxpJiZ0LnB1c2gocy50b3BpYyl9KSx0aGlzLmNsaWVudC5wcm9wb3NhbC5nZXRBbGwoKS5mb3JFYWNoKHM9PntYKHMuZXhwaXJ5VGltZXN0YW1wKSYmZS5wdXNoKHMuaWQpfSksYXdhaXQgUHJvbWlzZS5hbGwoWy4uLnQubWFwKHM9PnRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6c30pKSwuLi5lLm1hcChzPT50aGlzLmRlbGV0ZVByb3Bvc2FsKHMpKV0pfSx0aGlzLm9uUmVsYXlFdmVudFJlcXVlc3Q9YXN5bmMgdD0+e3RoaXMucmVxdWVzdFF1ZXVlLnF1ZXVlLnB1c2godCksYXdhaXQgdGhpcy5wcm9jZXNzUmVxdWVzdHNRdWV1ZSgpfSx0aGlzLnByb2Nlc3NSZXF1ZXN0c1F1ZXVlPWFzeW5jKCk9PntpZih0aGlzLnJlcXVlc3RRdWV1ZS5zdGF0ZT09PXguYWN0aXZlKXt0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyhcIlJlcXVlc3QgcXVldWUgYWxyZWFkeSBhY3RpdmUsIHNraXBwaW5nLi4uXCIpO3JldHVybn1mb3IodGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYFJlcXVlc3QgcXVldWUgc3RhcnRpbmcgd2l0aCAke3RoaXMucmVxdWVzdFF1ZXVlLnF1ZXVlLmxlbmd0aH0gcmVxdWVzdHNgKTt0aGlzLnJlcXVlc3RRdWV1ZS5xdWV1ZS5sZW5ndGg+MDspe3RoaXMucmVxdWVzdFF1ZXVlLnN0YXRlPXguYWN0aXZlO2NvbnN0IHQ9dGhpcy5yZXF1ZXN0UXVldWUucXVldWUuc2hpZnQoKTtpZih0KXRyeXthd2FpdCB0aGlzLnByb2Nlc3NSZXF1ZXN0KHQpfWNhdGNoKGUpe3RoaXMuY2xpZW50LmxvZ2dlci53YXJuKGUpfX10aGlzLnJlcXVlc3RRdWV1ZS5zdGF0ZT14LmlkbGV9LHRoaXMucHJvY2Vzc1JlcXVlc3Q9YXN5bmMgdD0+e2NvbnN0e3RvcGljOmUscGF5bG9hZDpzLGF0dGVzdGF0aW9uOmksZW5jcnlwdGVkSWQ6cn09dCxvPXMubWV0aG9kO2lmKCF0aGlzLnNob3VsZElnbm9yZVBhaXJpbmdSZXF1ZXN0KHt0b3BpYzplLHJlcXVlc3RNZXRob2Q6b30pKXN3aXRjaChvKXtjYXNlXCJ3Y19zZXNzaW9uUHJvcG9zZVwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvblByb3Bvc2VSZXF1ZXN0KHt0b3BpYzplLHBheWxvYWQ6cyxhdHRlc3RhdGlvbjppLGVuY3J5cHRlZElkOnJ9KTtjYXNlXCJ3Y19zZXNzaW9uU2V0dGxlXCI6cmV0dXJuIGF3YWl0IHRoaXMub25TZXNzaW9uU2V0dGxlUmVxdWVzdChlLHMpO2Nhc2VcIndjX3Nlc3Npb25VcGRhdGVcIjpyZXR1cm4gYXdhaXQgdGhpcy5vblNlc3Npb25VcGRhdGVSZXF1ZXN0KGUscyk7Y2FzZVwid2Nfc2Vzc2lvbkV4dGVuZFwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvbkV4dGVuZFJlcXVlc3QoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uUGluZ1wiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvblBpbmdSZXF1ZXN0KGUscyk7Y2FzZVwid2Nfc2Vzc2lvbkRlbGV0ZVwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvbkRlbGV0ZVJlcXVlc3QoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uUmVxdWVzdFwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvblJlcXVlc3Qoe3RvcGljOmUscGF5bG9hZDpzLGF0dGVzdGF0aW9uOmksZW5jcnlwdGVkSWQ6cn0pO2Nhc2VcIndjX3Nlc3Npb25FdmVudFwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvbkV2ZW50UmVxdWVzdChlLHMpO2Nhc2VcIndjX3Nlc3Npb25BdXRoZW50aWNhdGVcIjpyZXR1cm4gYXdhaXQgdGhpcy5vblNlc3Npb25BdXRoZW50aWNhdGVSZXF1ZXN0KHt0b3BpYzplLHBheWxvYWQ6cyxhdHRlc3RhdGlvbjppLGVuY3J5cHRlZElkOnJ9KTtkZWZhdWx0OnJldHVybiB0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyhgVW5zdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2QgJHtvfWApfX0sdGhpcy5vblJlbGF5RXZlbnRSZXNwb25zZT1hc3luYyB0PT57Y29uc3R7dG9waWM6ZSxwYXlsb2FkOnN9PXQsaT0oYXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LmdldChlLHMuaWQpKS5yZXF1ZXN0Lm1ldGhvZDtzd2l0Y2goaSl7Y2FzZVwid2Nfc2Vzc2lvblByb3Bvc2VcIjpyZXR1cm4gdGhpcy5vblNlc3Npb25Qcm9wb3NlUmVzcG9uc2UoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uU2V0dGxlXCI6cmV0dXJuIHRoaXMub25TZXNzaW9uU2V0dGxlUmVzcG9uc2UoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uVXBkYXRlXCI6cmV0dXJuIHRoaXMub25TZXNzaW9uVXBkYXRlUmVzcG9uc2UoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uRXh0ZW5kXCI6cmV0dXJuIHRoaXMub25TZXNzaW9uRXh0ZW5kUmVzcG9uc2UoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uUGluZ1wiOnJldHVybiB0aGlzLm9uU2Vzc2lvblBpbmdSZXNwb25zZShlLHMpO2Nhc2VcIndjX3Nlc3Npb25SZXF1ZXN0XCI6cmV0dXJuIHRoaXMub25TZXNzaW9uUmVxdWVzdFJlc3BvbnNlKGUscyk7Y2FzZVwid2Nfc2Vzc2lvbkF1dGhlbnRpY2F0ZVwiOnJldHVybiB0aGlzLm9uU2Vzc2lvbkF1dGhlbnRpY2F0ZVJlc3BvbnNlKGUscyk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYFVuc3VwcG9ydGVkIHJlc3BvbnNlIG1ldGhvZCAke2l9YCl9fSx0aGlzLm9uUmVsYXlFdmVudFVua25vd25QYXlsb2FkPXQ9Pntjb25zdHt0b3BpYzplfT10LHttZXNzYWdlOnN9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgRGVjb2RlZCBwYXlsb2FkIG9uIHRvcGljICR7ZX0gaXMgbm90IGlkZW50aWZpYWJsZSBhcyBhIEpTT04tUlBDIHJlcXVlc3Qgb3IgYSByZXNwb25zZS5gKTt0aHJvdyBuZXcgRXJyb3Iocyl9LHRoaXMuc2hvdWxkSWdub3JlUGFpcmluZ1JlcXVlc3Q9dD0+e2NvbnN0e3RvcGljOmUscmVxdWVzdE1ldGhvZDpzfT10LGk9dGhpcy5leHBlY3RlZFBhaXJpbmdNZXRob2RNYXAuZ2V0KGUpO3JldHVybiFpfHxpLmluY2x1ZGVzKHMpPyExOiEhKGkuaW5jbHVkZXMoXCJ3Y19zZXNzaW9uQXV0aGVudGljYXRlXCIpJiZ0aGlzLmNsaWVudC5ldmVudHMubGlzdGVuZXJDb3VudChcInNlc3Npb25fYXV0aGVudGljYXRlXCIpPjApfSx0aGlzLm9uU2Vzc2lvblByb3Bvc2VSZXF1ZXN0PWFzeW5jIHQ9Pntjb25zdHt0b3BpYzplLHBheWxvYWQ6cyxhdHRlc3RhdGlvbjppLGVuY3J5cHRlZElkOnJ9PXQse3BhcmFtczpvLGlkOmF9PXM7dHJ5e2NvbnN0IGM9dGhpcy5jbGllbnQuY29yZS5ldmVudENsaWVudC5nZXRFdmVudCh7dG9waWM6ZX0pO3RoaXMuaXNWYWxpZENvbm5lY3QoRSh7fSxzLnBhcmFtcykpO2NvbnN0IGg9by5leHBpcnlUaW1lc3RhbXB8fFQoUy53Y19zZXNzaW9uUHJvcG9zZS5yZXEudHRsKSxsPUUoe2lkOmEscGFpcmluZ1RvcGljOmUsZXhwaXJ5VGltZXN0YW1wOmh9LG8pO2F3YWl0IHRoaXMuc2V0UHJvcG9zYWwoYSxsKTtjb25zdCBnPWF3YWl0IHRoaXMuZ2V0VmVyaWZ5Q29udGV4dCh7YXR0ZXN0YXRpb25JZDppLGhhc2g6WShKU09OLnN0cmluZ2lmeShzKSksZW5jcnlwdGVkSWQ6cixtZXRhZGF0YTpsLnByb3Bvc2VyLm1ldGFkYXRhfSk7dGhpcy5jbGllbnQuZXZlbnRzLmxpc3RlbmVyQ291bnQoXCJzZXNzaW9uX3Byb3Bvc2FsXCIpPT09MCYmKGNvbnNvbGUud2FybihcIk5vIGxpc3RlbmVyIGZvciBzZXNzaW9uX3Byb3Bvc2FsIGV2ZW50XCIpLGM/LnNldEVycm9yKGF0LnByb3Bvc2FsX2xpc3RlbmVyX25vdF9mb3VuZCkpLGM/LmFkZFRyYWNlKGN0LmVtaXRfc2Vzc2lvbl9wcm9wb3NhbCksdGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3Byb3Bvc2FsXCIse2lkOmEscGFyYW1zOmwsdmVyaWZ5Q29udGV4dDpnfSl9Y2F0Y2goYyl7YXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOmEsdG9waWM6ZSxlcnJvcjpjLHJwY09wdHM6Uy53Y19zZXNzaW9uUHJvcG9zZS5hdXRvUmVqZWN0fSksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGMpfX0sdGhpcy5vblNlc3Npb25Qcm9wb3NlUmVzcG9uc2U9YXN5bmModCxlKT0+e2NvbnN0e2lkOnN9PWU7aWYoTChlKSl7Y29uc3R7cmVzdWx0Oml9PWU7dGhpcy5jbGllbnQubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwib25TZXNzaW9uUHJvcG9zZVJlc3BvbnNlXCIscmVzdWx0Oml9KTtjb25zdCByPXRoaXMuY2xpZW50LnByb3Bvc2FsLmdldChzKTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixwcm9wb3NhbDpyfSk7Y29uc3Qgbz1yLnByb3Bvc2VyLnB1YmxpY0tleTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixzZWxmUHVibGljS2V5Om99KTtjb25zdCBhPWkucmVzcG9uZGVyUHVibGljS2V5O3RoaXMuY2xpZW50LmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcIm9uU2Vzc2lvblByb3Bvc2VSZXNwb25zZVwiLHBlZXJQdWJsaWNLZXk6YX0pO2NvbnN0IGM9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZ2VuZXJhdGVTaGFyZWRLZXkobyxhKTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixzZXNzaW9uVG9waWM6Y30pO2NvbnN0IGg9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5yZWxheWVyLnN1YnNjcmliZShjKTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixzdWJzY3JpcHRpb25JZDpofSksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmFjdGl2YXRlKHt0b3BpYzp0fSl9ZWxzZSBpZigkKGUpKXthd2FpdCB0aGlzLmNsaWVudC5wcm9wb3NhbC5kZWxldGUocyxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpO2NvbnN0IGk9dyhcInNlc3Npb25fY29ubmVjdFwiKTtpZih0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KGkpPT09MCl0aHJvdyBuZXcgRXJyb3IoYGVtaXR0aW5nICR7aX0gd2l0aG91dCBhbnkgbGlzdGVuZXJzLCA5NTRgKTt0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX2Nvbm5lY3RcIikse2Vycm9yOmUuZXJyb3J9KX19LHRoaXMub25TZXNzaW9uU2V0dGxlUmVxdWVzdD1hc3luYyh0LGUpPT57Y29uc3R7aWQ6cyxwYXJhbXM6aX09ZTt0cnl7dGhpcy5pc1ZhbGlkU2Vzc2lvblNldHRsZVJlcXVlc3QoaSk7Y29uc3R7cmVsYXk6cixjb250cm9sbGVyOm8sZXhwaXJ5OmEsbmFtZXNwYWNlczpjLHNlc3Npb25Qcm9wZXJ0aWVzOmgsc2Vzc2lvbkNvbmZpZzpsfT1lLnBhcmFtcyxnPUUoRSh7dG9waWM6dCxyZWxheTpyLGV4cGlyeTphLG5hbWVzcGFjZXM6YyxhY2tub3dsZWRnZWQ6ITAscGFpcmluZ1RvcGljOlwiXCIscmVxdWlyZWROYW1lc3BhY2VzOnt9LG9wdGlvbmFsTmFtZXNwYWNlczp7fSxjb250cm9sbGVyOm8ucHVibGljS2V5LHNlbGY6e3B1YmxpY0tleTpcIlwiLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSxwZWVyOntwdWJsaWNLZXk6by5wdWJsaWNLZXksbWV0YWRhdGE6by5tZXRhZGF0YX19LGgmJntzZXNzaW9uUHJvcGVydGllczpofSksbCYme3Nlc3Npb25Db25maWc6bH0pLGQ9dyhcInNlc3Npb25fY29ubmVjdFwiKTtpZih0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KGQpPT09MCl0aHJvdyBuZXcgRXJyb3IoYGVtaXR0aW5nICR7ZH0gd2l0aG91dCBhbnkgbGlzdGVuZXJzIDk5N2ApO3RoaXMuZXZlbnRzLmVtaXQodyhcInNlc3Npb25fY29ubmVjdFwiKSx7c2Vzc2lvbjpnfSksYXdhaXQgdGhpcy5zZW5kUmVzdWx0KHtpZDplLmlkLHRvcGljOnQscmVzdWx0OiEwLHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSl9Y2F0Y2gocil7YXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOnMsdG9waWM6dCxlcnJvcjpyfSksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKHIpfX0sdGhpcy5vblNlc3Npb25TZXR0bGVSZXNwb25zZT1hc3luYyh0LGUpPT57Y29uc3R7aWQ6c309ZTtMKGUpPyhhd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLnVwZGF0ZSh0LHthY2tub3dsZWRnZWQ6ITB9KSx0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX2FwcHJvdmVcIixzKSx7fSkpOiQoZSkmJihhd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLmRlbGV0ZSh0LE4oXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSksdGhpcy5ldmVudHMuZW1pdCh3KFwic2Vzc2lvbl9hcHByb3ZlXCIscykse2Vycm9yOmUuZXJyb3J9KSl9LHRoaXMub25TZXNzaW9uVXBkYXRlUmVxdWVzdD1hc3luYyh0LGUpPT57Y29uc3R7cGFyYW1zOnMsaWQ6aX09ZTt0cnl7Y29uc3Qgcj1gJHt0fV9zZXNzaW9uX3VwZGF0ZWAsbz1lZS5nZXQocik7aWYobyYmdGhpcy5pc1JlcXVlc3RPdXRPZlN5bmMobyxpKSl7dGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYERpc2NhcmRpbmcgb3V0IG9mIHN5bmMgcmVxdWVzdCAtICR7aX1gKSx0aGlzLnNlbmRFcnJvcih7aWQ6aSx0b3BpYzp0LGVycm9yOk4oXCJJTlZBTElEX1VQREFURV9SRVFVRVNUXCIpfSk7cmV0dXJufXRoaXMuaXNWYWxpZFVwZGF0ZShFKHt0b3BpYzp0fSxzKSk7dHJ5e2VlLnNldChyLGkpLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKHQse25hbWVzcGFjZXM6cy5uYW1lc3BhY2VzfSksYXdhaXQgdGhpcy5zZW5kUmVzdWx0KHtpZDppLHRvcGljOnQscmVzdWx0OiEwLHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSl9Y2F0Y2goYSl7dGhyb3cgZWUuZGVsZXRlKHIpLGF9dGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3VwZGF0ZVwiLHtpZDppLHRvcGljOnQscGFyYW1zOnN9KX1jYXRjaChyKXthd2FpdCB0aGlzLnNlbmRFcnJvcih7aWQ6aSx0b3BpYzp0LGVycm9yOnJ9KSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3Iocil9fSx0aGlzLmlzUmVxdWVzdE91dE9mU3luYz0odCxlKT0+cGFyc2VJbnQoZS50b1N0cmluZygpLnNsaWNlKDAsLTMpKTw9cGFyc2VJbnQodC50b1N0cmluZygpLnNsaWNlKDAsLTMpKSx0aGlzLm9uU2Vzc2lvblVwZGF0ZVJlc3BvbnNlPSh0LGUpPT57Y29uc3R7aWQ6c309ZSxpPXcoXCJzZXNzaW9uX3VwZGF0ZVwiLHMpO2lmKHRoaXMuZXZlbnRzLmxpc3RlbmVyQ291bnQoaSk9PT0wKXRocm93IG5ldyBFcnJvcihgZW1pdHRpbmcgJHtpfSB3aXRob3V0IGFueSBsaXN0ZW5lcnNgKTtMKGUpP3RoaXMuZXZlbnRzLmVtaXQodyhcInNlc3Npb25fdXBkYXRlXCIscykse30pOiQoZSkmJnRoaXMuZXZlbnRzLmVtaXQodyhcInNlc3Npb25fdXBkYXRlXCIscykse2Vycm9yOmUuZXJyb3J9KX0sdGhpcy5vblNlc3Npb25FeHRlbmRSZXF1ZXN0PWFzeW5jKHQsZSk9Pntjb25zdHtpZDpzfT1lO3RyeXt0aGlzLmlzVmFsaWRFeHRlbmQoe3RvcGljOnR9KSxhd2FpdCB0aGlzLnNldEV4cGlyeSh0LFQoaykpLGF3YWl0IHRoaXMuc2VuZFJlc3VsdCh7aWQ6cyx0b3BpYzp0LHJlc3VsdDohMCx0aHJvd09uRmFpbGVkUHVibGlzaDohMH0pLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9leHRlbmRcIix7aWQ6cyx0b3BpYzp0fSl9Y2F0Y2goaSl7YXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOnMsdG9waWM6dCxlcnJvcjppfSksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGkpfX0sdGhpcy5vblNlc3Npb25FeHRlbmRSZXNwb25zZT0odCxlKT0+e2NvbnN0e2lkOnN9PWUsaT13KFwic2Vzc2lvbl9leHRlbmRcIixzKTtpZih0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KGkpPT09MCl0aHJvdyBuZXcgRXJyb3IoYGVtaXR0aW5nICR7aX0gd2l0aG91dCBhbnkgbGlzdGVuZXJzYCk7TChlKT90aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX2V4dGVuZFwiLHMpLHt9KTokKGUpJiZ0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX2V4dGVuZFwiLHMpLHtlcnJvcjplLmVycm9yfSl9LHRoaXMub25TZXNzaW9uUGluZ1JlcXVlc3Q9YXN5bmModCxlKT0+e2NvbnN0e2lkOnN9PWU7dHJ5e3RoaXMuaXNWYWxpZFBpbmcoe3RvcGljOnR9KSxhd2FpdCB0aGlzLnNlbmRSZXN1bHQoe2lkOnMsdG9waWM6dCxyZXN1bHQ6ITAsdGhyb3dPbkZhaWxlZFB1Ymxpc2g6ITB9KSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInNlc3Npb25fcGluZ1wiLHtpZDpzLHRvcGljOnR9KX1jYXRjaChpKXthd2FpdCB0aGlzLnNlbmRFcnJvcih7aWQ6cyx0b3BpYzp0LGVycm9yOml9KSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoaSl9fSx0aGlzLm9uU2Vzc2lvblBpbmdSZXNwb25zZT0odCxlKT0+e2NvbnN0e2lkOnN9PWUsaT13KFwic2Vzc2lvbl9waW5nXCIscyk7aWYodGhpcy5ldmVudHMubGlzdGVuZXJDb3VudChpKT09PTApdGhyb3cgbmV3IEVycm9yKGBlbWl0dGluZyAke2l9IHdpdGhvdXQgYW55IGxpc3RlbmVyc2ApO3NldFRpbWVvdXQoKCk9PntMKGUpP3RoaXMuZXZlbnRzLmVtaXQodyhcInNlc3Npb25fcGluZ1wiLHMpLHt9KTokKGUpJiZ0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX3BpbmdcIixzKSx7ZXJyb3I6ZS5lcnJvcn0pfSw1MDApfSx0aGlzLm9uU2Vzc2lvbkRlbGV0ZVJlcXVlc3Q9YXN5bmModCxlKT0+e2NvbnN0e2lkOnN9PWU7dHJ5e3RoaXMuaXNWYWxpZERpc2Nvbm5lY3Qoe3RvcGljOnQscmVhc29uOmUucGFyYW1zfSksYXdhaXQgUHJvbWlzZS5hbGwoW25ldyBQcm9taXNlKGk9Pnt0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIub25jZShBZS5wdWJsaXNoLGFzeW5jKCk9PntpKGF3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6dCxpZDpzfSkpfSl9KSx0aGlzLnNlbmRSZXN1bHQoe2lkOnMsdG9waWM6dCxyZXN1bHQ6ITAsdGhyb3dPbkZhaWxlZFB1Ymxpc2g6ITB9KSx0aGlzLmNsZWFudXBQZW5kaW5nU2VudFJlcXVlc3RzRm9yVG9waWMoe3RvcGljOnQsZXJyb3I6TihcIlVTRVJfRElTQ09OTkVDVEVEXCIpfSldKX1jYXRjaChpKXt0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoaSl9fSx0aGlzLm9uU2Vzc2lvblJlcXVlc3Q9YXN5bmMgdD0+e3ZhciBlO2NvbnN0e3RvcGljOnMscGF5bG9hZDppLGF0dGVzdGF0aW9uOnIsZW5jcnlwdGVkSWQ6b309dCx7aWQ6YSxwYXJhbXM6Y309aTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkUmVxdWVzdChFKHt0b3BpYzpzfSxjKSk7Y29uc3QgaD10aGlzLmNsaWVudC5zZXNzaW9uLmdldChzKSxsPWF3YWl0IHRoaXMuZ2V0VmVyaWZ5Q29udGV4dCh7YXR0ZXN0YXRpb25JZDpyLGhhc2g6WShKU09OLnN0cmluZ2lmeShmZShcIndjX3Nlc3Npb25SZXF1ZXN0XCIsYyxhKSkpLGVuY3J5cHRlZElkOm8sbWV0YWRhdGE6aC5wZWVyLm1ldGFkYXRhfSksZz17aWQ6YSx0b3BpYzpzLHBhcmFtczpjLHZlcmlmeUNvbnRleHQ6bH07YXdhaXQgdGhpcy5zZXRQZW5kaW5nU2Vzc2lvblJlcXVlc3QoZyksKGU9dGhpcy5jbGllbnQuc2lnbkNvbmZpZykhPW51bGwmJmUuZGlzYWJsZVJlcXVlc3RRdWV1ZT90aGlzLmVtaXRTZXNzaW9uUmVxdWVzdChnKToodGhpcy5hZGRTZXNzaW9uUmVxdWVzdFRvU2Vzc2lvblJlcXVlc3RRdWV1ZShnKSx0aGlzLnByb2Nlc3NTZXNzaW9uUmVxdWVzdFF1ZXVlKCkpfWNhdGNoKGgpe2F3YWl0IHRoaXMuc2VuZEVycm9yKHtpZDphLHRvcGljOnMsZXJyb3I6aH0pLHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihoKX19LHRoaXMub25TZXNzaW9uUmVxdWVzdFJlc3BvbnNlPSh0LGUpPT57Y29uc3R7aWQ6c309ZSxpPXcoXCJzZXNzaW9uX3JlcXVlc3RcIixzKTtpZih0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KGkpPT09MCl0aHJvdyBuZXcgRXJyb3IoYGVtaXR0aW5nICR7aX0gd2l0aG91dCBhbnkgbGlzdGVuZXJzYCk7TChlKT90aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX3JlcXVlc3RcIixzKSx7cmVzdWx0OmUucmVzdWx0fSk6JChlKSYmdGhpcy5ldmVudHMuZW1pdCh3KFwic2Vzc2lvbl9yZXF1ZXN0XCIscykse2Vycm9yOmUuZXJyb3J9KX0sdGhpcy5vblNlc3Npb25FdmVudFJlcXVlc3Q9YXN5bmModCxlKT0+e2NvbnN0e2lkOnMscGFyYW1zOml9PWU7dHJ5e2NvbnN0IHI9YCR7dH1fc2Vzc2lvbl9ldmVudF8ke2kuZXZlbnQubmFtZX1gLG89ZWUuZ2V0KHIpO2lmKG8mJnRoaXMuaXNSZXF1ZXN0T3V0T2ZTeW5jKG8scykpe3RoaXMuY2xpZW50LmxvZ2dlci5pbmZvKGBEaXNjYXJkaW5nIG91dCBvZiBzeW5jIHJlcXVlc3QgLSAke3N9YCk7cmV0dXJufXRoaXMuaXNWYWxpZEVtaXQoRSh7dG9waWM6dH0saSkpLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9ldmVudFwiLHtpZDpzLHRvcGljOnQscGFyYW1zOml9KSxlZS5zZXQocixzKX1jYXRjaChyKXthd2FpdCB0aGlzLnNlbmRFcnJvcih7aWQ6cyx0b3BpYzp0LGVycm9yOnJ9KSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3Iocil9fSx0aGlzLm9uU2Vzc2lvbkF1dGhlbnRpY2F0ZVJlc3BvbnNlPSh0LGUpPT57Y29uc3R7aWQ6c309ZTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25BdXRoZW50aWNhdGVSZXNwb25zZVwiLHRvcGljOnQscGF5bG9hZDplfSksTChlKT90aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX3JlcXVlc3RcIixzKSx7cmVzdWx0OmUucmVzdWx0fSk6JChlKSYmdGhpcy5ldmVudHMuZW1pdCh3KFwic2Vzc2lvbl9yZXF1ZXN0XCIscykse2Vycm9yOmUuZXJyb3J9KX0sdGhpcy5vblNlc3Npb25BdXRoZW50aWNhdGVSZXF1ZXN0PWFzeW5jIHQ9Pntjb25zdHt0b3BpYzplLHBheWxvYWQ6cyxhdHRlc3RhdGlvbjppLGVuY3J5cHRlZElkOnJ9PXQ7dHJ5e2NvbnN0e3JlcXVlc3RlcjpvLGF1dGhQYXlsb2FkOmEsZXhwaXJ5VGltZXN0YW1wOmN9PXMucGFyYW1zLGg9YXdhaXQgdGhpcy5nZXRWZXJpZnlDb250ZXh0KHthdHRlc3RhdGlvbklkOmksaGFzaDpZKEpTT04uc3RyaW5naWZ5KHMpKSxlbmNyeXB0ZWRJZDpyLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSksbD17cmVxdWVzdGVyOm8scGFpcmluZ1RvcGljOmUsaWQ6cy5pZCxhdXRoUGF5bG9hZDphLHZlcmlmeUNvbnRleHQ6aCxleHBpcnlUaW1lc3RhbXA6Y307YXdhaXQgdGhpcy5zZXRBdXRoUmVxdWVzdChzLmlkLHtyZXF1ZXN0OmwscGFpcmluZ1RvcGljOmV9KSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInNlc3Npb25fYXV0aGVudGljYXRlXCIse3RvcGljOmUscGFyYW1zOnMucGFyYW1zLGlkOnMuaWQsdmVyaWZ5Q29udGV4dDpofSl9Y2F0Y2gobyl7dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKG8pO2NvbnN0IGE9cy5wYXJhbXMucmVxdWVzdGVyLnB1YmxpY0tleSxjPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmdlbmVyYXRlS2V5UGFpcigpLGg9e3R5cGU6SWUscmVjZWl2ZXJQdWJsaWNLZXk6YSxzZW5kZXJQdWJsaWNLZXk6Y307YXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOnMuaWQsdG9waWM6ZSxlcnJvcjpvLGVuY29kZU9wdHM6aCxycGNPcHRzOlMud2Nfc2Vzc2lvbkF1dGhlbnRpY2F0ZS5hdXRvUmVqZWN0fSl9fSx0aGlzLmFkZFNlc3Npb25SZXF1ZXN0VG9TZXNzaW9uUmVxdWVzdFF1ZXVlPXQ9Pnt0aGlzLnNlc3Npb25SZXF1ZXN0UXVldWUucXVldWUucHVzaCh0KX0sdGhpcy5jbGVhbnVwQWZ0ZXJSZXNwb25zZT10PT57dGhpcy5kZWxldGVQZW5kaW5nU2Vzc2lvblJlcXVlc3QodC5yZXNwb25zZS5pZCx7bWVzc2FnZTpcImZ1bGZpbGxlZFwiLGNvZGU6MH0pLHNldFRpbWVvdXQoKCk9Pnt0aGlzLnNlc3Npb25SZXF1ZXN0UXVldWUuc3RhdGU9eC5pZGxlLHRoaXMucHJvY2Vzc1Nlc3Npb25SZXF1ZXN0UXVldWUoKX0samUodGhpcy5yZXF1ZXN0UXVldWVEZWxheSkpfSx0aGlzLmNsZWFudXBQZW5kaW5nU2VudFJlcXVlc3RzRm9yVG9waWM9KHt0b3BpYzp0LGVycm9yOmV9KT0+e2NvbnN0IHM9dGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnBlbmRpbmc7cy5sZW5ndGg+MCYmcy5maWx0ZXIoaT0+aS50b3BpYz09PXQmJmkucmVxdWVzdC5tZXRob2Q9PT1cIndjX3Nlc3Npb25SZXF1ZXN0XCIpLmZvckVhY2goaT0+e2NvbnN0IHI9aS5yZXF1ZXN0LmlkLG89dyhcInNlc3Npb25fcmVxdWVzdFwiLHIpO2lmKHRoaXMuZXZlbnRzLmxpc3RlbmVyQ291bnQobyk9PT0wKXRocm93IG5ldyBFcnJvcihgZW1pdHRpbmcgJHtvfSB3aXRob3V0IGFueSBsaXN0ZW5lcnNgKTt0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX3JlcXVlc3RcIixpLnJlcXVlc3QuaWQpLHtlcnJvcjplfSl9KX0sdGhpcy5wcm9jZXNzU2Vzc2lvblJlcXVlc3RRdWV1ZT0oKT0+e2lmKHRoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZS5zdGF0ZT09PXguYWN0aXZlKXt0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyhcInNlc3Npb24gcmVxdWVzdCBxdWV1ZSBpcyBhbHJlYWR5IGFjdGl2ZS5cIik7cmV0dXJufWNvbnN0IHQ9dGhpcy5zZXNzaW9uUmVxdWVzdFF1ZXVlLnF1ZXVlWzBdO2lmKCF0KXt0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyhcInNlc3Npb24gcmVxdWVzdCBxdWV1ZSBpcyBlbXB0eS5cIik7cmV0dXJufXRyeXt0aGlzLnNlc3Npb25SZXF1ZXN0UXVldWUuc3RhdGU9eC5hY3RpdmUsdGhpcy5lbWl0U2Vzc2lvblJlcXVlc3QodCl9Y2F0Y2goZSl7dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGUpfX0sdGhpcy5lbWl0U2Vzc2lvblJlcXVlc3Q9dD0+e3RoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9yZXF1ZXN0XCIsdCl9LHRoaXMub25QYWlyaW5nQ3JlYXRlZD10PT57aWYodC5tZXRob2RzJiZ0aGlzLmV4cGVjdGVkUGFpcmluZ01ldGhvZE1hcC5zZXQodC50b3BpYyx0Lm1ldGhvZHMpLHQuYWN0aXZlKXJldHVybjtjb25zdCBlPXRoaXMuY2xpZW50LnByb3Bvc2FsLmdldEFsbCgpLmZpbmQocz0+cy5wYWlyaW5nVG9waWM9PT10LnRvcGljKTtlJiZ0aGlzLm9uU2Vzc2lvblByb3Bvc2VSZXF1ZXN0KHt0b3BpYzp0LnRvcGljLHBheWxvYWQ6ZmUoXCJ3Y19zZXNzaW9uUHJvcG9zZVwiLHtyZXF1aXJlZE5hbWVzcGFjZXM6ZS5yZXF1aXJlZE5hbWVzcGFjZXMsb3B0aW9uYWxOYW1lc3BhY2VzOmUub3B0aW9uYWxOYW1lc3BhY2VzLHJlbGF5czplLnJlbGF5cyxwcm9wb3NlcjplLnByb3Bvc2VyLHNlc3Npb25Qcm9wZXJ0aWVzOmUuc2Vzc2lvblByb3BlcnRpZXN9LGUuaWQpfSl9LHRoaXMuaXNWYWxpZENvbm5lY3Q9YXN5bmMgdD0+e2lmKCFiKHQpKXtjb25zdHttZXNzYWdlOmF9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgY29ubmVjdCgpIHBhcmFtczogJHtKU09OLnN0cmluZ2lmeSh0KX1gKTt0aHJvdyBuZXcgRXJyb3IoYSl9Y29uc3R7cGFpcmluZ1RvcGljOmUscmVxdWlyZWROYW1lc3BhY2VzOnMsb3B0aW9uYWxOYW1lc3BhY2VzOmksc2Vzc2lvblByb3BlcnRpZXM6cixyZWxheXM6b309dDtpZih0ZShlKXx8YXdhaXQgdGhpcy5pc1ZhbGlkUGFpcmluZ1RvcGljKGUpLCFxdChvLCEwKSl7Y29uc3R7bWVzc2FnZTphfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGNvbm5lY3QoKSByZWxheXM6ICR7b31gKTt0aHJvdyBuZXcgRXJyb3IoYSl9IXRlKHMpJiYkZShzKSE9PTAmJnRoaXMudmFsaWRhdGVOYW1lc3BhY2VzKHMsXCJyZXF1aXJlZE5hbWVzcGFjZXNcIiksIXRlKGkpJiYkZShpKSE9PTAmJnRoaXMudmFsaWRhdGVOYW1lc3BhY2VzKGksXCJvcHRpb25hbE5hbWVzcGFjZXNcIiksdGUocil8fHRoaXMudmFsaWRhdGVTZXNzaW9uUHJvcHMocixcInNlc3Npb25Qcm9wZXJ0aWVzXCIpfSx0aGlzLnZhbGlkYXRlTmFtZXNwYWNlcz0odCxlKT0+e2NvbnN0IHM9dnQodCxcImNvbm5lY3QoKVwiLGUpO2lmKHMpdGhyb3cgbmV3IEVycm9yKHMubWVzc2FnZSl9LHRoaXMuaXNWYWxpZEFwcHJvdmU9YXN5bmMgdD0+e2lmKCFiKHQpKXRocm93IG5ldyBFcnJvcihwKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGFwcHJvdmUoKSBwYXJhbXM6ICR7dH1gKS5tZXNzYWdlKTtjb25zdHtpZDplLG5hbWVzcGFjZXM6cyxyZWxheVByb3RvY29sOmksc2Vzc2lvblByb3BlcnRpZXM6cn09dDt0aGlzLmNoZWNrUmVjZW50bHlEZWxldGVkKGUpLGF3YWl0IHRoaXMuaXNWYWxpZFByb3Bvc2FsSWQoZSk7Y29uc3Qgbz10aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQoZSksYT1TZShzLFwiYXBwcm92ZSgpXCIpO2lmKGEpdGhyb3cgbmV3IEVycm9yKGEubWVzc2FnZSk7Y29uc3QgYz1LZShvLnJlcXVpcmVkTmFtZXNwYWNlcyxzLFwiYXBwcm92ZSgpXCIpO2lmKGMpdGhyb3cgbmV3IEVycm9yKGMubWVzc2FnZSk7aWYoIVYoaSwhMCkpe2NvbnN0e21lc3NhZ2U6aH09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBhcHByb3ZlKCkgcmVsYXlQcm90b2NvbDogJHtpfWApO3Rocm93IG5ldyBFcnJvcihoKX10ZShyKXx8dGhpcy52YWxpZGF0ZVNlc3Npb25Qcm9wcyhyLFwic2Vzc2lvblByb3BlcnRpZXNcIil9LHRoaXMuaXNWYWxpZFJlamVjdD1hc3luYyB0PT57aWYoIWIodCkpe2NvbnN0e21lc3NhZ2U6aX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZWplY3QoKSBwYXJhbXM6ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3IoaSl9Y29uc3R7aWQ6ZSxyZWFzb246c309dDtpZih0aGlzLmNoZWNrUmVjZW50bHlEZWxldGVkKGUpLGF3YWl0IHRoaXMuaXNWYWxpZFByb3Bvc2FsSWQoZSksIU50KHMpKXtjb25zdHttZXNzYWdlOml9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcmVqZWN0KCkgcmVhc29uOiAke0pTT04uc3RyaW5naWZ5KHMpfWApO3Rocm93IG5ldyBFcnJvcihpKX19LHRoaXMuaXNWYWxpZFNlc3Npb25TZXR0bGVSZXF1ZXN0PXQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTpjfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYG9uU2Vzc2lvblNldHRsZVJlcXVlc3QoKSBwYXJhbXM6ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3IoYyl9Y29uc3R7cmVsYXk6ZSxjb250cm9sbGVyOnMsbmFtZXNwYWNlczppLGV4cGlyeTpyfT10O2lmKCFQdChlKSl7Y29uc3R7bWVzc2FnZTpjfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KCkgcmVsYXkgcHJvdG9jb2wgc2hvdWxkIGJlIGEgc3RyaW5nXCIpO3Rocm93IG5ldyBFcnJvcihjKX1jb25zdCBvPVR0KHMsXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KClcIik7aWYobyl0aHJvdyBuZXcgRXJyb3Ioby5tZXNzYWdlKTtjb25zdCBhPVNlKGksXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KClcIik7aWYoYSl0aHJvdyBuZXcgRXJyb3IoYS5tZXNzYWdlKTtpZihYKHIpKXtjb25zdHttZXNzYWdlOmN9PXAoXCJFWFBJUkVEXCIsXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KClcIik7dGhyb3cgbmV3IEVycm9yKGMpfX0sdGhpcy5pc1ZhbGlkVXBkYXRlPWFzeW5jIHQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTphfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHVwZGF0ZSgpIHBhcmFtczogJHt0fWApO3Rocm93IG5ldyBFcnJvcihhKX1jb25zdHt0b3BpYzplLG5hbWVzcGFjZXM6c309dDt0aGlzLmNoZWNrUmVjZW50bHlEZWxldGVkKGUpLGF3YWl0IHRoaXMuaXNWYWxpZFNlc3Npb25Ub3BpYyhlKTtjb25zdCBpPXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KGUpLHI9U2UocyxcInVwZGF0ZSgpXCIpO2lmKHIpdGhyb3cgbmV3IEVycm9yKHIubWVzc2FnZSk7Y29uc3Qgbz1LZShpLnJlcXVpcmVkTmFtZXNwYWNlcyxzLFwidXBkYXRlKClcIik7aWYobyl0aHJvdyBuZXcgRXJyb3Ioby5tZXNzYWdlKX0sdGhpcy5pc1ZhbGlkRXh0ZW5kPWFzeW5jIHQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTpzfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGV4dGVuZCgpIHBhcmFtczogJHt0fWApO3Rocm93IG5ldyBFcnJvcihzKX1jb25zdHt0b3BpYzplfT10O3RoaXMuY2hlY2tSZWNlbnRseURlbGV0ZWQoZSksYXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvblRvcGljKGUpfSx0aGlzLmlzVmFsaWRSZXF1ZXN0PWFzeW5jIHQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTphfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHJlcXVlc3QoKSBwYXJhbXM6ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3IoYSl9Y29uc3R7dG9waWM6ZSxyZXF1ZXN0OnMsY2hhaW5JZDppLGV4cGlyeTpyfT10O3RoaXMuY2hlY2tSZWNlbnRseURlbGV0ZWQoZSksYXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvblRvcGljKGUpO2NvbnN0e25hbWVzcGFjZXM6b309dGhpcy5jbGllbnQuc2Vzc2lvbi5nZXQoZSk7aWYoIVVlKG8saSkpe2NvbnN0e21lc3NhZ2U6YX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgY2hhaW5JZDogJHtpfWApO3Rocm93IG5ldyBFcnJvcihhKX1pZighT3Qocykpe2NvbnN0e21lc3NhZ2U6YX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgJHtKU09OLnN0cmluZ2lmeShzKX1gKTt0aHJvdyBuZXcgRXJyb3IoYSl9aWYoIUF0KG8saSxzLm1ldGhvZCkpe2NvbnN0e21lc3NhZ2U6YX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgbWV0aG9kOiAke3MubWV0aG9kfWApO3Rocm93IG5ldyBFcnJvcihhKX1pZihyJiYhQ3QocixoZSkpe2NvbnN0e21lc3NhZ2U6YX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgZXhwaXJ5OiAke3J9LiBFeHBpcnkgbXVzdCBiZSBhIG51bWJlciAoaW4gc2Vjb25kcykgYmV0d2VlbiAke2hlLm1pbn0gYW5kICR7aGUubWF4fWApO3Rocm93IG5ldyBFcnJvcihhKX19LHRoaXMuaXNWYWxpZFJlc3BvbmQ9YXN5bmMgdD0+e3ZhciBlO2lmKCFiKHQpKXtjb25zdHttZXNzYWdlOnJ9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcmVzcG9uZCgpIHBhcmFtczogJHt0fWApO3Rocm93IG5ldyBFcnJvcihyKX1jb25zdHt0b3BpYzpzLHJlc3BvbnNlOml9PXQ7dHJ5e2F3YWl0IHRoaXMuaXNWYWxpZFNlc3Npb25Ub3BpYyhzKX1jYXRjaChyKXt0aHJvdyhlPXQ/LnJlc3BvbnNlKSE9bnVsbCYmZS5pZCYmdGhpcy5jbGVhbnVwQWZ0ZXJSZXNwb25zZSh0KSxyfWlmKCFidChpKSl7Y29uc3R7bWVzc2FnZTpyfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHJlc3BvbmQoKSByZXNwb25zZTogJHtKU09OLnN0cmluZ2lmeShpKX1gKTt0aHJvdyBuZXcgRXJyb3Iocil9fSx0aGlzLmlzVmFsaWRQaW5nPWFzeW5jIHQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTpzfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHBpbmcoKSBwYXJhbXM6ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3Iocyl9Y29uc3R7dG9waWM6ZX09dDthd2FpdCB0aGlzLmlzVmFsaWRTZXNzaW9uT3JQYWlyaW5nVG9waWMoZSl9LHRoaXMuaXNWYWxpZEVtaXQ9YXN5bmMgdD0+e2lmKCFiKHQpKXtjb25zdHttZXNzYWdlOm99PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgZW1pdCgpIHBhcmFtczogJHt0fWApO3Rocm93IG5ldyBFcnJvcihvKX1jb25zdHt0b3BpYzplLGV2ZW50OnMsY2hhaW5JZDppfT10O2F3YWl0IHRoaXMuaXNWYWxpZFNlc3Npb25Ub3BpYyhlKTtjb25zdHtuYW1lc3BhY2VzOnJ9PXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KGUpO2lmKCFVZShyLGkpKXtjb25zdHttZXNzYWdlOm99PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgZW1pdCgpIGNoYWluSWQ6ICR7aX1gKTt0aHJvdyBuZXcgRXJyb3Iobyl9aWYoIXh0KHMpKXtjb25zdHttZXNzYWdlOm99PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgZW1pdCgpIGV2ZW50OiAke0pTT04uc3RyaW5naWZ5KHMpfWApO3Rocm93IG5ldyBFcnJvcihvKX1pZighRHQocixpLHMubmFtZSkpe2NvbnN0e21lc3NhZ2U6b309cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBlbWl0KCkgZXZlbnQ6ICR7SlNPTi5zdHJpbmdpZnkocyl9YCk7dGhyb3cgbmV3IEVycm9yKG8pfX0sdGhpcy5pc1ZhbGlkRGlzY29ubmVjdD1hc3luYyB0PT57aWYoIWIodCkpe2NvbnN0e21lc3NhZ2U6c309cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBkaXNjb25uZWN0KCkgcGFyYW1zOiAke3R9YCk7dGhyb3cgbmV3IEVycm9yKHMpfWNvbnN0e3RvcGljOmV9PXQ7YXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvbk9yUGFpcmluZ1RvcGljKGUpfSx0aGlzLmlzVmFsaWRBdXRoZW50aWNhdGU9dD0+e2NvbnN0e2NoYWluczplLHVyaTpzLGRvbWFpbjppLG5vbmNlOnJ9PXQ7aWYoIUFycmF5LmlzQXJyYXkoZSl8fGUubGVuZ3RoPT09MCl0aHJvdyBuZXcgRXJyb3IoXCJjaGFpbnMgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXlcIik7aWYoIVYocywhMSkpdGhyb3cgbmV3IEVycm9yKFwidXJpIGlzIHJlcXVpcmVkIHBhcmFtZXRlclwiKTtpZighVihpLCExKSl0aHJvdyBuZXcgRXJyb3IoXCJkb21haW4gaXMgcmVxdWlyZWQgcGFyYW1ldGVyXCIpO2lmKCFWKHIsITEpKXRocm93IG5ldyBFcnJvcihcIm5vbmNlIGlzIHJlcXVpcmVkIHBhcmFtZXRlclwiKTtpZihbLi4ubmV3IFNldChlLm1hcChhPT5FZShhKS5uYW1lc3BhY2UpKV0ubGVuZ3RoPjEpdGhyb3cgbmV3IEVycm9yKFwiTXVsdGktbmFtZXNwYWNlIHJlcXVlc3RzIGFyZSBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgcmVxdWVzdCBzaW5nbGUgbmFtZXNwYWNlIG9ubHkuXCIpO2NvbnN0e25hbWVzcGFjZTpvfT1FZShlWzBdKTtpZihvIT09XCJlaXAxNTVcIil0aHJvdyBuZXcgRXJyb3IoXCJPbmx5IGVpcDE1NSBuYW1lc3BhY2UgaXMgc3VwcG9ydGVkIGZvciBhdXRoZW50aWNhdGVkIHNlc3Npb25zLiBQbGVhc2UgdXNlIC5jb25uZWN0KCkgZm9yIG5vbi1laXAxNTUgY2hhaW5zLlwiKX0sdGhpcy5nZXRWZXJpZnlDb250ZXh0PWFzeW5jIHQ9Pntjb25zdHthdHRlc3RhdGlvbklkOmUsaGFzaDpzLGVuY3J5cHRlZElkOmksbWV0YWRhdGE6cn09dCxvPXt2ZXJpZmllZDp7dmVyaWZ5VXJsOnIudmVyaWZ5VXJsfHxsdCx2YWxpZGF0aW9uOlwiVU5LTk9XTlwiLG9yaWdpbjpyLnVybHx8XCJcIn19O3RyeXtjb25zdCBhPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUudmVyaWZ5LnJlc29sdmUoe2F0dGVzdGF0aW9uSWQ6ZSxoYXNoOnMsZW5jcnlwdGVkSWQ6aSx2ZXJpZnlVcmw6ci52ZXJpZnlVcmx9KTthJiYoby52ZXJpZmllZC5vcmlnaW49YS5vcmlnaW4sby52ZXJpZmllZC5pc1NjYW09YS5pc1NjYW0sby52ZXJpZmllZC52YWxpZGF0aW9uPWEub3JpZ2luPT09bmV3IFVSTChyLnVybCkub3JpZ2luP1wiVkFMSURcIjpcIklOVkFMSURcIil9Y2F0Y2goYSl7dGhpcy5jbGllbnQubG9nZ2VyLndhcm4oYSl9cmV0dXJuIHRoaXMuY2xpZW50LmxvZ2dlci5kZWJ1ZyhgVmVyaWZ5IGNvbnRleHQ6ICR7SlNPTi5zdHJpbmdpZnkobyl9YCksb30sdGhpcy52YWxpZGF0ZVNlc3Npb25Qcm9wcz0odCxlKT0+e09iamVjdC52YWx1ZXModCkuZm9yRWFjaChzPT57aWYoIVYocywhMSkpe2NvbnN0e21lc3NhZ2U6aX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGAke2V9IG11c3QgYmUgaW4gUmVjb3JkPHN0cmluZywgc3RyaW5nPiBmb3JtYXQuIFJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KHMpfWApO3Rocm93IG5ldyBFcnJvcihpKX19KX0sdGhpcy5nZXRQZW5kaW5nQXV0aFJlcXVlc3Q9dD0+e2NvbnN0IGU9dGhpcy5jbGllbnQuYXV0aC5yZXF1ZXN0cy5nZXQodCk7cmV0dXJuIHR5cGVvZiBlPT1cIm9iamVjdFwiP2U6dm9pZCAwfSx0aGlzLmFkZFRvUmVjZW50bHlEZWxldGVkPSh0LGUpPT57aWYodGhpcy5yZWNlbnRseURlbGV0ZWRNYXAuc2V0KHQsZSksdGhpcy5yZWNlbnRseURlbGV0ZWRNYXAuc2l6ZT49dGhpcy5yZWNlbnRseURlbGV0ZWRMaW1pdCl7bGV0IHM9MDtjb25zdCBpPXRoaXMucmVjZW50bHlEZWxldGVkTGltaXQvMjtmb3IoY29uc3QgciBvZiB0aGlzLnJlY2VudGx5RGVsZXRlZE1hcC5rZXlzKCkpe2lmKHMrKz49aSlicmVhazt0aGlzLnJlY2VudGx5RGVsZXRlZE1hcC5kZWxldGUocil9fX0sdGhpcy5jaGVja1JlY2VudGx5RGVsZXRlZD10PT57Y29uc3QgZT10aGlzLnJlY2VudGx5RGVsZXRlZE1hcC5nZXQodCk7aWYoZSl7Y29uc3R7bWVzc2FnZTpzfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYFJlY29yZCB3YXMgcmVjZW50bHkgZGVsZXRlZCAtICR7ZX06ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3Iocyl9fX1hc3luYyBpc0luaXRpYWxpemVkKCl7aWYoIXRoaXMuaW5pdGlhbGl6ZWQpe2NvbnN0e21lc3NhZ2U6bn09cChcIk5PVF9JTklUSUFMSVpFRFwiLHRoaXMubmFtZSk7dGhyb3cgbmV3IEVycm9yKG4pfWF3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5jb25maXJtT25saW5lU3RhdGVPclRocm93KCl9cmVnaXN0ZXJSZWxheWVyRXZlbnRzKCl7dGhpcy5jbGllbnQuY29yZS5yZWxheWVyLm9uKEFlLm1lc3NhZ2Usbj0+eyF0aGlzLmluaXRpYWxpemVkfHx0aGlzLnJlbGF5TWVzc2FnZUNhY2hlLmxlbmd0aD4wP3RoaXMucmVsYXlNZXNzYWdlQ2FjaGUucHVzaChuKTp0aGlzLm9uUmVsYXlNZXNzYWdlKG4pfSl9YXN5bmMgb25SZWxheU1lc3NhZ2Uobil7Y29uc3R7dG9waWM6dCxtZXNzYWdlOmUsYXR0ZXN0YXRpb246c309bix7cHVibGljS2V5Oml9PXRoaXMuY2xpZW50LmF1dGguYXV0aEtleXMua2V5cy5pbmNsdWRlcyhpZSk/dGhpcy5jbGllbnQuYXV0aC5hdXRoS2V5cy5nZXQoaWUpOntyZXNwb25zZVRvcGljOnZvaWQgMCxwdWJsaWNLZXk6dm9pZCAwfSxyPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmRlY29kZSh0LGUse3JlY2VpdmVyUHVibGljS2V5Oml9KTt0cnl7RnQocik/KHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5zZXQodCxyKSx0aGlzLm9uUmVsYXlFdmVudFJlcXVlc3Qoe3RvcGljOnQscGF5bG9hZDpyLGF0dGVzdGF0aW9uOnMsZW5jcnlwdGVkSWQ6WShlKX0pKTpRdChyKT8oYXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnJlc29sdmUociksYXdhaXQgdGhpcy5vblJlbGF5RXZlbnRSZXNwb25zZSh7dG9waWM6dCxwYXlsb2FkOnJ9KSx0aGlzLmNsaWVudC5jb3JlLmhpc3RvcnkuZGVsZXRlKHQsci5pZCkpOnRoaXMub25SZWxheUV2ZW50VW5rbm93blBheWxvYWQoe3RvcGljOnQscGF5bG9hZDpyfSl9Y2F0Y2gobyl7dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKG8pfX1yZWdpc3RlckV4cGlyZXJFdmVudHMoKXt0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIub24oaHQuZXhwaXJlZCxhc3luYyBuPT57Y29uc3R7dG9waWM6dCxpZDplfT1WdChuLnRhcmdldCk7aWYoZSYmdGhpcy5jbGllbnQucGVuZGluZ1JlcXVlc3Qua2V5cy5pbmNsdWRlcyhlKSlyZXR1cm4gYXdhaXQgdGhpcy5kZWxldGVQZW5kaW5nU2Vzc2lvblJlcXVlc3QoZSxwKFwiRVhQSVJFRFwiKSwhMCk7aWYoZSYmdGhpcy5jbGllbnQuYXV0aC5yZXF1ZXN0cy5rZXlzLmluY2x1ZGVzKGUpKXJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZVBlbmRpbmdBdXRoUmVxdWVzdChlLHAoXCJFWFBJUkVEXCIpLCEwKTt0P3RoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyh0KSYmKGF3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6dCxleHBpcmVySGFzRGVsZXRlZDohMH0pLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9leHBpcmVcIix7dG9waWM6dH0pKTplJiYoYXdhaXQgdGhpcy5kZWxldGVQcm9wb3NhbChlLCEwKSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInByb3Bvc2FsX2V4cGlyZVwiLHtpZDplfSkpfSl9cmVnaXN0ZXJQYWlyaW5nRXZlbnRzKCl7dGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmV2ZW50cy5vbihDZS5jcmVhdGUsbj0+dGhpcy5vblBhaXJpbmdDcmVhdGVkKG4pKSx0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuZXZlbnRzLm9uKENlLmRlbGV0ZSxuPT57dGhpcy5hZGRUb1JlY2VudGx5RGVsZXRlZChuLnRvcGljLFwicGFpcmluZ1wiKX0pfWlzVmFsaWRQYWlyaW5nVG9waWMobil7aWYoIVYobiwhMSkpe2NvbnN0e21lc3NhZ2U6dH09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBwYWlyaW5nIHRvcGljIHNob3VsZCBiZSBhIHN0cmluZzogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX1pZighdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMobikpe2NvbnN0e21lc3NhZ2U6dH09cChcIk5PX01BVENISU5HX0tFWVwiLGBwYWlyaW5nIHRvcGljIGRvZXNuJ3QgZXhpc3Q6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IodCl9aWYoWCh0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcucGFpcmluZ3MuZ2V0KG4pLmV4cGlyeSkpe2NvbnN0e21lc3NhZ2U6dH09cChcIkVYUElSRURcIixgcGFpcmluZyB0b3BpYzogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX19YXN5bmMgaXNWYWxpZFNlc3Npb25Ub3BpYyhuKXtpZighVihuLCExKSl7Y29uc3R7bWVzc2FnZTp0fT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHNlc3Npb24gdG9waWMgc2hvdWxkIGJlIGEgc3RyaW5nOiAke259YCk7dGhyb3cgbmV3IEVycm9yKHQpfWlmKHRoaXMuY2hlY2tSZWNlbnRseURlbGV0ZWQobiksIXRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhuKSl7Y29uc3R7bWVzc2FnZTp0fT1wKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYHNlc3Npb24gdG9waWMgZG9lc24ndCBleGlzdDogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX1pZihYKHRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KG4pLmV4cGlyeSkpe2F3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6bn0pO2NvbnN0e21lc3NhZ2U6dH09cChcIkVYUElSRURcIixgc2Vzc2lvbiB0b3BpYzogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX1pZighdGhpcy5jbGllbnQuY29yZS5jcnlwdG8ua2V5Y2hhaW4uaGFzKG4pKXtjb25zdHttZXNzYWdlOnR9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgc2Vzc2lvbiB0b3BpYyBkb2VzIG5vdCBleGlzdCBpbiBrZXljaGFpbjogJHtufWApO3Rocm93IGF3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6bn0pLG5ldyBFcnJvcih0KX19YXN5bmMgaXNWYWxpZFNlc3Npb25PclBhaXJpbmdUb3BpYyhuKXtpZih0aGlzLmNoZWNrUmVjZW50bHlEZWxldGVkKG4pLHRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhuKSlhd2FpdCB0aGlzLmlzVmFsaWRTZXNzaW9uVG9waWMobik7ZWxzZSBpZih0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcucGFpcmluZ3Mua2V5cy5pbmNsdWRlcyhuKSl0aGlzLmlzVmFsaWRQYWlyaW5nVG9waWMobik7ZWxzZSBpZihWKG4sITEpKXtjb25zdHttZXNzYWdlOnR9PXAoXCJOT19NQVRDSElOR19LRVlcIixgc2Vzc2lvbiBvciBwYWlyaW5nIHRvcGljIGRvZXNuJ3QgZXhpc3Q6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IodCl9ZWxzZXtjb25zdHttZXNzYWdlOnR9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgc2Vzc2lvbiBvciBwYWlyaW5nIHRvcGljIHNob3VsZCBiZSBhIHN0cmluZzogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX19YXN5bmMgaXNWYWxpZFByb3Bvc2FsSWQobil7aWYoIU10KG4pKXtjb25zdHttZXNzYWdlOnR9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcHJvcG9zYWwgaWQgc2hvdWxkIGJlIGEgbnVtYmVyOiAke259YCk7dGhyb3cgbmV3IEVycm9yKHQpfWlmKCF0aGlzLmNsaWVudC5wcm9wb3NhbC5rZXlzLmluY2x1ZGVzKG4pKXtjb25zdHttZXNzYWdlOnR9PXAoXCJOT19NQVRDSElOR19LRVlcIixgcHJvcG9zYWwgaWQgZG9lc24ndCBleGlzdDogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX1pZihYKHRoaXMuY2xpZW50LnByb3Bvc2FsLmdldChuKS5leHBpcnlUaW1lc3RhbXApKXthd2FpdCB0aGlzLmRlbGV0ZVByb3Bvc2FsKG4pO2NvbnN0e21lc3NhZ2U6dH09cChcIkVYUElSRURcIixgcHJvcG9zYWwgaWQ6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IodCl9fX1jbGFzcyBucyBleHRlbmRzIEh7Y29uc3RydWN0b3Iobix0KXtzdXBlcihuLHQsRmUsY2UpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPXR9fWNsYXNzIGl0IGV4dGVuZHMgSHtjb25zdHJ1Y3RvcihuLHQpe3N1cGVyKG4sdCxIZSxjZSksdGhpcy5jb3JlPW4sdGhpcy5sb2dnZXI9dH19Y2xhc3Mgb3MgZXh0ZW5kcyBIe2NvbnN0cnVjdG9yKG4sdCl7c3VwZXIobix0LFllLGNlLGU9PmUuaWQpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPXR9fWNsYXNzIGFzIGV4dGVuZHMgSHtjb25zdHJ1Y3RvcihuLHQpe3N1cGVyKG4sdCxXZSxzZSwoKT0+aWUpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPXR9fWNsYXNzIGNzIGV4dGVuZHMgSHtjb25zdHJ1Y3RvcihuLHQpe3N1cGVyKG4sdCxaZSxzZSksdGhpcy5jb3JlPW4sdGhpcy5sb2dnZXI9dH19Y2xhc3MgbHMgZXh0ZW5kcyBIe2NvbnN0cnVjdG9yKG4sdCl7c3VwZXIobix0LGV0LHNlLGU9PmUuaWQpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPXR9fWNsYXNzIGhze2NvbnN0cnVjdG9yKG4sdCl7dGhpcy5jb3JlPW4sdGhpcy5sb2dnZXI9dCx0aGlzLmF1dGhLZXlzPW5ldyBhcyh0aGlzLmNvcmUsdGhpcy5sb2dnZXIpLHRoaXMucGFpcmluZ1RvcGljcz1uZXcgY3ModGhpcy5jb3JlLHRoaXMubG9nZ2VyKSx0aGlzLnJlcXVlc3RzPW5ldyBscyh0aGlzLmNvcmUsdGhpcy5sb2dnZXIpfWFzeW5jIGluaXQoKXthd2FpdCB0aGlzLmF1dGhLZXlzLmluaXQoKSxhd2FpdCB0aGlzLnBhaXJpbmdUb3BpY3MuaW5pdCgpLGF3YWl0IHRoaXMucmVxdWVzdHMuaW5pdCgpfX1jbGFzcyBwZSBleHRlbmRzIG10e2NvbnN0cnVjdG9yKG4pe3N1cGVyKG4pLHRoaXMucHJvdG9jb2w9cWUsdGhpcy52ZXJzaW9uPXZlLHRoaXMubmFtZT1sZS5uYW1lLHRoaXMuZXZlbnRzPW5ldyBLdCx0aGlzLm9uPShlLHMpPT50aGlzLmV2ZW50cy5vbihlLHMpLHRoaXMub25jZT0oZSxzKT0+dGhpcy5ldmVudHMub25jZShlLHMpLHRoaXMub2ZmPShlLHMpPT50aGlzLmV2ZW50cy5vZmYoZSxzKSx0aGlzLnJlbW92ZUxpc3RlbmVyPShlLHMpPT50aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihlLHMpLHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzPWU9PnRoaXMuZXZlbnRzLnJlbW92ZUFsbExpc3RlbmVycyhlKSx0aGlzLmNvbm5lY3Q9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuY29ubmVjdChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnBhaXI9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUucGFpcihlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmFwcHJvdmU9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuYXBwcm92ZShlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnJlamVjdD1hc3luYyBlPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5yZWplY3QoZSl9Y2F0Y2gocyl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSxzfX0sdGhpcy51cGRhdGU9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUudXBkYXRlKGUpfWNhdGNoKHMpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksc319LHRoaXMuZXh0ZW5kPWFzeW5jIGU9Pnt0cnl7cmV0dXJuIGF3YWl0IHRoaXMuZW5naW5lLmV4dGVuZChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnJlcXVlc3Q9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUucmVxdWVzdChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnJlc3BvbmQ9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUucmVzcG9uZChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnBpbmc9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUucGluZyhlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmVtaXQ9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuZW1pdChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmRpc2Nvbm5lY3Q9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuZGlzY29ubmVjdChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmZpbmQ9ZT0+e3RyeXtyZXR1cm4gdGhpcy5lbmdpbmUuZmluZChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmdldFBlbmRpbmdTZXNzaW9uUmVxdWVzdHM9KCk9Pnt0cnl7cmV0dXJuIHRoaXMuZW5naW5lLmdldFBlbmRpbmdTZXNzaW9uUmVxdWVzdHMoKX1jYXRjaChlKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLGV9fSx0aGlzLmF1dGhlbnRpY2F0ZT1hc3luYyBlPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5hdXRoZW50aWNhdGUoZSl9Y2F0Y2gocyl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSxzfX0sdGhpcy5mb3JtYXRBdXRoTWVzc2FnZT1lPT57dHJ5e3JldHVybiB0aGlzLmVuZ2luZS5mb3JtYXRBdXRoTWVzc2FnZShlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmFwcHJvdmVTZXNzaW9uQXV0aGVudGljYXRlPWFzeW5jIGU9Pnt0cnl7cmV0dXJuIGF3YWl0IHRoaXMuZW5naW5lLmFwcHJvdmVTZXNzaW9uQXV0aGVudGljYXRlKGUpfWNhdGNoKHMpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksc319LHRoaXMucmVqZWN0U2Vzc2lvbkF1dGhlbnRpY2F0ZT1hc3luYyBlPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5yZWplY3RTZXNzaW9uQXV0aGVudGljYXRlKGUpfWNhdGNoKHMpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksc319LHRoaXMubmFtZT1uPy5uYW1lfHxsZS5uYW1lLHRoaXMubWV0YWRhdGE9bj8ubWV0YWRhdGF8fEx0KCksdGhpcy5zaWduQ29uZmlnPW4/LnNpZ25Db25maWc7Y29uc3QgdD10eXBlb2Ygbj8ubG9nZ2VyPFwidVwiJiZ0eXBlb2Ygbj8ubG9nZ2VyIT1cInN0cmluZ1wiP24ubG9nZ2VyOmR0KHV0KHtsZXZlbDpuPy5sb2dnZXJ8fGxlLmxvZ2dlcn0pKTt0aGlzLmNvcmU9bj8uY29yZXx8bmV3IHB0KG4pLHRoaXMubG9nZ2VyPWd0KHQsdGhpcy5uYW1lKSx0aGlzLnNlc3Npb249bmV3IGl0KHRoaXMuY29yZSx0aGlzLmxvZ2dlciksdGhpcy5wcm9wb3NhbD1uZXcgbnModGhpcy5jb3JlLHRoaXMubG9nZ2VyKSx0aGlzLnBlbmRpbmdSZXF1ZXN0PW5ldyBvcyh0aGlzLmNvcmUsdGhpcy5sb2dnZXIpLHRoaXMuZW5naW5lPW5ldyBycyh0aGlzKSx0aGlzLmF1dGg9bmV3IGhzKHRoaXMuY29yZSx0aGlzLmxvZ2dlcil9c3RhdGljIGFzeW5jIGluaXQobil7Y29uc3QgdD1uZXcgcGUobik7cmV0dXJuIGF3YWl0IHQuaW5pdGlhbGl6ZSgpLHR9Z2V0IGNvbnRleHQoKXtyZXR1cm4gd3QodGhpcy5sb2dnZXIpfWdldCBwYWlyaW5nKCl7cmV0dXJuIHRoaXMuY29yZS5wYWlyaW5nLnBhaXJpbmdzfWFzeW5jIGluaXRpYWxpemUoKXt0aGlzLmxvZ2dlci50cmFjZShcIkluaXRpYWxpemVkXCIpO3RyeXthd2FpdCB0aGlzLmNvcmUuc3RhcnQoKSxhd2FpdCB0aGlzLnNlc3Npb24uaW5pdCgpLGF3YWl0IHRoaXMucHJvcG9zYWwuaW5pdCgpLGF3YWl0IHRoaXMucGVuZGluZ1JlcXVlc3QuaW5pdCgpLGF3YWl0IHRoaXMuZW5naW5lLmluaXQoKSxhd2FpdCB0aGlzLmF1dGguaW5pdCgpLHRoaXMubG9nZ2VyLmluZm8oXCJTaWduQ2xpZW50IEluaXRpYWxpemF0aW9uIFN1Y2Nlc3NcIiksdGhpcy5lbmdpbmUucHJvY2Vzc1JlbGF5TWVzc2FnZUNhY2hlKCl9Y2F0Y2gobil7dGhyb3cgdGhpcy5sb2dnZXIuaW5mbyhcIlNpZ25DbGllbnQgSW5pdGlhbGl6YXRpb24gRmFpbHVyZVwiKSx0aGlzLmxvZ2dlci5lcnJvcihuLm1lc3NhZ2UpLG59fX1jb25zdCBwcz1pdCxkcz1wZTtleHBvcnR7QmUgYXMgQVVUSF9DT05URVhULFdlIGFzIEFVVEhfS0VZU19DT05URVhULFplIGFzIEFVVEhfUEFJUklOR19UT1BJQ19DT05URVhULEplIGFzIEFVVEhfUFJPVE9DT0wsaWUgYXMgQVVUSF9QVUJMSUNfS0VZX05BTUUsZXQgYXMgQVVUSF9SRVFVRVNUX0NPTlRFWFQsc2UgYXMgQVVUSF9TVE9SQUdFX1BSRUZJWCxXdCBhcyBBVVRIX1ZFUlNJT04semUgYXMgRU5HSU5FX0NPTlRFWFQseCBhcyBFTkdJTkVfUVVFVUVfU1RBVEVTLFMgYXMgRU5HSU5FX1JQQ19PUFRTLFh0IGFzIEhJU1RPUllfQ09OVEVYVCxZdCBhcyBISVNUT1JZX0VWRU5UUyxKdCBhcyBISVNUT1JZX1NUT1JBR0VfVkVSU0lPTixYZSBhcyBNRVRIT0RTX1RPX1ZFUklGWSxGZSBhcyBQUk9QT1NBTF9DT05URVhULEJ0IGFzIFBST1BPU0FMX0VYUElSWSxRZSBhcyBQUk9QT1NBTF9FWFBJUllfTUVTU0FHRSxZZSBhcyBSRVFVRVNUX0NPTlRFWFQsSGUgYXMgU0VTU0lPTl9DT05URVhULGsgYXMgU0VTU0lPTl9FWFBJUlksaGUgYXMgU0VTU0lPTl9SRVFVRVNUX0VYUElSWV9CT1VOREFSSUVTLE5lIGFzIFNJR05fQ0xJRU5UX0NPTlRFWFQsbGUgYXMgU0lHTl9DTElFTlRfREVGQVVMVCxIdCBhcyBTSUdOX0NMSUVOVF9FVkVOVFMscWUgYXMgU0lHTl9DTElFTlRfUFJPVE9DT0wsenQgYXMgU0lHTl9DTElFTlRfU1RPUkFHRV9PUFRJT05TLGNlIGFzIFNJR05fQ0xJRU5UX1NUT1JBR0VfUFJFRklYLHZlIGFzIFNJR05fQ0xJRU5UX1ZFUlNJT04scHMgYXMgU2Vzc2lvblN0b3JlLGRzIGFzIFNpZ25DbGllbnQsUGUgYXMgV0FMTEVUQ09OTkVDVF9ERUVQTElOS19DSE9JQ0UscGUgYXMgZGVmYXVsdH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+sign-client@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10/node_modules/@walletconnect/sign-client/dist/index.es.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@walletconnect+sign-client@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10/node_modules/@walletconnect/sign-client/dist/index.es.js":
/*!**************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+sign-client@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10/node_modules/@walletconnect/sign-client/dist/index.es.js ***!
  \**************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AUTH_CONTEXT: () => (/* binding */ Be),\n/* harmony export */   AUTH_KEYS_CONTEXT: () => (/* binding */ We),\n/* harmony export */   AUTH_PAIRING_TOPIC_CONTEXT: () => (/* binding */ Ze),\n/* harmony export */   AUTH_PROTOCOL: () => (/* binding */ Je),\n/* harmony export */   AUTH_PUBLIC_KEY_NAME: () => (/* binding */ ie),\n/* harmony export */   AUTH_REQUEST_CONTEXT: () => (/* binding */ et),\n/* harmony export */   AUTH_STORAGE_PREFIX: () => (/* binding */ se),\n/* harmony export */   AUTH_VERSION: () => (/* binding */ Wt),\n/* harmony export */   ENGINE_CONTEXT: () => (/* binding */ ze),\n/* harmony export */   ENGINE_QUEUE_STATES: () => (/* binding */ x),\n/* harmony export */   ENGINE_RPC_OPTS: () => (/* binding */ S),\n/* harmony export */   HISTORY_CONTEXT: () => (/* binding */ Xt),\n/* harmony export */   HISTORY_EVENTS: () => (/* binding */ Yt),\n/* harmony export */   HISTORY_STORAGE_VERSION: () => (/* binding */ Jt),\n/* harmony export */   METHODS_TO_VERIFY: () => (/* binding */ Xe),\n/* harmony export */   PROPOSAL_CONTEXT: () => (/* binding */ Fe),\n/* harmony export */   PROPOSAL_EXPIRY: () => (/* binding */ Bt),\n/* harmony export */   PROPOSAL_EXPIRY_MESSAGE: () => (/* binding */ Qe),\n/* harmony export */   REQUEST_CONTEXT: () => (/* binding */ Ye),\n/* harmony export */   SESSION_CONTEXT: () => (/* binding */ He),\n/* harmony export */   SESSION_EXPIRY: () => (/* binding */ k),\n/* harmony export */   SESSION_REQUEST_EXPIRY_BOUNDARIES: () => (/* binding */ he),\n/* harmony export */   SIGN_CLIENT_CONTEXT: () => (/* binding */ Ne),\n/* harmony export */   SIGN_CLIENT_DEFAULT: () => (/* binding */ le),\n/* harmony export */   SIGN_CLIENT_EVENTS: () => (/* binding */ Ht),\n/* harmony export */   SIGN_CLIENT_PROTOCOL: () => (/* binding */ qe),\n/* harmony export */   SIGN_CLIENT_STORAGE_OPTIONS: () => (/* binding */ zt),\n/* harmony export */   SIGN_CLIENT_STORAGE_PREFIX: () => (/* binding */ ce),\n/* harmony export */   SIGN_CLIENT_VERSION: () => (/* binding */ ve),\n/* harmony export */   SessionStore: () => (/* binding */ ps),\n/* harmony export */   SignClient: () => (/* binding */ ds),\n/* harmony export */   WALLETCONNECT_DEEPLINK_CHOICE: () => (/* binding */ Pe),\n/* harmony export */   \"default\": () => (/* binding */ pe)\n/* harmony export */ });\n/* harmony import */ var _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @walletconnect/core */ \"(rsc)/./node_modules/.pnpm/@walletconnect+core@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10/node_modules/@walletconnect/core/dist/index.es.js\");\n/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/logger */ \"(rsc)/./node_modules/.pnpm/@walletconnect+logger@2.1.2/node_modules/@walletconnect/logger/dist/index.es.js\");\n/* harmony import */ var _walletconnect_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @walletconnect/types */ \"(rsc)/./node_modules/.pnpm/@walletconnect+types@2.15.2/node_modules/@walletconnect/types/dist/index.es.js\");\n/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @walletconnect/utils */ \"(rsc)/./node_modules/.pnpm/@walletconnect+utils@2.15.2/node_modules/@walletconnect/utils/dist/index.es.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/time */ \"(rsc)/./node_modules/.pnpm/@walletconnect+time@1.0.2/node_modules/@walletconnect/time/dist/cjs/index.js\");\n/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ \"(rsc)/./node_modules/.pnpm/@walletconnect+jsonrpc-utils@1.0.8/node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js\");\nconst qe=\"wc\",ve=2,Ne=\"client\",ce=`${qe}@${ve}:${Ne}:`,le={name:Ne,logger:\"error\",controller:!1,relayUrl:\"wss://relay.walletconnect.com\"},Ht={session_proposal:\"session_proposal\",session_update:\"session_update\",session_extend:\"session_extend\",session_ping:\"session_ping\",session_delete:\"session_delete\",session_expire:\"session_expire\",session_request:\"session_request\",session_request_sent:\"session_request_sent\",session_event:\"session_event\",proposal_expire:\"proposal_expire\",session_authenticate:\"session_authenticate\",session_request_expire:\"session_request_expire\"},zt={database:\":memory:\"},Pe=\"WALLETCONNECT_DEEPLINK_CHOICE\",Yt={created:\"history_created\",updated:\"history_updated\",deleted:\"history_deleted\",sync:\"history_sync\"},Xt=\"history\",Jt=\"0.3\",Fe=\"proposal\",Bt=_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.THIRTY_DAYS,Qe=\"Proposal expired\",He=\"session\",k=_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.SEVEN_DAYS,ze=\"engine\",S={wc_sessionPropose:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,prompt:!1,tag:1119}}},he={min:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,max:_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.SEVEN_DAYS},x={idle:\"IDLE\",active:\"ACTIVE\"},Ye=\"request\",Xe=[\"wc_sessionPropose\",\"wc_sessionRequest\",\"wc_authRequest\",\"wc_sessionAuthenticate\"],Je=\"wc\",Wt=1.5,Be=\"auth\",We=\"authKeys\",Ze=\"pairingTopics\",et=\"requests\",se=`${Je}@${1.5}:${Be}:`,ie=`${se}:PUB_KEY`;var Zt=Object.defineProperty,es=Object.defineProperties,ts=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,ss=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,st=(I,n,t)=>n in I?Zt(I,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):I[n]=t,E=(I,n)=>{for(var t in n||(n={}))ss.call(n,t)&&st(I,t,n[t]);if(tt)for(var t of tt(n))is.call(n,t)&&st(I,t,n[t]);return I},j=(I,n)=>es(I,ts(n));class rs extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_4__.IEngine{constructor(n){super(n),this.name=ze,this.events=new (events__WEBPACK_IMPORTED_MODULE_1___default()),this.initialized=!1,this.requestQueue={state:x.idle,queue:[]},this.sessionRequestQueue={state:x.idle,queue:[]},this.requestQueueDelay=_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(S)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.toMiliseconds)(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const e=j(E({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(e);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:o,relays:a}=e;let c=s,h,l=!1;try{c&&(l=this.client.core.pairing.pairings.get(c).active)}catch(y){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),y}if(!c||!l){const{topic:y,uri:R}=await this.client.core.pairing.create();c=y,h=R}if(!c){const{message:y}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`connect() pairing topic: ${c}`);throw new Error(y)}const g=await this.client.core.crypto.generateKeyPair(),d=S.wc_sessionPropose.req.ttl||_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.FIVE_MINUTES,u=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(d),_=E({requiredNamespaces:i,optionalNamespaces:r,relays:a??[{protocol:_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:u,pairingTopic:c},o&&{sessionProperties:o}),{reject:q,resolve:m,done:O}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)(d,Qe);this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),async({error:y,session:R})=>{if(y)q(y);else if(R){R.self.publicKey=g;const K=j(E({},R),{pairingTopic:_.pairingTopic,requiredNamespaces:_.requiredNamespaces,optionalNamespaces:_.optionalNamespaces});await this.client.session.set(R.topic,K),await this.setExpiry(R.topic,R.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:R.peer.metadata}),this.cleanupDuplicatePairings(K),m(K)}});const D=await this.sendRequest({topic:c,method:\"wc_sessionPropose\",params:_,throwOnFailedPublish:!0});return await this.setProposal(D,E({id:D},_)),{uri:h,approval:O}},this.pair=async t=>{await this.isInitialized();try{return await this.client.core.pairing.pair(t)}catch(e){throw this.client.logger.error(\"pair() failed\"),e}},this.approve=async t=>{var e,s,i;const r=this.client.core.eventClient.createEvent({properties:{topic:(e=t?.id)==null?void 0:e.toString(),trace:[_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_approve_started]}});try{await this.isInitialized()}catch(f){throw r.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.no_internet_connection),f}try{await this.isValidProposalId(t?.id)}catch(f){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),r.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.proposal_not_found),f}try{await this.isValidApprove(t)}catch(f){throw this.client.logger.error(\"approve() -> isValidApprove() failed\"),r.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.session_approve_namespace_validation_failure),f}const{id:o,relayProtocol:a,namespaces:c,sessionProperties:h,sessionConfig:l}=t,g=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:r.eventId});const{pairingTopic:d,proposer:u,requiredNamespaces:_,optionalNamespaces:q}=g;let m=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:d});m||(m=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_approve_started,properties:{topic:d,trace:[_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_approve_started,_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_namespaces_validation_success]}}));const O=await this.client.core.crypto.generateKeyPair(),D=u.publicKey,y=await this.client.core.crypto.generateSharedKey(O,D),R=E(E({relay:{protocol:a??\"irn\"},namespaces:c,controller:{publicKey:O,metadata:this.client.metadata},expiry:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k)},h&&{sessionProperties:h}),l&&{sessionConfig:l});m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.subscribing_session_topic);try{await this.client.core.relayer.subscribe(y)}catch(f){throw m.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.subscribe_session_topic_failure),f}m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.subscribe_session_topic_success);const K=j(E({},R),{topic:y,requiredNamespaces:_,optionalNamespaces:q,pairingTopic:d,acknowledged:!1,self:R.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:O});await this.client.session.set(y,K),m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.store_session);try{m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.publishing_session_settle),await this.sendRequest({topic:y,method:\"wc_sessionSettle\",params:R,throwOnFailedPublish:!0}).catch(f=>{throw m?.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.session_settle_publish_failure),f}),m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_settle_publish_success),m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.publishing_session_approve),await this.sendResult({id:o,topic:d,result:{relay:{protocol:a??\"irn\"},responderPublicKey:O},throwOnFailedPublish:!0}).catch(f=>{throw m?.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.session_approve_publish_failure),f}),m.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_TRACES.session_approve_publish_success)}catch(f){throw this.client.logger.error(f),this.client.session.delete(y,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),await this.client.core.relayer.unsubscribe(y),f}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:u.metadata}),await this.client.proposal.delete(o,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(y,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k)),{topic:y,acknowledged:()=>Promise.resolve(this.client.session.get(y))}},this.reject=async t=>{await this.isInitialized();try{await this.isValidReject(t)}catch(r){throw this.client.logger.error(\"reject() -> isValidReject() failed\"),r}const{id:e,reason:s}=t;let i;try{i=this.client.proposal.get(e).pairingTopic}catch(r){throw this.client.logger.error(`reject() -> proposal.get(${e}) failed`),r}i&&(await this.sendError({id:e,topic:i,error:s,rpcOpts:S.wc_sessionPropose.reject}),await this.client.proposal.delete(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")))},this.update=async t=>{await this.isInitialized();try{await this.isValidUpdate(t)}catch(l){throw this.client.logger.error(\"update() -> isValidUpdate() failed\"),l}const{topic:e,namespaces:s}=t,{done:i,resolve:r,reject:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)(),a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),c=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.getBigIntRpcId)().toString(),h=this.client.session.get(e).namespaces;return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_update\",a),({error:l})=>{l?o(l):r()}),await this.client.session.update(e,{namespaces:s}),await this.sendRequest({topic:e,method:\"wc_sessionUpdate\",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:c}).catch(l=>{this.client.logger.error(l),this.client.session.update(e,{namespaces:h}),o(l)}),{acknowledged:i}},this.extend=async t=>{await this.isInitialized();try{await this.isValidExtend(t)}catch(a){throw this.client.logger.error(\"extend() -> isValidExtend() failed\"),a}const{topic:e}=t,s=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),{done:i,resolve:r,reject:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)();return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_extend\",s),({error:a})=>{a?o(a):r()}),await this.setExpiry(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k)),this.sendRequest({topic:e,method:\"wc_sessionExtend\",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(a=>{o(a)}),{acknowledged:i}},this.request=async t=>{await this.isInitialized();try{await this.isValidRequest(t)}catch(d){throw this.client.logger.error(\"request() -> isValidRequest() failed\"),d}const{chainId:e,request:s,topic:i,expiry:r=S.wc_sessionRequest.req.ttl}=t,o=this.client.session.get(i),a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),c=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.getBigIntRpcId)().toString(),{done:h,resolve:l,reject:g}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)(r,\"Request expired. Please try again.\");return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",a),({error:d,result:u})=>{d?g(d):l(u)}),await Promise.all([new Promise(async d=>{await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:i,method:\"wc_sessionRequest\",params:{request:j(E({},s),{expiryTimestamp:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(r)}),chainId:e},expiry:r,throwOnFailedPublish:!0}).catch(u=>g(u)),this.client.events.emit(\"session_request_sent\",{topic:i,request:s,chainId:e,id:a}),d()}),new Promise(async d=>{var u;if(!((u=o.sessionConfig)!=null&&u.disableDeepLink)){const _=await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getDeepLink)(this.client.core.storage,Pe);(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.handleDeeplinkRedirect)({id:a,topic:i,wcDeepLink:_})}d()}),h()]).then(d=>d[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:e,response:s}=t,{id:i}=s;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(s)?await this.sendResult({id:i,topic:e,result:s.result,throwOnFailedPublish:!0}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(s)&&await this.sendError({id:i,topic:e,error:s.error}),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error(\"ping() -> isValidPing() failed\"),s}const{topic:e}=t;if(this.client.session.keys.includes(e)){const s=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),i=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.getBigIntRpcId)().toString(),{done:r,resolve:o,reject:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)();this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_ping\",s),({error:c})=>{c?a(c):o()}),await Promise.all([this.sendRequest({topic:e,method:\"wc_sessionPing\",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),r()])}else this.client.core.pairing.pairings.keys.includes(e)&&await this.client.core.pairing.ping({topic:e})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:e,event:s,chainId:i}=t,r=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.getBigIntRpcId)().toString();await this.sendRequest({topic:e,method:\"wc_sessionEvent\",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:r})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:e}=t;if(this.client.session.keys.includes(e))await this.sendRequest({topic:e,method:\"wc_sessionDelete\",params:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\"),throwOnFailedPublish:!0}),await this.deleteSession({topic:e,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(e))await this.client.core.pairing.disconnect({topic:e});else{const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISMATCHED_TOPIC\",`Session or pairing topic not found: ${e}`);throw new Error(s)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(e=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isSessionCompatible)(e,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async t=>{this.isInitialized(),this.isValidAuthenticate(t);const{chains:e,statement:s=\"\",uri:i,domain:r,nonce:o,type:a,exp:c,nbf:h,methods:l=[],expiry:g}=t,d=[...t.resources||[]],{topic:u,uri:_}=await this.client.core.pairing.create({methods:[\"wc_sessionAuthenticate\"]});this.client.logger.info({message:\"Generated new pairing\",pairing:{topic:u,uri:_}});const q=await this.client.core.crypto.generateKeyPair(),m=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashKey)(q);if(await Promise.all([this.client.auth.authKeys.set(ie,{responseTopic:m,publicKey:q}),this.client.auth.pairingTopics.set(m,{topic:m,pairingTopic:u})]),await this.client.core.relayer.subscribe(m),this.client.logger.info(`sending request to new pairing topic: ${u}`),l.length>0){const{namespace:A}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.parseChainId)(e[0]);let v=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createEncodedRecap)(A,\"request\",l);(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getRecapFromResources)(d)&&(v=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.mergeEncodedRecaps)(v,d.pop())),d.push(v)}const O=g&&g>S.wc_sessionAuthenticate.req.ttl?g:S.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:a??\"caip122\",chains:e,statement:s,aud:i,domain:r,version:\"1\",nonce:o,iat:new Date().toISOString(),exp:c,nbf:h,resources:d},requester:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(O)},y={eip155:{chains:e,methods:[...new Set([\"personal_sign\",...l])],events:[\"chainChanged\",\"accountsChanged\"]}},R={requiredNamespaces:{},optionalNamespaces:y,relays:[{protocol:\"irn\"}],pairingTopic:u,proposer:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(S.wc_sessionPropose.req.ttl)},{done:K,resolve:f,reject:de}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.createDelayedPromise)(O,\"Request expired\"),re=async({error:A,session:v})=>{if(this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",F),ue),A)de(A);else if(v){v.self.publicKey=q,await this.client.session.set(v.topic,v),await this.setExpiry(v.topic,v.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:v.peer.metadata});const Q=this.client.session.get(v.topic);await this.deleteProposal(B),f({session:Q})}},ue=async A=>{if(await this.deletePendingAuthRequest(F,{message:\"fulfilled\",code:0}),A.error){const W=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"WC_METHOD_UNSUPPORTED\",\"wc_sessionAuthenticate\");return A.error.code===W.code?void 0:(this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),re),de(A.error.message))}await this.deleteProposal(B),this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),re);const{cacaos:v,responder:Q}=A.result,ge=[],Te=[];for(const W of v){await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.validateSignedCacao)({cacao:W,projectId:this.client.core.projectId})||(this.client.logger.error(W,\"Signature verification failed\"),de((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"SESSION_SETTLEMENT_FAILED\",\"Signature verification failed\")));const{p:we}=W,ye=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getRecapFromResources)(we.resources),Oe=[(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getNamespacedDidChainId)(we.iss)],rt=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getDidAddress)(we.iss);if(ye){const me=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getMethodsFromRecap)(ye),nt=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getChainsFromRecap)(ye);ge.push(...me),Oe.push(...nt)}for(const me of Oe)Te.push(`${me}:${rt}`)}const ne=await this.client.core.crypto.generateSharedKey(q,Q.publicKey);let oe;ge.length>0&&(oe={topic:ne,acknowledged:!0,self:{publicKey:q,metadata:this.client.metadata},peer:Q,controller:Q.publicKey,expiry:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:\"irn\"},pairingTopic:u,namespaces:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.buildNamespacesFromAuth)([...new Set(ge)],[...new Set(Te)])},await this.client.core.relayer.subscribe(ne),await this.client.session.set(ne,oe),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:Q.metadata}),oe=this.client.session.get(ne)),f({auths:v,session:oe})},F=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)(),B=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.payloadId)();this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),re),this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",F),ue);try{await Promise.all([this.sendRequest({topic:u,method:\"wc_sessionAuthenticate\",params:D,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:F}),this.sendRequest({topic:u,method:\"wc_sessionPropose\",params:R,expiry:S.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B})])}catch(A){throw this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),re),this.events.off((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",F),ue),A}return await this.setProposal(B,E({id:B},R)),await this.setAuthRequest(F,{request:j(E({},D),{verifyContext:{}}),pairingTopic:u}),{uri:_,response:K}},this.approveSessionAuthenticate=async t=>{const{id:e,auths:s}=t,i=this.client.core.eventClient.createEvent({properties:{topic:e.toString(),trace:[_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.authenticated_session_approve_started]}});try{this.isInitialized()}catch(_){throw i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.no_internet_connection),_}const r=this.getPendingAuthRequest(e);if(!r)throw i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${e}`);const o=r.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashKey)(o),h={type:_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.TYPE_1,receiverPublicKey:o,senderPublicKey:a},l=[],g=[];for(const _ of s){if(!await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.validateSignedCacao)({cacao:_,projectId:this.client.core.projectId})){i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.invalid_cacao);const y=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"SESSION_SETTLEMENT_FAILED\",\"Signature verification failed\");throw await this.sendError({id:e,topic:c,error:y,encodeOpts:h}),new Error(y.message)}i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.cacaos_verified);const{p:q}=_,m=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getRecapFromResources)(q.resources),O=[(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getNamespacedDidChainId)(q.iss)],D=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getDidAddress)(q.iss);if(m){const y=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getMethodsFromRecap)(m),R=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getChainsFromRecap)(m);l.push(...y),O.push(...R)}for(const y of O)g.push(`${y}:${D}`)}const d=await this.client.core.crypto.generateSharedKey(a,o);i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.create_authenticated_session_topic);let u;if(l?.length>0){u={topic:d,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:r.requester.metadata},controller:o,expiry:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:\"irn\"},pairingTopic:r.pairingTopic,namespaces:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.buildNamespacesFromAuth)([...new Set(l)],[...new Set(g)])},i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(d)}catch(_){throw i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.subscribe_authenticated_session_topic_failure),_}i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.subscribe_authenticated_session_topic_success),await this.client.session.set(d,u),i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:r.pairingTopic,metadata:r.requester.metadata})}i.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_TRACES.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:e,result:{cacaos:s,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0})}catch(_){throw i.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_AUTHENTICATE_ERRORS.authenticated_session_approve_publish_failure),_}return await this.client.auth.requests.delete(e,{message:\"fulfilled\",code:0}),await this.client.core.pairing.activate({topic:r.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:u}},this.rejectSessionAuthenticate=async t=>{await this.isInitialized();const{id:e,reason:s}=t,i=this.getPendingAuthRequest(e);if(!i)throw new Error(`Could not find pending auth request with id ${e}`);const r=i.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashKey)(r),c={type:_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.TYPE_1,receiverPublicKey:r,senderPublicKey:o};await this.sendError({id:e,topic:a,error:s,encodeOpts:c,rpcOpts:S.wc_sessionAuthenticate.reject}),await this.client.auth.requests.delete(e,{message:\"rejected\",code:0}),await this.client.proposal.delete(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:e,iss:s}=t;return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.formatMessage)(e,s)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const e=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var r,o;return((r=i.peerMetadata)==null?void 0:r.url)&&((o=i.peerMetadata)==null?void 0:o.url)===t.peer.metadata.url&&i.topic&&i.topic!==e.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info(\"Duplicate pairings clean up finished\")}catch(e){this.client.logger.error(e)}},this.deleteSession=async t=>{var e;const{topic:s,expirerHasDeleted:i=!1,emitEvent:r=!0,id:o=0}=t,{self:a}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),this.addToRecentlyDeleted(s,\"session\"),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Pe).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===s&&this.deletePendingSessionRequest(c.id,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\"))}),s===((e=this.sessionRequestQueue.queue[0])==null?void 0:e.topic)&&(this.sessionRequestQueue.state=x.idle),r&&this.client.events.emit(\"session_delete\",{id:o,topic:s})},this.deleteProposal=async(t,e)=>{if(e)try{const s=this.client.proposal.get(t),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i?.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_SESSION_ERRORS.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),e?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,\"proposal\")},this.deletePendingSessionRequest=async(t,e,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,e),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,\"request\"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==t),s&&(this.sessionRequestQueue.state=x.idle,this.client.events.emit(\"session_request_expire\",{id:t}))},this.deletePendingAuthRequest=async(t,e,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,e),s?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,e)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,e),await this.client.session.update(t,{expiry:e}))},this.setProposal=async(t,e)=>{this.client.core.expirer.set(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(S.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,e)},this.setAuthRequest=async(t,e)=>{const{request:s,pairingTopic:i}=e;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:i,verifyContext:s.verifyContext})},this.setPendingSessionRequest=async t=>{const{id:e,topic:s,params:i,verifyContext:r}=t,o=i.request.expiryTimestamp||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(S.wc_sessionRequest.req.ttl);this.client.core.expirer.set(e,o),await this.client.pendingRequest.set(e,{id:e,topic:s,params:i,verifyContext:r})},this.sendRequest=async t=>{const{topic:e,method:s,params:i,expiry:r,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c}=t,h=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcRequest)(s,i,a);let l;try{l=await this.client.core.crypto.encode(e,h)}catch(u){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${e} failed`),u}let g;if(Xe.includes(s)){const u=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(JSON.stringify(h)),_=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(l);g=await this.client.core.verify.register({id:_,decryptedId:u})}const d=S[s].req;return d.attestation=g,r&&(d.ttl=r),o&&(d.id=o),this.client.core.history.set(e,h),c?(d.internal=j(E({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(e,l,d)):this.client.core.relayer.publish(e,l,d).catch(u=>this.client.logger.error(u)),h.id},this.sendResult=async t=>{const{id:e,topic:s,result:i,throwOnFailedPublish:r,encodeOpts:o}=t,a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcResult)(e,i);let c;try{c=await this.client.core.crypto.encode(s,a,o)}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let h;try{h=await this.client.core.history.get(s,e)}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${e}) failed`),g}const l=S[h.request.method].res;r?(l.internal=j(E({},l.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,c,l)):this.client.core.relayer.publish(s,c,l).catch(g=>this.client.logger.error(g)),await this.client.core.history.resolve(a)},this.sendError=async t=>{const{id:e,topic:s,error:i,encodeOpts:r,rpcOpts:o}=t,a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcError)(e,i);let c;try{c=await this.client.core.crypto.encode(s,a,r)}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),g}let h;try{h=await this.client.core.history.get(s,e)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${s}, ${e}) failed`),g}const l=o||S[h.request.method].res;this.client.core.relayer.publish(s,c,l),await this.client.core.history.resolve(a)},this.cleanup=async()=>{const t=[],e=[];this.client.session.getAll().forEach(s=>{let i=!1;(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(s.expiryTimestamp)&&e.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...e.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===x.active){this.client.logger.info(\"Request queue already active, skipping...\");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=x.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=x.idle},this.processRequest=async t=>{const{topic:e,payload:s,attestation:i,encryptedId:r}=t,o=s.method;if(!this.shouldIgnorePairingRequest({topic:e,requestMethod:o}))switch(o){case\"wc_sessionPropose\":return await this.onSessionProposeRequest({topic:e,payload:s,attestation:i,encryptedId:r});case\"wc_sessionSettle\":return await this.onSessionSettleRequest(e,s);case\"wc_sessionUpdate\":return await this.onSessionUpdateRequest(e,s);case\"wc_sessionExtend\":return await this.onSessionExtendRequest(e,s);case\"wc_sessionPing\":return await this.onSessionPingRequest(e,s);case\"wc_sessionDelete\":return await this.onSessionDeleteRequest(e,s);case\"wc_sessionRequest\":return await this.onSessionRequest({topic:e,payload:s,attestation:i,encryptedId:r});case\"wc_sessionEvent\":return await this.onSessionEventRequest(e,s);case\"wc_sessionAuthenticate\":return await this.onSessionAuthenticateRequest({topic:e,payload:s,attestation:i,encryptedId:r});default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async t=>{const{topic:e,payload:s}=t,i=(await this.client.core.history.get(e,s.id)).request.method;switch(i){case\"wc_sessionPropose\":return this.onSessionProposeResponse(e,s);case\"wc_sessionSettle\":return this.onSessionSettleResponse(e,s);case\"wc_sessionUpdate\":return this.onSessionUpdateResponse(e,s);case\"wc_sessionExtend\":return this.onSessionExtendResponse(e,s);case\"wc_sessionPing\":return this.onSessionPingResponse(e,s);case\"wc_sessionRequest\":return this.onSessionRequestResponse(e,s);case\"wc_sessionAuthenticate\":return this.onSessionAuthenticateResponse(e,s);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:e}=t,{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`Decoded payload on topic ${e} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=t=>{const{topic:e,requestMethod:s}=t,i=this.expectedPairingMethodMap.get(e);return!i||i.includes(s)?!1:!!(i.includes(\"wc_sessionAuthenticate\")&&this.client.events.listenerCount(\"session_authenticate\")>0)},this.onSessionProposeRequest=async t=>{const{topic:e,payload:s,attestation:i,encryptedId:r}=t,{params:o,id:a}=s;try{const c=this.client.core.eventClient.getEvent({topic:e});this.isValidConnect(E({},s.params));const h=o.expiryTimestamp||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(S.wc_sessionPropose.req.ttl),l=E({id:a,pairingTopic:e,expiryTimestamp:h},o);await this.setProposal(a,l);const g=await this.getVerifyContext({attestationId:i,hash:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(JSON.stringify(s)),encryptedId:r,metadata:l.proposer.metadata});this.client.events.listenerCount(\"session_proposal\")===0&&(console.warn(\"No listener for session_proposal event\"),c?.setError(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_PAIRING_ERRORS.proposal_listener_not_found)),c?.addTrace(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EVENT_CLIENT_PAIRING_TRACES.emit_session_proposal),this.client.events.emit(\"session_proposal\",{id:a,params:l,verifyContext:g})}catch(c){await this.sendError({id:a,topic:e,error:c,rpcOpts:S.wc_sessionPropose.autoReject}),this.client.logger.error(c)}},this.onSessionProposeResponse=async(t,e)=>{const{id:s}=e;if((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)){const{result:i}=e;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",result:i});const r=this.client.proposal.get(s);this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",proposal:r});const o=r.proposer.publicKey;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",sessionTopic:c});const h=await this.client.core.relayer.subscribe(c);this.client.logger.trace({type:\"method\",method:\"onSessionProposeResponse\",subscriptionId:h}),await this.client.core.pairing.activate({topic:t})}else if((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)){await this.client.proposal.delete(s,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\"));const i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\");if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners, 954`);this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),{error:e.error})}},this.onSessionSettleRequest=async(t,e)=>{const{id:s,params:i}=e;try{this.isValidSessionSettleRequest(i);const{relay:r,controller:o,expiry:a,namespaces:c,sessionProperties:h,sessionConfig:l}=e.params,g=E(E({topic:t,relay:r,expiry:a,namespaces:c,acknowledged:!0,pairingTopic:\"\",requiredNamespaces:{},optionalNamespaces:{},controller:o.publicKey,self:{publicKey:\"\",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},h&&{sessionProperties:h}),l&&{sessionConfig:l}),d=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\");if(this.events.listenerCount(d)===0)throw new Error(`emitting ${d} without any listeners 997`);this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_connect\"),{session:g}),await this.sendResult({id:e.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(r){await this.sendError({id:s,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionSettleResponse=async(t,e)=>{const{id:s}=e;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_approve\",s),{})):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&(await this.client.session.delete(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")),this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_approve\",s),{error:e.error}))},this.onSessionUpdateRequest=async(t,e)=>{const{params:s,id:i}=e;try{const r=`${t}_session_update`,o=_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.get(r);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.info(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:t,error:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"INVALID_UPDATE_REQUEST\")});return}this.isValidUpdate(E({topic:t},s));try{_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.set(r,i),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0})}catch(a){throw _walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.delete(r),a}this.client.events.emit(\"session_update\",{id:i,topic:t,params:s})}catch(r){await this.sendError({id:i,topic:t,error:r}),this.client.logger.error(r)}},this.isRequestOutOfSync=(t,e)=>parseInt(e.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,e)=>{const{id:s}=e,i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_update\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_update\",s),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_update\",s),{error:e.error})},this.onSessionExtendRequest=async(t,e)=>{const{id:s}=e;try{this.isValidExtend({topic:t}),await this.setExpiry(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.calcExpiry)(k)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit(\"session_extend\",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}},this.onSessionExtendResponse=(t,e)=>{const{id:s}=e,i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_extend\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_extend\",s),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_extend\",s),{error:e.error})},this.onSessionPingRequest=async(t,e)=>{const{id:s}=e;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit(\"session_ping\",{id:s,topic:t})}catch(i){await this.sendError({id:s,topic:t,error:i}),this.client.logger.error(i)}},this.onSessionPingResponse=(t,e)=>{const{id:s}=e,i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_ping\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);setTimeout(()=>{(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_ping\",s),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_ping\",s),{error:e.error})},500)},this.onSessionDeleteRequest=async(t,e)=>{const{id:s}=e;try{this.isValidDisconnect({topic:t,reason:e.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.RELAYER_EVENTS.publish,async()=>{i(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getSdkError)(\"USER_DISCONNECTED\")})])}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async t=>{var e;const{topic:s,payload:i,attestation:r,encryptedId:o}=t,{id:a,params:c}=i;try{await this.isValidRequest(E({topic:s},c));const h=this.client.session.get(s),l=await this.getVerifyContext({attestationId:r,hash:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(JSON.stringify((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcRequest)(\"wc_sessionRequest\",c,a))),encryptedId:o,metadata:h.peer.metadata}),g={id:a,topic:s,params:c,verifyContext:l};await this.setPendingSessionRequest(g),(e=this.client.signConfig)!=null&&e.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:a,topic:s,error:h}),this.client.logger.error(h)}},this.onSessionRequestResponse=(t,e)=>{const{id:s}=e,i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s),{result:e.result}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s),{error:e.error})},this.onSessionEventRequest=async(t,e)=>{const{id:s,params:i}=e;try{const r=`${t}_session_event_${i.event.name}`,o=_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.get(r);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(E({topic:t},i)),this.client.events.emit(\"session_event\",{id:s,topic:t,params:i}),_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.MemoryStore.set(r,s)}catch(r){await this.sendError({id:s,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionAuthenticateResponse=(t,e)=>{const{id:s}=e;this.client.logger.trace({type:\"method\",method:\"onSessionAuthenticateResponse\",topic:t,payload:e}),(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResult)(e)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s),{result:e.result}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcError)(e)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",s),{error:e.error})},this.onSessionAuthenticateRequest=async t=>{const{topic:e,payload:s,attestation:i,encryptedId:r}=t;try{const{requester:o,authPayload:a,expiryTimestamp:c}=s.params,h=await this.getVerifyContext({attestationId:i,hash:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(JSON.stringify(s)),encryptedId:r,metadata:this.client.metadata}),l={requester:o,pairingTopic:e,id:s.id,authPayload:a,verifyContext:h,expiryTimestamp:c};await this.setAuthRequest(s.id,{request:l,pairingTopic:e}),this.client.events.emit(\"session_authenticate\",{topic:e,params:s.params,id:s.id,verifyContext:h})}catch(o){this.client.logger.error(o);const a=s.params.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),h={type:_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.TYPE_1,receiverPublicKey:a,senderPublicKey:c};await this.sendError({id:s.id,topic:e,error:o,encodeOpts:h,rpcOpts:S.wc_sessionAuthenticate.autoReject})}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:\"fulfilled\",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=x.idle,this.processSessionRequestQueue()},(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_2__.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:e})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===t&&i.request.method===\"wc_sessionRequest\").forEach(i=>{const r=i.request.id,o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",r);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.engineEvent)(\"session_request\",i.request.id),{error:e})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===x.active){this.client.logger.info(\"session request queue is already active.\");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info(\"session request queue is empty.\");return}try{this.sessionRequestQueue.state=x.active,this.emitSessionRequest(t)}catch(e){this.client.logger.error(e)}},this.emitSessionRequest=t=>{this.client.events.emit(\"session_request\",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const e=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);e&&this.onSessionProposeRequest({topic:t.topic,payload:(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcRequest)(\"wc_sessionPropose\",{requiredNamespaces:e.requiredNamespaces,optionalNamespaces:e.optionalNamespaces,relays:e.relays,proposer:e.proposer,sessionProperties:e.sessionProperties},e.id)})},this.isValidConnect=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`connect() params: ${JSON.stringify(t)}`);throw new Error(a)}const{pairingTopic:e,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:r,relays:o}=t;if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(e)||await this.isValidPairingTopic(e),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRelays)(o,!0)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`connect() relays: ${o}`);throw new Error(a)}!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(s)&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidObject)(s)!==0&&this.validateNamespaces(s,\"requiredNamespaces\"),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(i)&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidObject)(i)!==0&&this.validateNamespaces(i,\"optionalNamespaces\"),(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(r)||this.validateSessionProps(r,\"sessionProperties\")},this.validateNamespaces=(t,e)=>{const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRequiredNamespaces)(t,\"connect()\",e);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t))throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`approve() params: ${t}`).message);const{id:e,namespaces:s,relayProtocol:i,sessionProperties:r}=t;this.checkRecentlyDeleted(e),await this.isValidProposalId(e);const o=this.client.proposal.get(e),a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespaces)(s,\"approve()\");if(a)throw new Error(a.message);const c=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isConformingNamespaces)(o.requiredNamespaces,s,\"approve()\");if(c)throw new Error(c.message);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(i,!0)){const{message:h}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`approve() relayProtocol: ${i}`);throw new Error(h)}(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isUndefined)(r)||this.validateSessionProps(r,\"sessionProperties\")},this.isValidReject=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`reject() params: ${t}`);throw new Error(i)}const{id:e,reason:s}=t;if(this.checkRecentlyDeleted(e),await this.isValidProposalId(e),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidErrorReason)(s)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}},this.isValidSessionSettleRequest=t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:c}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`onSessionSettleRequest() params: ${t}`);throw new Error(c)}const{relay:e,controller:s,namespaces:i,expiry:r}=t;if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRelay)(e)){const{message:c}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",\"onSessionSettleRequest() relay protocol should be a string\");throw new Error(c)}const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidController)(s,\"onSessionSettleRequest()\");if(o)throw new Error(o.message);const a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespaces)(i,\"onSessionSettleRequest()\");if(a)throw new Error(a.message);if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(r)){const{message:c}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\",\"onSessionSettleRequest()\");throw new Error(c)}},this.isValidUpdate=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`update() params: ${t}`);throw new Error(a)}const{topic:e,namespaces:s}=t;this.checkRecentlyDeleted(e),await this.isValidSessionTopic(e);const i=this.client.session.get(e),r=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespaces)(s,\"update()\");if(r)throw new Error(r.message);const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isConformingNamespaces)(i.requiredNamespaces,s,\"update()\");if(o)throw new Error(o.message)},this.isValidExtend=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`extend() params: ${t}`);throw new Error(s)}const{topic:e}=t;this.checkRecentlyDeleted(e),await this.isValidSessionTopic(e)},this.isValidRequest=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() params: ${t}`);throw new Error(a)}const{topic:e,request:s,chainId:i,expiry:r}=t;this.checkRecentlyDeleted(e),await this.isValidSessionTopic(e);const{namespaces:o}=this.client.session.get(e);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespacesChainId)(o,i)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() chainId: ${i}`);throw new Error(a)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRequest)(s)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() ${JSON.stringify(s)}`);throw new Error(a)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespacesRequest)(o,i,s.method)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() method: ${s.method}`);throw new Error(a)}if(r&&!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidRequestExpiry)(r,he)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`request() expiry: ${r}. Expiry must be a number (in seconds) between ${he.min} and ${he.max}`);throw new Error(a)}},this.isValidRespond=async t=>{var e;if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`respond() params: ${t}`);throw new Error(r)}const{topic:s,response:i}=t;try{await this.isValidSessionTopic(s)}catch(r){throw(e=t?.response)!=null&&e.id&&this.cleanupAfterResponse(t),r}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidResponse)(i)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`respond() response: ${JSON.stringify(i)}`);throw new Error(r)}},this.isValidPing=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`ping() params: ${t}`);throw new Error(s)}const{topic:e}=t;await this.isValidSessionOrPairingTopic(e)},this.isValidEmit=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`emit() params: ${t}`);throw new Error(o)}const{topic:e,event:s,chainId:i}=t;await this.isValidSessionTopic(e);const{namespaces:r}=this.client.session.get(e);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespacesChainId)(r,i)){const{message:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`emit() chainId: ${i}`);throw new Error(o)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidEvent)(s)){const{message:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidNamespacesEvent)(r,i,s.name)){const{message:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidDisconnect=async t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidParams)(t)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`disconnect() params: ${t}`);throw new Error(s)}const{topic:e}=t;await this.isValidSessionOrPairingTopic(e)},this.isValidAuthenticate=t=>{const{chains:e,uri:s,domain:i,nonce:r}=t;if(!Array.isArray(e)||e.length===0)throw new Error(\"chains is required and must be a non-empty array\");if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(s,!1))throw new Error(\"uri is required parameter\");if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(i,!1))throw new Error(\"domain is required parameter\");if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(r,!1))throw new Error(\"nonce is required parameter\");if([...new Set(e.map(a=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.parseChainId)(a).namespace))].length>1)throw new Error(\"Multi-namespace requests are not supported. Please request single namespace only.\");const{namespace:o}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.parseChainId)(e[0]);if(o!==\"eip155\")throw new Error(\"Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.\")},this.getVerifyContext=async t=>{const{attestationId:e,hash:s,encryptedId:i,metadata:r}=t,o={verified:{verifyUrl:r.verifyUrl||_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.VERIFY_SERVER,validation:\"UNKNOWN\",origin:r.url||\"\"}};try{const a=await this.client.core.verify.resolve({attestationId:e,hash:s,encryptedId:i,verifyUrl:r.verifyUrl});a&&(o.verified.origin=a.origin,o.verified.isScam=a.isScam,o.verified.validation=a.origin===new URL(r.url).origin?\"VALID\":\"INVALID\")}catch(a){this.client.logger.warn(a)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,e)=>{Object.values(t).forEach(s=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(s,!1)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`${e} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(i)}})},this.getPendingAuthRequest=t=>{const e=this.client.auth.requests.get(t);return typeof e==\"object\"?e:void 0},this.addToRecentlyDeleted=(t,e)=>{if(this.recentlyDeletedMap.set(t,e),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(r)}}},this.checkRecentlyDeleted=t=>{const e=this.recentlyDeletedMap.get(t);if(e){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`Record was recently deleted - ${e}: ${t}`);throw new Error(s)}}}async isInitialized(){if(!this.initialized){const{message:n}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NOT_INITIALIZED\",this.name);throw new Error(n)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.RELAYER_EVENTS.message,n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):this.onRelayMessage(n)})}async onRelayMessage(n){const{topic:t,message:e,attestation:s}=n,{publicKey:i}=this.client.auth.authKeys.keys.includes(ie)?this.client.auth.authKeys.get(ie):{responseTopic:void 0,publicKey:void 0},r=await this.client.core.crypto.decode(t,e,{receiverPublicKey:i});try{(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcRequest)(r)?(this.client.core.history.set(t,r),this.onRelayEventRequest({topic:t,payload:r,attestation:s,encryptedId:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.hashMessage)(e)})):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isJsonRpcResponse)(r)?(await this.client.core.history.resolve(r),await this.onRelayEventResponse({topic:t,payload:r}),this.client.core.history.delete(t,r.id)):this.onRelayEventUnknownPayload({topic:t,payload:r})}catch(o){this.client.logger.error(o)}}registerExpirerEvents(){this.client.core.expirer.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.EXPIRER_EVENTS.expired,async n=>{const{topic:t,id:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.parseExpirerTarget)(n.target);if(e&&this.client.pendingRequest.keys.includes(e))return await this.deletePendingSessionRequest(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\"),!0);if(e&&this.client.auth.requests.keys.includes(e))return await this.deletePendingAuthRequest(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit(\"session_expire\",{topic:t})):e&&(await this.deleteProposal(e,!0),this.client.events.emit(\"proposal_expire\",{id:e}))})}registerPairingEvents(){this.client.core.pairing.events.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.PAIRING_EVENTS.create,n=>this.onPairingCreated(n)),this.client.core.pairing.events.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.PAIRING_EVENTS.delete,n=>{this.addToRecentlyDeleted(n.topic,\"pairing\")})}isValidPairingTopic(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(n,!1)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`pairing topic should be a string: ${n}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`pairing topic doesn't exist: ${n}`);throw new Error(t)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(this.client.core.pairing.pairings.get(n).expiry)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\",`pairing topic: ${n}`);throw new Error(t)}}async isValidSessionTopic(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(n,!1)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`session topic should be a string: ${n}`);throw new Error(t)}if(this.checkRecentlyDeleted(n),!this.client.session.keys.includes(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`session topic doesn't exist: ${n}`);throw new Error(t)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(this.client.session.get(n).expiry)){await this.deleteSession({topic:n});const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\",`session topic: ${n}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`session topic does not exist in keychain: ${n}`);throw await this.deleteSession({topic:n}),new Error(t)}}async isValidSessionOrPairingTopic(n){if(this.checkRecentlyDeleted(n),this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else if(this.client.core.pairing.pairings.keys.includes(n))this.isValidPairingTopic(n);else if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidString)(n,!1)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`session or pairing topic doesn't exist: ${n}`);throw new Error(t)}else{const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`session or pairing topic should be a string: ${n}`);throw new Error(t)}}async isValidProposalId(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isValidId)(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"MISSING_OR_INVALID\",`proposal id should be a number: ${n}`);throw new Error(t)}if(!this.client.proposal.keys.includes(n)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"NO_MATCHING_KEY\",`proposal id doesn't exist: ${n}`);throw new Error(t)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.isExpired)(this.client.proposal.get(n).expiryTimestamp)){await this.deleteProposal(n);const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getInternalError)(\"EXPIRED\",`proposal id: ${n}`);throw new Error(t)}}}class ns extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,Fe,ce),this.core=n,this.logger=t}}class it extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,He,ce),this.core=n,this.logger=t}}class os extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,Ye,ce,e=>e.id),this.core=n,this.logger=t}}class as extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,We,se,()=>ie),this.core=n,this.logger=t}}class cs extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,Ze,se),this.core=n,this.logger=t}}class ls extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Store{constructor(n,t){super(n,t,et,se,e=>e.id),this.core=n,this.logger=t}}class hs{constructor(n,t){this.core=n,this.logger=t,this.authKeys=new as(this.core,this.logger),this.pairingTopics=new cs(this.core,this.logger),this.requests=new ls(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class pe extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_4__.ISignClient{constructor(n){super(n),this.protocol=qe,this.version=ve,this.name=le.name,this.events=new events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter,this.on=(e,s)=>this.events.on(e,s),this.once=(e,s)=>this.events.once(e,s),this.off=(e,s)=>this.events.off(e,s),this.removeListener=(e,s)=>this.events.removeListener(e,s),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(s){throw this.logger.error(s.message),s}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(s){throw this.logger.error(s.message),s}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(s){throw this.logger.error(s.message),s}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(s){throw this.logger.error(s.message),s}},this.update=async e=>{try{return await this.engine.update(e)}catch(s){throw this.logger.error(s.message),s}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(s){throw this.logger.error(s.message),s}},this.request=async e=>{try{return await this.engine.request(e)}catch(s){throw this.logger.error(s.message),s}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(s){throw this.logger.error(s.message),s}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(s){throw this.logger.error(s.message),s}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(s){throw this.logger.error(s.message),s}},this.find=e=>{try{return this.engine.find(e)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.authenticate=async e=>{try{return await this.engine.authenticate(e)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(s){throw this.logger.error(s.message),s}},this.name=n?.name||le.name,this.metadata=n?.metadata||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_5__.getAppMetadata)(),this.signConfig=n?.signConfig;const t=typeof n?.logger<\"u\"&&typeof n?.logger!=\"string\"?n.logger:(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__.pino)((0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__.getDefaultLoggerOptions)({level:n?.logger||le.logger}));this.core=n?.core||new _walletconnect_core__WEBPACK_IMPORTED_MODULE_6__.Core(n),this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__.generateChildLogger)(t,this.name),this.session=new it(this.core,this.logger),this.proposal=new ns(this.core,this.logger),this.pendingRequest=new os(this.core,this.logger),this.engine=new rs(this),this.auth=new hs(this.core,this.logger)}static async init(n){const t=new pe(n);return await t.initialize(),t}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_0__.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace(\"Initialized\");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.logger.info(\"SignClient Initialization Success\"),this.engine.processRelayMessageCache()}catch(n){throw this.logger.info(\"SignClient Initialization Failure\"),this.logger.error(n.message),n}}}const ps=it,ds=pe;\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3Qrc2lnbi1jbGllbnRAMi4xNS4yX2J1ZmZlcnV0aWxANC4wLjhfdXRmLTgtdmFsaWRhdGVANS4wLjEwL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9zaWduLWNsaWVudC9kaXN0L2luZGV4LmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1Z0UscUNBQXFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxPQUFPLDhFQUE4RSxLQUFLLDBhQUEwYSxLQUFLLG9CQUFvQix3Q0FBd0Msa0dBQWtHLHdDQUF3Qyw0REFBRSxzQ0FBc0MsMkRBQUUsZ0JBQWdCLG1CQUFtQixLQUFLLElBQUksNkRBQUMsb0JBQW9CLE1BQU0sSUFBSSw2REFBQyxvQkFBb0IsU0FBUyxJQUFJLDZEQUFDLG9CQUFvQixhQUFhLElBQUksNkRBQUMscUJBQXFCLG1CQUFtQixLQUFLLElBQUksNkRBQUMsb0JBQW9CLE1BQU0sSUFBSSw2REFBQyxxQkFBcUIsbUJBQW1CLEtBQUssSUFBSSx3REFBQyxvQkFBb0IsTUFBTSxJQUFJLHdEQUFDLHFCQUFxQixtQkFBbUIsS0FBSyxJQUFJLHdEQUFDLG9CQUFvQixNQUFNLElBQUksd0RBQUMscUJBQXFCLG9CQUFvQixLQUFLLElBQUksNkRBQUMsb0JBQW9CLE1BQU0sSUFBSSw2REFBQyxxQkFBcUIsa0JBQWtCLEtBQUssSUFBSSw2REFBQyxvQkFBb0IsTUFBTSxJQUFJLDZEQUFDLHFCQUFxQixtQkFBbUIsS0FBSyxJQUFJLHdEQUFDLG9CQUFvQixNQUFNLElBQUksd0RBQUMscUJBQXFCLGlCQUFpQixLQUFLLElBQUksd0RBQUMsb0JBQW9CLE1BQU0sSUFBSSx3REFBQyxxQkFBcUIseUJBQXlCLEtBQUssSUFBSSx5REFBRSxvQkFBb0IsTUFBTSxJQUFJLHlEQUFFLG9CQUFvQixTQUFTLElBQUksNkRBQUMsb0JB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c0Msd0JBQXdCLElBQUksb0NBQW9DLFNBQVMsc0NBQXNDLHFCQUFxQixJQUFJLGlDQUFpQyxTQUFTLHNDQUFzQyxxQkFBcUIsSUFBSSxpQ0FBaUMsU0FBUyxzQ0FBc0MsMkJBQTJCLElBQUksdUNBQXVDLFNBQVMsc0NBQXNDLGVBQWUsSUFBSSwyQkFBMkIsU0FBUyxzQ0FBc0MscUNBQXFDLElBQUksK0NBQStDLFNBQVMsc0NBQXNDLDZCQUE2QixJQUFJLHlDQUF5QyxTQUFTLHNDQUFzQyw0QkFBNEIsSUFBSSx3Q0FBd0MsU0FBUyxzQ0FBc0MsMkNBQTJDLElBQUksdURBQXVELFNBQVMsc0NBQXNDLDBDQUEwQyxJQUFJLHNEQUFzRCxTQUFTLHNDQUFzQyx1REFBdUQsb0VBQUUsaUNBQWlDLGtFQUFrRSwyREFBRSxDQUFDLDhFQUFFLEVBQUUsMkJBQTJCLEdBQUcsdUJBQXVCLHFEQUFFLGdCQUFnQiwwRUFBRSx3TkFBd04scUJBQXFCLGtCQUFrQiw4QkFBOEIsY0FBYyxPQUFPLHVFQUFFLGNBQWMsY0FBYyxrQ0FBa0MsbUJBQW1CLGlDQUFpQyxJQUFJLDJQQUEyUCxTQUFTLDZGQUE2RixrQkFBKzBCO0FBQ3J3cUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZ29yaXNtLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3YWxsZXRjb25uZWN0K3NpZ24tY2xpZW50QDIuMTUuMl9idWZmZXJ1dGlsQDQuMC44X3V0Zi04LXZhbGlkYXRlQDUuMC4xMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnQvZGlzdC9pbmRleC5lcy5qcz80ZjU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydHtSRUxBWUVSX0RFRkFVTFRfUFJPVE9DT0wgYXMgb3QsRVZFTlRfQ0xJRU5UX1NFU1NJT05fVFJBQ0VTIGFzIEMsRVZFTlRfQ0xJRU5UX1NFU1NJT05fRVJST1JTIGFzIFUsRVZFTlRfQ0xJRU5UX0FVVEhFTlRJQ0FURV9UUkFDRVMgYXMgRyxFVkVOVF9DTElFTlRfQVVUSEVOVElDQVRFX0VSUk9SUyBhcyBaLEVWRU5UX0NMSUVOVF9QQUlSSU5HX0VSUk9SUyBhcyBhdCxFVkVOVF9DTElFTlRfUEFJUklOR19UUkFDRVMgYXMgY3QsUkVMQVlFUl9FVkVOVFMgYXMgQWUsVkVSSUZZX1NFUlZFUiBhcyBsdCxFWFBJUkVSX0VWRU5UUyBhcyBodCxQQUlSSU5HX0VWRU5UUyBhcyBDZSxTdG9yZSBhcyBILENvcmUgYXMgcHR9ZnJvbVwiQHdhbGxldGNvbm5lY3QvY29yZVwiO2ltcG9ydHtwaW5vIGFzIGR0LGdldERlZmF1bHRMb2dnZXJPcHRpb25zIGFzIHV0LGdlbmVyYXRlQ2hpbGRMb2dnZXIgYXMgZ3QsZ2V0TG9nZ2VyQ29udGV4dCBhcyB3dH1mcm9tXCJAd2FsbGV0Y29ubmVjdC9sb2dnZXJcIjtpbXBvcnR7SUVuZ2luZSBhcyB5dCxJU2lnbkNsaWVudCBhcyBtdH1mcm9tXCJAd2FsbGV0Y29ubmVjdC90eXBlc1wiO2ltcG9ydHtnZXRJbnRlcm5hbEVycm9yIGFzIHAsY2FsY0V4cGlyeSBhcyBULGNyZWF0ZURlbGF5ZWRQcm9taXNlIGFzIHosZW5naW5lRXZlbnQgYXMgdyxnZXRTZGtFcnJvciBhcyBOLGdldERlZXBMaW5rIGFzIF90LGhhbmRsZURlZXBsaW5rUmVkaXJlY3QgYXMgRXQsaXNTZXNzaW9uQ29tcGF0aWJsZSBhcyBSdCxoYXNoS2V5IGFzIF9lLHBhcnNlQ2hhaW5JZCBhcyBFZSxjcmVhdGVFbmNvZGVkUmVjYXAgYXMgU3QsZ2V0UmVjYXBGcm9tUmVzb3VyY2VzIGFzIFJlLG1lcmdlRW5jb2RlZFJlY2FwcyBhcyBJdCx2YWxpZGF0ZVNpZ25lZENhY2FvIGFzIGJlLGdldE5hbWVzcGFjZWREaWRDaGFpbklkIGFzIHhlLGdldERpZEFkZHJlc3MgYXMgRGUsZ2V0TWV0aG9kc0Zyb21SZWNhcCBhcyBWZSxnZXRDaGFpbnNGcm9tUmVjYXAgYXMgTWUsYnVpbGROYW1lc3BhY2VzRnJvbUF1dGggYXMgTGUsZm9ybWF0TWVzc2FnZSBhcyBmdCxoYXNoTWVzc2FnZSBhcyBZLGlzRXhwaXJlZCBhcyBYLE1lbW9yeVN0b3JlIGFzIGVlLGlzVmFsaWRQYXJhbXMgYXMgYixpc1VuZGVmaW5lZCBhcyB0ZSxpc1ZhbGlkUmVsYXlzIGFzIHF0LGlzVmFsaWRPYmplY3QgYXMgJGUsaXNWYWxpZFJlcXVpcmVkTmFtZXNwYWNlcyBhcyB2dCxpc1ZhbGlkTmFtZXNwYWNlcyBhcyBTZSxpc0NvbmZvcm1pbmdOYW1lc3BhY2VzIGFzIEtlLGlzVmFsaWRTdHJpbmcgYXMgVixpc1ZhbGlkRXJyb3JSZWFzb24gYXMgTnQsaXNWYWxpZFJlbGF5IGFzIFB0LGlzVmFsaWRDb250cm9sbGVyIGFzIFR0LGlzVmFsaWROYW1lc3BhY2VzQ2hhaW5JZCBhcyBVZSxpc1ZhbGlkUmVxdWVzdCBhcyBPdCxpc1ZhbGlkTmFtZXNwYWNlc1JlcXVlc3QgYXMgQXQsaXNWYWxpZFJlcXVlc3RFeHBpcnkgYXMgQ3QsaXNWYWxpZFJlc3BvbnNlIGFzIGJ0LGlzVmFsaWRFdmVudCBhcyB4dCxpc1ZhbGlkTmFtZXNwYWNlc0V2ZW50IGFzIER0LHBhcnNlRXhwaXJlclRhcmdldCBhcyBWdCxpc1ZhbGlkSWQgYXMgTXQsVFlQRV8xIGFzIEllLGdldEFwcE1ldGFkYXRhIGFzIEx0fWZyb21cIkB3YWxsZXRjb25uZWN0L3V0aWxzXCI7aW1wb3J0ICR0LHtFdmVudEVtaXR0ZXIgYXMgS3R9ZnJvbVwiZXZlbnRzXCI7aW1wb3J0e1RISVJUWV9EQVlTIGFzIFV0LFNFVkVOX0RBWVMgYXMgR2UsRklWRV9NSU5VVEVTIGFzIFAsT05FX0RBWSBhcyBNLE9ORV9IT1VSIGFzIGtlLE9ORV9TRUNPTkQgYXMgR3QsdG9NaWxpc2Vjb25kcyBhcyBqZX1mcm9tXCJAd2FsbGV0Y29ubmVjdC90aW1lXCI7aW1wb3J0e3BheWxvYWRJZCBhcyBKLGdldEJpZ0ludFJwY0lkIGFzIGFlLGlzSnNvblJwY1Jlc3VsdCBhcyBMLGlzSnNvblJwY0Vycm9yIGFzICQsZm9ybWF0SnNvblJwY1JlcXVlc3QgYXMgZmUsZm9ybWF0SnNvblJwY1Jlc3VsdCBhcyBrdCxmb3JtYXRKc29uUnBjRXJyb3IgYXMganQsaXNKc29uUnBjUmVxdWVzdCBhcyBGdCxpc0pzb25ScGNSZXNwb25zZSBhcyBRdH1mcm9tXCJAd2FsbGV0Y29ubmVjdC9qc29ucnBjLXV0aWxzXCI7Y29uc3QgcWU9XCJ3Y1wiLHZlPTIsTmU9XCJjbGllbnRcIixjZT1gJHtxZX1AJHt2ZX06JHtOZX06YCxsZT17bmFtZTpOZSxsb2dnZXI6XCJlcnJvclwiLGNvbnRyb2xsZXI6ITEscmVsYXlVcmw6XCJ3c3M6Ly9yZWxheS53YWxsZXRjb25uZWN0LmNvbVwifSxIdD17c2Vzc2lvbl9wcm9wb3NhbDpcInNlc3Npb25fcHJvcG9zYWxcIixzZXNzaW9uX3VwZGF0ZTpcInNlc3Npb25fdXBkYXRlXCIsc2Vzc2lvbl9leHRlbmQ6XCJzZXNzaW9uX2V4dGVuZFwiLHNlc3Npb25fcGluZzpcInNlc3Npb25fcGluZ1wiLHNlc3Npb25fZGVsZXRlOlwic2Vzc2lvbl9kZWxldGVcIixzZXNzaW9uX2V4cGlyZTpcInNlc3Npb25fZXhwaXJlXCIsc2Vzc2lvbl9yZXF1ZXN0Olwic2Vzc2lvbl9yZXF1ZXN0XCIsc2Vzc2lvbl9yZXF1ZXN0X3NlbnQ6XCJzZXNzaW9uX3JlcXVlc3Rfc2VudFwiLHNlc3Npb25fZXZlbnQ6XCJzZXNzaW9uX2V2ZW50XCIscHJvcG9zYWxfZXhwaXJlOlwicHJvcG9zYWxfZXhwaXJlXCIsc2Vzc2lvbl9hdXRoZW50aWNhdGU6XCJzZXNzaW9uX2F1dGhlbnRpY2F0ZVwiLHNlc3Npb25fcmVxdWVzdF9leHBpcmU6XCJzZXNzaW9uX3JlcXVlc3RfZXhwaXJlXCJ9LHp0PXtkYXRhYmFzZTpcIjptZW1vcnk6XCJ9LFBlPVwiV0FMTEVUQ09OTkVDVF9ERUVQTElOS19DSE9JQ0VcIixZdD17Y3JlYXRlZDpcImhpc3RvcnlfY3JlYXRlZFwiLHVwZGF0ZWQ6XCJoaXN0b3J5X3VwZGF0ZWRcIixkZWxldGVkOlwiaGlzdG9yeV9kZWxldGVkXCIsc3luYzpcImhpc3Rvcnlfc3luY1wifSxYdD1cImhpc3RvcnlcIixKdD1cIjAuM1wiLEZlPVwicHJvcG9zYWxcIixCdD1VdCxRZT1cIlByb3Bvc2FsIGV4cGlyZWRcIixIZT1cInNlc3Npb25cIixrPUdlLHplPVwiZW5naW5lXCIsUz17d2Nfc2Vzc2lvblByb3Bvc2U6e3JlcTp7dHRsOlAscHJvbXB0OiEwLHRhZzoxMTAwfSxyZXM6e3R0bDpQLHByb21wdDohMSx0YWc6MTEwMX0scmVqZWN0Ont0dGw6UCxwcm9tcHQ6ITEsdGFnOjExMjB9LGF1dG9SZWplY3Q6e3R0bDpQLHByb21wdDohMSx0YWc6MTEyMX19LHdjX3Nlc3Npb25TZXR0bGU6e3JlcTp7dHRsOlAscHJvbXB0OiExLHRhZzoxMTAyfSxyZXM6e3R0bDpQLHByb21wdDohMSx0YWc6MTEwM319LHdjX3Nlc3Npb25VcGRhdGU6e3JlcTp7dHRsOk0scHJvbXB0OiExLHRhZzoxMTA0fSxyZXM6e3R0bDpNLHByb21wdDohMSx0YWc6MTEwNX19LHdjX3Nlc3Npb25FeHRlbmQ6e3JlcTp7dHRsOk0scHJvbXB0OiExLHRhZzoxMTA2fSxyZXM6e3R0bDpNLHByb21wdDohMSx0YWc6MTEwN319LHdjX3Nlc3Npb25SZXF1ZXN0OntyZXE6e3R0bDpQLHByb21wdDohMCx0YWc6MTEwOH0scmVzOnt0dGw6UCxwcm9tcHQ6ITEsdGFnOjExMDl9fSx3Y19zZXNzaW9uRXZlbnQ6e3JlcTp7dHRsOlAscHJvbXB0OiEwLHRhZzoxMTEwfSxyZXM6e3R0bDpQLHByb21wdDohMSx0YWc6MTExMX19LHdjX3Nlc3Npb25EZWxldGU6e3JlcTp7dHRsOk0scHJvbXB0OiExLHRhZzoxMTEyfSxyZXM6e3R0bDpNLHByb21wdDohMSx0YWc6MTExM319LHdjX3Nlc3Npb25QaW5nOntyZXE6e3R0bDpNLHByb21wdDohMSx0YWc6MTExNH0scmVzOnt0dGw6TSxwcm9tcHQ6ITEsdGFnOjExMTV9fSx3Y19zZXNzaW9uQXV0aGVudGljYXRlOntyZXE6e3R0bDprZSxwcm9tcHQ6ITAsdGFnOjExMTZ9LHJlczp7dHRsOmtlLHByb21wdDohMSx0YWc6MTExN30scmVqZWN0Ont0dGw6UCxwcm9tcHQ6ITEsdGFnOjExMTh9LGF1dG9SZWplY3Q6e3R0bDpQLHByb21wdDohMSx0YWc6MTExOX19fSxoZT17bWluOlAsbWF4OkdlfSx4PXtpZGxlOlwiSURMRVwiLGFjdGl2ZTpcIkFDVElWRVwifSxZZT1cInJlcXVlc3RcIixYZT1bXCJ3Y19zZXNzaW9uUHJvcG9zZVwiLFwid2Nfc2Vzc2lvblJlcXVlc3RcIixcIndjX2F1dGhSZXF1ZXN0XCIsXCJ3Y19zZXNzaW9uQXV0aGVudGljYXRlXCJdLEplPVwid2NcIixXdD0xLjUsQmU9XCJhdXRoXCIsV2U9XCJhdXRoS2V5c1wiLFplPVwicGFpcmluZ1RvcGljc1wiLGV0PVwicmVxdWVzdHNcIixzZT1gJHtKZX1AJHsxLjV9OiR7QmV9OmAsaWU9YCR7c2V9OlBVQl9LRVlgO3ZhciBadD1PYmplY3QuZGVmaW5lUHJvcGVydHksZXM9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsdHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsdHQ9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxzcz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGlzPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsc3Q9KEksbix0KT0+biBpbiBJP1p0KEksbix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOklbbl09dCxFPShJLG4pPT57Zm9yKHZhciB0IGluIG58fChuPXt9KSlzcy5jYWxsKG4sdCkmJnN0KEksdCxuW3RdKTtpZih0dClmb3IodmFyIHQgb2YgdHQobikpaXMuY2FsbChuLHQpJiZzdChJLHQsblt0XSk7cmV0dXJuIEl9LGo9KEksbik9PmVzKEksdHMobikpO2NsYXNzIHJzIGV4dGVuZHMgeXR7Y29uc3RydWN0b3Iobil7c3VwZXIobiksdGhpcy5uYW1lPXplLHRoaXMuZXZlbnRzPW5ldyAkdCx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMucmVxdWVzdFF1ZXVlPXtzdGF0ZTp4LmlkbGUscXVldWU6W119LHRoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZT17c3RhdGU6eC5pZGxlLHF1ZXVlOltdfSx0aGlzLnJlcXVlc3RRdWV1ZURlbGF5PUd0LHRoaXMuZXhwZWN0ZWRQYWlyaW5nTWV0aG9kTWFwPW5ldyBNYXAsdGhpcy5yZWNlbnRseURlbGV0ZWRNYXA9bmV3IE1hcCx0aGlzLnJlY2VudGx5RGVsZXRlZExpbWl0PTIwMCx0aGlzLnJlbGF5TWVzc2FnZUNhY2hlPVtdLHRoaXMuaW5pdD1hc3luYygpPT57dGhpcy5pbml0aWFsaXplZHx8KGF3YWl0IHRoaXMuY2xlYW51cCgpLHRoaXMucmVnaXN0ZXJSZWxheWVyRXZlbnRzKCksdGhpcy5yZWdpc3RlckV4cGlyZXJFdmVudHMoKSx0aGlzLnJlZ2lzdGVyUGFpcmluZ0V2ZW50cygpLHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5yZWdpc3Rlcih7bWV0aG9kczpPYmplY3Qua2V5cyhTKX0pLHRoaXMuaW5pdGlhbGl6ZWQ9ITAsc2V0VGltZW91dCgoKT0+e3RoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZS5xdWV1ZT10aGlzLmdldFBlbmRpbmdTZXNzaW9uUmVxdWVzdHMoKSx0aGlzLnByb2Nlc3NTZXNzaW9uUmVxdWVzdFF1ZXVlKCl9LGplKHRoaXMucmVxdWVzdFF1ZXVlRGVsYXkpKSl9LHRoaXMuY29ubmVjdD1hc3luYyB0PT57YXdhaXQgdGhpcy5pc0luaXRpYWxpemVkKCk7Y29uc3QgZT1qKEUoe30sdCkse3JlcXVpcmVkTmFtZXNwYWNlczp0LnJlcXVpcmVkTmFtZXNwYWNlc3x8e30sb3B0aW9uYWxOYW1lc3BhY2VzOnQub3B0aW9uYWxOYW1lc3BhY2VzfHx7fX0pO2F3YWl0IHRoaXMuaXNWYWxpZENvbm5lY3QoZSk7Y29uc3R7cGFpcmluZ1RvcGljOnMscmVxdWlyZWROYW1lc3BhY2VzOmksb3B0aW9uYWxOYW1lc3BhY2VzOnIsc2Vzc2lvblByb3BlcnRpZXM6byxyZWxheXM6YX09ZTtsZXQgYz1zLGgsbD0hMTt0cnl7YyYmKGw9dGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmdldChjKS5hY3RpdmUpfWNhdGNoKHkpe3Rocm93IHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihgY29ubmVjdCgpIC0+IHBhaXJpbmcuZ2V0KCR7Y30pIGZhaWxlZGApLHl9aWYoIWN8fCFsKXtjb25zdHt0b3BpYzp5LHVyaTpSfT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuY3JlYXRlKCk7Yz15LGg9Un1pZighYyl7Y29uc3R7bWVzc2FnZTp5fT1wKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYGNvbm5lY3QoKSBwYWlyaW5nIHRvcGljOiAke2N9YCk7dGhyb3cgbmV3IEVycm9yKHkpfWNvbnN0IGc9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZ2VuZXJhdGVLZXlQYWlyKCksZD1TLndjX3Nlc3Npb25Qcm9wb3NlLnJlcS50dGx8fFAsdT1UKGQpLF89RSh7cmVxdWlyZWROYW1lc3BhY2VzOmksb3B0aW9uYWxOYW1lc3BhY2VzOnIscmVsYXlzOmE/P1t7cHJvdG9jb2w6b3R9XSxwcm9wb3Nlcjp7cHVibGljS2V5OmcsbWV0YWRhdGE6dGhpcy5jbGllbnQubWV0YWRhdGF9LGV4cGlyeVRpbWVzdGFtcDp1LHBhaXJpbmdUb3BpYzpjfSxvJiZ7c2Vzc2lvblByb3BlcnRpZXM6b30pLHtyZWplY3Q6cSxyZXNvbHZlOm0sZG9uZTpPfT16KGQsUWUpO3RoaXMuZXZlbnRzLm9uY2UodyhcInNlc3Npb25fY29ubmVjdFwiKSxhc3luYyh7ZXJyb3I6eSxzZXNzaW9uOlJ9KT0+e2lmKHkpcSh5KTtlbHNlIGlmKFIpe1Iuc2VsZi5wdWJsaWNLZXk9Zztjb25zdCBLPWooRSh7fSxSKSx7cGFpcmluZ1RvcGljOl8ucGFpcmluZ1RvcGljLHJlcXVpcmVkTmFtZXNwYWNlczpfLnJlcXVpcmVkTmFtZXNwYWNlcyxvcHRpb25hbE5hbWVzcGFjZXM6Xy5vcHRpb25hbE5hbWVzcGFjZXN9KTthd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLnNldChSLnRvcGljLEspLGF3YWl0IHRoaXMuc2V0RXhwaXJ5KFIudG9waWMsUi5leHBpcnkpLGMmJmF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy51cGRhdGVNZXRhZGF0YSh7dG9waWM6YyxtZXRhZGF0YTpSLnBlZXIubWV0YWRhdGF9KSx0aGlzLmNsZWFudXBEdXBsaWNhdGVQYWlyaW5ncyhLKSxtKEspfX0pO2NvbnN0IEQ9YXdhaXQgdGhpcy5zZW5kUmVxdWVzdCh7dG9waWM6YyxtZXRob2Q6XCJ3Y19zZXNzaW9uUHJvcG9zZVwiLHBhcmFtczpfLHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSk7cmV0dXJuIGF3YWl0IHRoaXMuc2V0UHJvcG9zYWwoRCxFKHtpZDpEfSxfKSkse3VyaTpoLGFwcHJvdmFsOk99fSx0aGlzLnBhaXI9YXN5bmMgdD0+e2F3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpO3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXIodCl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKFwicGFpcigpIGZhaWxlZFwiKSxlfX0sdGhpcy5hcHByb3ZlPWFzeW5jIHQ9Pnt2YXIgZSxzLGk7Y29uc3Qgcj10aGlzLmNsaWVudC5jb3JlLmV2ZW50Q2xpZW50LmNyZWF0ZUV2ZW50KHtwcm9wZXJ0aWVzOnt0b3BpYzooZT10Py5pZCk9PW51bGw/dm9pZCAwOmUudG9TdHJpbmcoKSx0cmFjZTpbQy5zZXNzaW9uX2FwcHJvdmVfc3RhcnRlZF19fSk7dHJ5e2F3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpfWNhdGNoKGYpe3Rocm93IHIuc2V0RXJyb3IoVS5ub19pbnRlcm5ldF9jb25uZWN0aW9uKSxmfXRyeXthd2FpdCB0aGlzLmlzVmFsaWRQcm9wb3NhbElkKHQ/LmlkKX1jYXRjaChmKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYGFwcHJvdmUoKSAtPiBwcm9wb3NhbC5nZXQoJHt0Py5pZH0pIGZhaWxlZGApLHIuc2V0RXJyb3IoVS5wcm9wb3NhbF9ub3RfZm91bmQpLGZ9dHJ5e2F3YWl0IHRoaXMuaXNWYWxpZEFwcHJvdmUodCl9Y2F0Y2goZil7dGhyb3cgdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKFwiYXBwcm92ZSgpIC0+IGlzVmFsaWRBcHByb3ZlKCkgZmFpbGVkXCIpLHIuc2V0RXJyb3IoVS5zZXNzaW9uX2FwcHJvdmVfbmFtZXNwYWNlX3ZhbGlkYXRpb25fZmFpbHVyZSksZn1jb25zdHtpZDpvLHJlbGF5UHJvdG9jb2w6YSxuYW1lc3BhY2VzOmMsc2Vzc2lvblByb3BlcnRpZXM6aCxzZXNzaW9uQ29uZmlnOmx9PXQsZz10aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQobyk7dGhpcy5jbGllbnQuY29yZS5ldmVudENsaWVudC5kZWxldGVFdmVudCh7ZXZlbnRJZDpyLmV2ZW50SWR9KTtjb25zdHtwYWlyaW5nVG9waWM6ZCxwcm9wb3Nlcjp1LHJlcXVpcmVkTmFtZXNwYWNlczpfLG9wdGlvbmFsTmFtZXNwYWNlczpxfT1nO2xldCBtPShzPXRoaXMuY2xpZW50LmNvcmUuZXZlbnRDbGllbnQpPT1udWxsP3ZvaWQgMDpzLmdldEV2ZW50KHt0b3BpYzpkfSk7bXx8KG09KGk9dGhpcy5jbGllbnQuY29yZS5ldmVudENsaWVudCk9PW51bGw/dm9pZCAwOmkuY3JlYXRlRXZlbnQoe3R5cGU6Qy5zZXNzaW9uX2FwcHJvdmVfc3RhcnRlZCxwcm9wZXJ0aWVzOnt0b3BpYzpkLHRyYWNlOltDLnNlc3Npb25fYXBwcm92ZV9zdGFydGVkLEMuc2Vzc2lvbl9uYW1lc3BhY2VzX3ZhbGlkYXRpb25fc3VjY2Vzc119fSkpO2NvbnN0IE89YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZ2VuZXJhdGVLZXlQYWlyKCksRD11LnB1YmxpY0tleSx5PWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmdlbmVyYXRlU2hhcmVkS2V5KE8sRCksUj1FKEUoe3JlbGF5Ontwcm90b2NvbDphPz9cImlyblwifSxuYW1lc3BhY2VzOmMsY29udHJvbGxlcjp7cHVibGljS2V5Ok8sbWV0YWRhdGE6dGhpcy5jbGllbnQubWV0YWRhdGF9LGV4cGlyeTpUKGspfSxoJiZ7c2Vzc2lvblByb3BlcnRpZXM6aH0pLGwmJntzZXNzaW9uQ29uZmlnOmx9KTttLmFkZFRyYWNlKEMuc3Vic2NyaWJpbmdfc2Vzc2lvbl90b3BpYyk7dHJ5e2F3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmUoeSl9Y2F0Y2goZil7dGhyb3cgbS5zZXRFcnJvcihVLnN1YnNjcmliZV9zZXNzaW9uX3RvcGljX2ZhaWx1cmUpLGZ9bS5hZGRUcmFjZShDLnN1YnNjcmliZV9zZXNzaW9uX3RvcGljX3N1Y2Nlc3MpO2NvbnN0IEs9aihFKHt9LFIpLHt0b3BpYzp5LHJlcXVpcmVkTmFtZXNwYWNlczpfLG9wdGlvbmFsTmFtZXNwYWNlczpxLHBhaXJpbmdUb3BpYzpkLGFja25vd2xlZGdlZDohMSxzZWxmOlIuY29udHJvbGxlcixwZWVyOntwdWJsaWNLZXk6dS5wdWJsaWNLZXksbWV0YWRhdGE6dS5tZXRhZGF0YX0sY29udHJvbGxlcjpPfSk7YXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi5zZXQoeSxLKSxtLmFkZFRyYWNlKEMuc3RvcmVfc2Vzc2lvbik7dHJ5e20uYWRkVHJhY2UoQy5wdWJsaXNoaW5nX3Nlc3Npb25fc2V0dGxlKSxhd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KHt0b3BpYzp5LG1ldGhvZDpcIndjX3Nlc3Npb25TZXR0bGVcIixwYXJhbXM6Uix0aHJvd09uRmFpbGVkUHVibGlzaDohMH0pLmNhdGNoKGY9Pnt0aHJvdyBtPy5zZXRFcnJvcihVLnNlc3Npb25fc2V0dGxlX3B1Ymxpc2hfZmFpbHVyZSksZn0pLG0uYWRkVHJhY2UoQy5zZXNzaW9uX3NldHRsZV9wdWJsaXNoX3N1Y2Nlc3MpLG0uYWRkVHJhY2UoQy5wdWJsaXNoaW5nX3Nlc3Npb25fYXBwcm92ZSksYXdhaXQgdGhpcy5zZW5kUmVzdWx0KHtpZDpvLHRvcGljOmQscmVzdWx0OntyZWxheTp7cHJvdG9jb2w6YT8/XCJpcm5cIn0scmVzcG9uZGVyUHVibGljS2V5Ok99LHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSkuY2F0Y2goZj0+e3Rocm93IG0/LnNldEVycm9yKFUuc2Vzc2lvbl9hcHByb3ZlX3B1Ymxpc2hfZmFpbHVyZSksZn0pLG0uYWRkVHJhY2UoQy5zZXNzaW9uX2FwcHJvdmVfcHVibGlzaF9zdWNjZXNzKX1jYXRjaChmKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoZiksdGhpcy5jbGllbnQuc2Vzc2lvbi5kZWxldGUoeSxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci51bnN1YnNjcmliZSh5KSxmfXJldHVybiB0aGlzLmNsaWVudC5jb3JlLmV2ZW50Q2xpZW50LmRlbGV0ZUV2ZW50KHtldmVudElkOm0uZXZlbnRJZH0pLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy51cGRhdGVNZXRhZGF0YSh7dG9waWM6ZCxtZXRhZGF0YTp1Lm1ldGFkYXRhfSksYXdhaXQgdGhpcy5jbGllbnQucHJvcG9zYWwuZGVsZXRlKG8sTihcIlVTRVJfRElTQ09OTkVDVEVEXCIpKSxhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuYWN0aXZhdGUoe3RvcGljOmR9KSxhd2FpdCB0aGlzLnNldEV4cGlyeSh5LFQoaykpLHt0b3BpYzp5LGFja25vd2xlZGdlZDooKT0+UHJvbWlzZS5yZXNvbHZlKHRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KHkpKX19LHRoaXMucmVqZWN0PWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkUmVqZWN0KHQpfWNhdGNoKHIpe3Rocm93IHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihcInJlamVjdCgpIC0+IGlzVmFsaWRSZWplY3QoKSBmYWlsZWRcIikscn1jb25zdHtpZDplLHJlYXNvbjpzfT10O2xldCBpO3RyeXtpPXRoaXMuY2xpZW50LnByb3Bvc2FsLmdldChlKS5wYWlyaW5nVG9waWN9Y2F0Y2gocil7dGhyb3cgdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGByZWplY3QoKSAtPiBwcm9wb3NhbC5nZXQoJHtlfSkgZmFpbGVkYCkscn1pJiYoYXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOmUsdG9waWM6aSxlcnJvcjpzLHJwY09wdHM6Uy53Y19zZXNzaW9uUHJvcG9zZS5yZWplY3R9KSxhd2FpdCB0aGlzLmNsaWVudC5wcm9wb3NhbC5kZWxldGUoZSxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpKX0sdGhpcy51cGRhdGU9YXN5bmMgdD0+e2F3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpO3RyeXthd2FpdCB0aGlzLmlzVmFsaWRVcGRhdGUodCl9Y2F0Y2gobCl7dGhyb3cgdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKFwidXBkYXRlKCkgLT4gaXNWYWxpZFVwZGF0ZSgpIGZhaWxlZFwiKSxsfWNvbnN0e3RvcGljOmUsbmFtZXNwYWNlczpzfT10LHtkb25lOmkscmVzb2x2ZTpyLHJlamVjdDpvfT16KCksYT1KKCksYz1hZSgpLnRvU3RyaW5nKCksaD10aGlzLmNsaWVudC5zZXNzaW9uLmdldChlKS5uYW1lc3BhY2VzO3JldHVybiB0aGlzLmV2ZW50cy5vbmNlKHcoXCJzZXNzaW9uX3VwZGF0ZVwiLGEpLCh7ZXJyb3I6bH0pPT57bD9vKGwpOnIoKX0pLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKGUse25hbWVzcGFjZXM6c30pLGF3YWl0IHRoaXMuc2VuZFJlcXVlc3Qoe3RvcGljOmUsbWV0aG9kOlwid2Nfc2Vzc2lvblVwZGF0ZVwiLHBhcmFtczp7bmFtZXNwYWNlczpzfSx0aHJvd09uRmFpbGVkUHVibGlzaDohMCxjbGllbnRScGNJZDphLHJlbGF5UnBjSWQ6Y30pLmNhdGNoKGw9Pnt0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IobCksdGhpcy5jbGllbnQuc2Vzc2lvbi51cGRhdGUoZSx7bmFtZXNwYWNlczpofSksbyhsKX0pLHthY2tub3dsZWRnZWQ6aX19LHRoaXMuZXh0ZW5kPWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkRXh0ZW5kKHQpfWNhdGNoKGEpe3Rocm93IHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihcImV4dGVuZCgpIC0+IGlzVmFsaWRFeHRlbmQoKSBmYWlsZWRcIiksYX1jb25zdHt0b3BpYzplfT10LHM9SigpLHtkb25lOmkscmVzb2x2ZTpyLHJlamVjdDpvfT16KCk7cmV0dXJuIHRoaXMuZXZlbnRzLm9uY2UodyhcInNlc3Npb25fZXh0ZW5kXCIscyksKHtlcnJvcjphfSk9PnthP28oYSk6cigpfSksYXdhaXQgdGhpcy5zZXRFeHBpcnkoZSxUKGspKSx0aGlzLnNlbmRSZXF1ZXN0KHt0b3BpYzplLG1ldGhvZDpcIndjX3Nlc3Npb25FeHRlbmRcIixwYXJhbXM6e30sY2xpZW50UnBjSWQ6cyx0aHJvd09uRmFpbGVkUHVibGlzaDohMH0pLmNhdGNoKGE9PntvKGEpfSkse2Fja25vd2xlZGdlZDppfX0sdGhpcy5yZXF1ZXN0PWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkUmVxdWVzdCh0KX1jYXRjaChkKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoXCJyZXF1ZXN0KCkgLT4gaXNWYWxpZFJlcXVlc3QoKSBmYWlsZWRcIiksZH1jb25zdHtjaGFpbklkOmUscmVxdWVzdDpzLHRvcGljOmksZXhwaXJ5OnI9Uy53Y19zZXNzaW9uUmVxdWVzdC5yZXEudHRsfT10LG89dGhpcy5jbGllbnQuc2Vzc2lvbi5nZXQoaSksYT1KKCksYz1hZSgpLnRvU3RyaW5nKCkse2RvbmU6aCxyZXNvbHZlOmwscmVqZWN0Omd9PXoocixcIlJlcXVlc3QgZXhwaXJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7cmV0dXJuIHRoaXMuZXZlbnRzLm9uY2UodyhcInNlc3Npb25fcmVxdWVzdFwiLGEpLCh7ZXJyb3I6ZCxyZXN1bHQ6dX0pPT57ZD9nKGQpOmwodSl9KSxhd2FpdCBQcm9taXNlLmFsbChbbmV3IFByb21pc2UoYXN5bmMgZD0+e2F3YWl0IHRoaXMuc2VuZFJlcXVlc3Qoe2NsaWVudFJwY0lkOmEscmVsYXlScGNJZDpjLHRvcGljOmksbWV0aG9kOlwid2Nfc2Vzc2lvblJlcXVlc3RcIixwYXJhbXM6e3JlcXVlc3Q6aihFKHt9LHMpLHtleHBpcnlUaW1lc3RhbXA6VChyKX0pLGNoYWluSWQ6ZX0sZXhwaXJ5OnIsdGhyb3dPbkZhaWxlZFB1Ymxpc2g6ITB9KS5jYXRjaCh1PT5nKHUpKSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInNlc3Npb25fcmVxdWVzdF9zZW50XCIse3RvcGljOmkscmVxdWVzdDpzLGNoYWluSWQ6ZSxpZDphfSksZCgpfSksbmV3IFByb21pc2UoYXN5bmMgZD0+e3ZhciB1O2lmKCEoKHU9by5zZXNzaW9uQ29uZmlnKSE9bnVsbCYmdS5kaXNhYmxlRGVlcExpbmspKXtjb25zdCBfPWF3YWl0IF90KHRoaXMuY2xpZW50LmNvcmUuc3RvcmFnZSxQZSk7RXQoe2lkOmEsdG9waWM6aSx3Y0RlZXBMaW5rOl99KX1kKCl9KSxoKCldKS50aGVuKGQ9PmRbMl0pfSx0aGlzLnJlc3BvbmQ9YXN5bmMgdD0+e2F3YWl0IHRoaXMuaXNJbml0aWFsaXplZCgpLGF3YWl0IHRoaXMuaXNWYWxpZFJlc3BvbmQodCk7Y29uc3R7dG9waWM6ZSxyZXNwb25zZTpzfT10LHtpZDppfT1zO0wocyk/YXdhaXQgdGhpcy5zZW5kUmVzdWx0KHtpZDppLHRvcGljOmUscmVzdWx0OnMucmVzdWx0LHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSk6JChzKSYmYXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOmksdG9waWM6ZSxlcnJvcjpzLmVycm9yfSksdGhpcy5jbGVhbnVwQWZ0ZXJSZXNwb25zZSh0KX0sdGhpcy5waW5nPWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkUGluZyh0KX1jYXRjaChzKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoXCJwaW5nKCkgLT4gaXNWYWxpZFBpbmcoKSBmYWlsZWRcIiksc31jb25zdHt0b3BpYzplfT10O2lmKHRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhlKSl7Y29uc3Qgcz1KKCksaT1hZSgpLnRvU3RyaW5nKCkse2RvbmU6cixyZXNvbHZlOm8scmVqZWN0OmF9PXooKTt0aGlzLmV2ZW50cy5vbmNlKHcoXCJzZXNzaW9uX3BpbmdcIixzKSwoe2Vycm9yOmN9KT0+e2M/YShjKTpvKCl9KSxhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5zZW5kUmVxdWVzdCh7dG9waWM6ZSxtZXRob2Q6XCJ3Y19zZXNzaW9uUGluZ1wiLHBhcmFtczp7fSx0aHJvd09uRmFpbGVkUHVibGlzaDohMCxjbGllbnRScGNJZDpzLHJlbGF5UnBjSWQ6aX0pLHIoKV0pfWVsc2UgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMoZSkmJmF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5waW5nKHt0b3BpYzplfSl9LHRoaXMuZW1pdD1hc3luYyB0PT57YXdhaXQgdGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkRW1pdCh0KTtjb25zdHt0b3BpYzplLGV2ZW50OnMsY2hhaW5JZDppfT10LHI9YWUoKS50b1N0cmluZygpO2F3YWl0IHRoaXMuc2VuZFJlcXVlc3Qoe3RvcGljOmUsbWV0aG9kOlwid2Nfc2Vzc2lvbkV2ZW50XCIscGFyYW1zOntldmVudDpzLGNoYWluSWQ6aX0sdGhyb3dPbkZhaWxlZFB1Ymxpc2g6ITAscmVsYXlScGNJZDpyfSl9LHRoaXMuZGlzY29ubmVjdD1hc3luYyB0PT57YXdhaXQgdGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkRGlzY29ubmVjdCh0KTtjb25zdHt0b3BpYzplfT10O2lmKHRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhlKSlhd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KHt0b3BpYzplLG1ldGhvZDpcIndjX3Nlc3Npb25EZWxldGVcIixwYXJhbXM6TihcIlVTRVJfRElTQ09OTkVDVEVEXCIpLHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSksYXdhaXQgdGhpcy5kZWxldGVTZXNzaW9uKHt0b3BpYzplLGVtaXRFdmVudDohMX0pO2Vsc2UgaWYodGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMoZSkpYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmRpc2Nvbm5lY3Qoe3RvcGljOmV9KTtlbHNle2NvbnN0e21lc3NhZ2U6c309cChcIk1JU01BVENIRURfVE9QSUNcIixgU2Vzc2lvbiBvciBwYWlyaW5nIHRvcGljIG5vdCBmb3VuZDogJHtlfWApO3Rocm93IG5ldyBFcnJvcihzKX19LHRoaXMuZmluZD10PT4odGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5jbGllbnQuc2Vzc2lvbi5nZXRBbGwoKS5maWx0ZXIoZT0+UnQoZSx0KSkpLHRoaXMuZ2V0UGVuZGluZ1Nlc3Npb25SZXF1ZXN0cz0oKT0+dGhpcy5jbGllbnQucGVuZGluZ1JlcXVlc3QuZ2V0QWxsKCksdGhpcy5hdXRoZW50aWNhdGU9YXN5bmMgdD0+e3RoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMuaXNWYWxpZEF1dGhlbnRpY2F0ZSh0KTtjb25zdHtjaGFpbnM6ZSxzdGF0ZW1lbnQ6cz1cIlwiLHVyaTppLGRvbWFpbjpyLG5vbmNlOm8sdHlwZTphLGV4cDpjLG5iZjpoLG1ldGhvZHM6bD1bXSxleHBpcnk6Z309dCxkPVsuLi50LnJlc291cmNlc3x8W11dLHt0b3BpYzp1LHVyaTpffT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuY3JlYXRlKHttZXRob2RzOltcIndjX3Nlc3Npb25BdXRoZW50aWNhdGVcIl19KTt0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyh7bWVzc2FnZTpcIkdlbmVyYXRlZCBuZXcgcGFpcmluZ1wiLHBhaXJpbmc6e3RvcGljOnUsdXJpOl99fSk7Y29uc3QgcT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZUtleVBhaXIoKSxtPV9lKHEpO2lmKGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLmNsaWVudC5hdXRoLmF1dGhLZXlzLnNldChpZSx7cmVzcG9uc2VUb3BpYzptLHB1YmxpY0tleTpxfSksdGhpcy5jbGllbnQuYXV0aC5wYWlyaW5nVG9waWNzLnNldChtLHt0b3BpYzptLHBhaXJpbmdUb3BpYzp1fSldKSxhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIuc3Vic2NyaWJlKG0pLHRoaXMuY2xpZW50LmxvZ2dlci5pbmZvKGBzZW5kaW5nIHJlcXVlc3QgdG8gbmV3IHBhaXJpbmcgdG9waWM6ICR7dX1gKSxsLmxlbmd0aD4wKXtjb25zdHtuYW1lc3BhY2U6QX09RWUoZVswXSk7bGV0IHY9U3QoQSxcInJlcXVlc3RcIixsKTtSZShkKSYmKHY9SXQodixkLnBvcCgpKSksZC5wdXNoKHYpfWNvbnN0IE89ZyYmZz5TLndjX3Nlc3Npb25BdXRoZW50aWNhdGUucmVxLnR0bD9nOlMud2Nfc2Vzc2lvbkF1dGhlbnRpY2F0ZS5yZXEudHRsLEQ9e2F1dGhQYXlsb2FkOnt0eXBlOmE/P1wiY2FpcDEyMlwiLGNoYWluczplLHN0YXRlbWVudDpzLGF1ZDppLGRvbWFpbjpyLHZlcnNpb246XCIxXCIsbm9uY2U6byxpYXQ6bmV3IERhdGUoKS50b0lTT1N0cmluZygpLGV4cDpjLG5iZjpoLHJlc291cmNlczpkfSxyZXF1ZXN0ZXI6e3B1YmxpY0tleTpxLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSxleHBpcnlUaW1lc3RhbXA6VChPKX0seT17ZWlwMTU1OntjaGFpbnM6ZSxtZXRob2RzOlsuLi5uZXcgU2V0KFtcInBlcnNvbmFsX3NpZ25cIiwuLi5sXSldLGV2ZW50czpbXCJjaGFpbkNoYW5nZWRcIixcImFjY291bnRzQ2hhbmdlZFwiXX19LFI9e3JlcXVpcmVkTmFtZXNwYWNlczp7fSxvcHRpb25hbE5hbWVzcGFjZXM6eSxyZWxheXM6W3twcm90b2NvbDpcImlyblwifV0scGFpcmluZ1RvcGljOnUscHJvcG9zZXI6e3B1YmxpY0tleTpxLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSxleHBpcnlUaW1lc3RhbXA6VChTLndjX3Nlc3Npb25Qcm9wb3NlLnJlcS50dGwpfSx7ZG9uZTpLLHJlc29sdmU6ZixyZWplY3Q6ZGV9PXooTyxcIlJlcXVlc3QgZXhwaXJlZFwiKSxyZT1hc3luYyh7ZXJyb3I6QSxzZXNzaW9uOnZ9KT0+e2lmKHRoaXMuZXZlbnRzLm9mZih3KFwic2Vzc2lvbl9yZXF1ZXN0XCIsRiksdWUpLEEpZGUoQSk7ZWxzZSBpZih2KXt2LnNlbGYucHVibGljS2V5PXEsYXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi5zZXQodi50b3BpYyx2KSxhd2FpdCB0aGlzLnNldEV4cGlyeSh2LnRvcGljLHYuZXhwaXJ5KSx1JiZhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcudXBkYXRlTWV0YWRhdGEoe3RvcGljOnUsbWV0YWRhdGE6di5wZWVyLm1ldGFkYXRhfSk7Y29uc3QgUT10aGlzLmNsaWVudC5zZXNzaW9uLmdldCh2LnRvcGljKTthd2FpdCB0aGlzLmRlbGV0ZVByb3Bvc2FsKEIpLGYoe3Nlc3Npb246UX0pfX0sdWU9YXN5bmMgQT0+e2lmKGF3YWl0IHRoaXMuZGVsZXRlUGVuZGluZ0F1dGhSZXF1ZXN0KEYse21lc3NhZ2U6XCJmdWxmaWxsZWRcIixjb2RlOjB9KSxBLmVycm9yKXtjb25zdCBXPU4oXCJXQ19NRVRIT0RfVU5TVVBQT1JURURcIixcIndjX3Nlc3Npb25BdXRoZW50aWNhdGVcIik7cmV0dXJuIEEuZXJyb3IuY29kZT09PVcuY29kZT92b2lkIDA6KHRoaXMuZXZlbnRzLm9mZih3KFwic2Vzc2lvbl9jb25uZWN0XCIpLHJlKSxkZShBLmVycm9yLm1lc3NhZ2UpKX1hd2FpdCB0aGlzLmRlbGV0ZVByb3Bvc2FsKEIpLHRoaXMuZXZlbnRzLm9mZih3KFwic2Vzc2lvbl9jb25uZWN0XCIpLHJlKTtjb25zdHtjYWNhb3M6dixyZXNwb25kZXI6UX09QS5yZXN1bHQsZ2U9W10sVGU9W107Zm9yKGNvbnN0IFcgb2Ygdil7YXdhaXQgYmUoe2NhY2FvOlcscHJvamVjdElkOnRoaXMuY2xpZW50LmNvcmUucHJvamVjdElkfSl8fCh0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoVyxcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkXCIpLGRlKE4oXCJTRVNTSU9OX1NFVFRMRU1FTlRfRkFJTEVEXCIsXCJTaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZFwiKSkpO2NvbnN0e3A6d2V9PVcseWU9UmUod2UucmVzb3VyY2VzKSxPZT1beGUod2UuaXNzKV0scnQ9RGUod2UuaXNzKTtpZih5ZSl7Y29uc3QgbWU9VmUoeWUpLG50PU1lKHllKTtnZS5wdXNoKC4uLm1lKSxPZS5wdXNoKC4uLm50KX1mb3IoY29uc3QgbWUgb2YgT2UpVGUucHVzaChgJHttZX06JHtydH1gKX1jb25zdCBuZT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZVNoYXJlZEtleShxLFEucHVibGljS2V5KTtsZXQgb2U7Z2UubGVuZ3RoPjAmJihvZT17dG9waWM6bmUsYWNrbm93bGVkZ2VkOiEwLHNlbGY6e3B1YmxpY0tleTpxLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSxwZWVyOlEsY29udHJvbGxlcjpRLnB1YmxpY0tleSxleHBpcnk6VChrKSxyZXF1aXJlZE5hbWVzcGFjZXM6e30sb3B0aW9uYWxOYW1lc3BhY2VzOnt9LHJlbGF5Ontwcm90b2NvbDpcImlyblwifSxwYWlyaW5nVG9waWM6dSxuYW1lc3BhY2VzOkxlKFsuLi5uZXcgU2V0KGdlKV0sWy4uLm5ldyBTZXQoVGUpXSl9LGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmUobmUpLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24uc2V0KG5lLG9lKSx1JiZhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcudXBkYXRlTWV0YWRhdGEoe3RvcGljOnUsbWV0YWRhdGE6US5tZXRhZGF0YX0pLG9lPXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KG5lKSksZih7YXV0aHM6dixzZXNzaW9uOm9lfSl9LEY9SigpLEI9SigpO3RoaXMuZXZlbnRzLm9uY2UodyhcInNlc3Npb25fY29ubmVjdFwiKSxyZSksdGhpcy5ldmVudHMub25jZSh3KFwic2Vzc2lvbl9yZXF1ZXN0XCIsRiksdWUpO3RyeXthd2FpdCBQcm9taXNlLmFsbChbdGhpcy5zZW5kUmVxdWVzdCh7dG9waWM6dSxtZXRob2Q6XCJ3Y19zZXNzaW9uQXV0aGVudGljYXRlXCIscGFyYW1zOkQsZXhwaXJ5OnQuZXhwaXJ5LHRocm93T25GYWlsZWRQdWJsaXNoOiEwLGNsaWVudFJwY0lkOkZ9KSx0aGlzLnNlbmRSZXF1ZXN0KHt0b3BpYzp1LG1ldGhvZDpcIndjX3Nlc3Npb25Qcm9wb3NlXCIscGFyYW1zOlIsZXhwaXJ5OlMud2Nfc2Vzc2lvblByb3Bvc2UucmVxLnR0bCx0aHJvd09uRmFpbGVkUHVibGlzaDohMCxjbGllbnRScGNJZDpCfSldKX1jYXRjaChBKXt0aHJvdyB0aGlzLmV2ZW50cy5vZmYodyhcInNlc3Npb25fY29ubmVjdFwiKSxyZSksdGhpcy5ldmVudHMub2ZmKHcoXCJzZXNzaW9uX3JlcXVlc3RcIixGKSx1ZSksQX1yZXR1cm4gYXdhaXQgdGhpcy5zZXRQcm9wb3NhbChCLEUoe2lkOkJ9LFIpKSxhd2FpdCB0aGlzLnNldEF1dGhSZXF1ZXN0KEYse3JlcXVlc3Q6aihFKHt9LEQpLHt2ZXJpZnlDb250ZXh0Ont9fSkscGFpcmluZ1RvcGljOnV9KSx7dXJpOl8scmVzcG9uc2U6S319LHRoaXMuYXBwcm92ZVNlc3Npb25BdXRoZW50aWNhdGU9YXN5bmMgdD0+e2NvbnN0e2lkOmUsYXV0aHM6c309dCxpPXRoaXMuY2xpZW50LmNvcmUuZXZlbnRDbGllbnQuY3JlYXRlRXZlbnQoe3Byb3BlcnRpZXM6e3RvcGljOmUudG9TdHJpbmcoKSx0cmFjZTpbRy5hdXRoZW50aWNhdGVkX3Nlc3Npb25fYXBwcm92ZV9zdGFydGVkXX19KTt0cnl7dGhpcy5pc0luaXRpYWxpemVkKCl9Y2F0Y2goXyl7dGhyb3cgaS5zZXRFcnJvcihaLm5vX2ludGVybmV0X2Nvbm5lY3Rpb24pLF99Y29uc3Qgcj10aGlzLmdldFBlbmRpbmdBdXRoUmVxdWVzdChlKTtpZighcil0aHJvdyBpLnNldEVycm9yKFouYXV0aGVudGljYXRlZF9zZXNzaW9uX3BlbmRpbmdfcmVxdWVzdF9ub3RfZm91bmQpLG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgcGVuZGluZyBhdXRoIHJlcXVlc3Qgd2l0aCBpZCAke2V9YCk7Y29uc3Qgbz1yLnJlcXVlc3Rlci5wdWJsaWNLZXksYT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZUtleVBhaXIoKSxjPV9lKG8pLGg9e3R5cGU6SWUscmVjZWl2ZXJQdWJsaWNLZXk6byxzZW5kZXJQdWJsaWNLZXk6YX0sbD1bXSxnPVtdO2Zvcihjb25zdCBfIG9mIHMpe2lmKCFhd2FpdCBiZSh7Y2FjYW86Xyxwcm9qZWN0SWQ6dGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWR9KSl7aS5zZXRFcnJvcihaLmludmFsaWRfY2FjYW8pO2NvbnN0IHk9TihcIlNFU1NJT05fU0VUVExFTUVOVF9GQUlMRURcIixcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkXCIpO3Rocm93IGF3YWl0IHRoaXMuc2VuZEVycm9yKHtpZDplLHRvcGljOmMsZXJyb3I6eSxlbmNvZGVPcHRzOmh9KSxuZXcgRXJyb3IoeS5tZXNzYWdlKX1pLmFkZFRyYWNlKEcuY2FjYW9zX3ZlcmlmaWVkKTtjb25zdHtwOnF9PV8sbT1SZShxLnJlc291cmNlcyksTz1beGUocS5pc3MpXSxEPURlKHEuaXNzKTtpZihtKXtjb25zdCB5PVZlKG0pLFI9TWUobSk7bC5wdXNoKC4uLnkpLE8ucHVzaCguLi5SKX1mb3IoY29uc3QgeSBvZiBPKWcucHVzaChgJHt5fToke0R9YCl9Y29uc3QgZD1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZVNoYXJlZEtleShhLG8pO2kuYWRkVHJhY2UoRy5jcmVhdGVfYXV0aGVudGljYXRlZF9zZXNzaW9uX3RvcGljKTtsZXQgdTtpZihsPy5sZW5ndGg+MCl7dT17dG9waWM6ZCxhY2tub3dsZWRnZWQ6ITAsc2VsZjp7cHVibGljS2V5OmEsbWV0YWRhdGE6dGhpcy5jbGllbnQubWV0YWRhdGF9LHBlZXI6e3B1YmxpY0tleTpvLG1ldGFkYXRhOnIucmVxdWVzdGVyLm1ldGFkYXRhfSxjb250cm9sbGVyOm8sZXhwaXJ5OlQoayksYXV0aGVudGljYXRpb246cyxyZXF1aXJlZE5hbWVzcGFjZXM6e30sb3B0aW9uYWxOYW1lc3BhY2VzOnt9LHJlbGF5Ontwcm90b2NvbDpcImlyblwifSxwYWlyaW5nVG9waWM6ci5wYWlyaW5nVG9waWMsbmFtZXNwYWNlczpMZShbLi4ubmV3IFNldChsKV0sWy4uLm5ldyBTZXQoZyldKX0saS5hZGRUcmFjZShHLnN1YnNjcmliaW5nX2F1dGhlbnRpY2F0ZWRfc2Vzc2lvbl90b3BpYyk7dHJ5e2F3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmUoZCl9Y2F0Y2goXyl7dGhyb3cgaS5zZXRFcnJvcihaLnN1YnNjcmliZV9hdXRoZW50aWNhdGVkX3Nlc3Npb25fdG9waWNfZmFpbHVyZSksX31pLmFkZFRyYWNlKEcuc3Vic2NyaWJlX2F1dGhlbnRpY2F0ZWRfc2Vzc2lvbl90b3BpY19zdWNjZXNzKSxhd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLnNldChkLHUpLGkuYWRkVHJhY2UoRy5zdG9yZV9hdXRoZW50aWNhdGVkX3Nlc3Npb24pLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy51cGRhdGVNZXRhZGF0YSh7dG9waWM6ci5wYWlyaW5nVG9waWMsbWV0YWRhdGE6ci5yZXF1ZXN0ZXIubWV0YWRhdGF9KX1pLmFkZFRyYWNlKEcucHVibGlzaGluZ19hdXRoZW50aWNhdGVkX3Nlc3Npb25fYXBwcm92ZSk7dHJ5e2F3YWl0IHRoaXMuc2VuZFJlc3VsdCh7dG9waWM6YyxpZDplLHJlc3VsdDp7Y2FjYW9zOnMscmVzcG9uZGVyOntwdWJsaWNLZXk6YSxtZXRhZGF0YTp0aGlzLmNsaWVudC5tZXRhZGF0YX19LGVuY29kZU9wdHM6aCx0aHJvd09uRmFpbGVkUHVibGlzaDohMH0pfWNhdGNoKF8pe3Rocm93IGkuc2V0RXJyb3IoWi5hdXRoZW50aWNhdGVkX3Nlc3Npb25fYXBwcm92ZV9wdWJsaXNoX2ZhaWx1cmUpLF99cmV0dXJuIGF3YWl0IHRoaXMuY2xpZW50LmF1dGgucmVxdWVzdHMuZGVsZXRlKGUse21lc3NhZ2U6XCJmdWxmaWxsZWRcIixjb2RlOjB9KSxhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuYWN0aXZhdGUoe3RvcGljOnIucGFpcmluZ1RvcGljfSksdGhpcy5jbGllbnQuY29yZS5ldmVudENsaWVudC5kZWxldGVFdmVudCh7ZXZlbnRJZDppLmV2ZW50SWR9KSx7c2Vzc2lvbjp1fX0sdGhpcy5yZWplY3RTZXNzaW9uQXV0aGVudGljYXRlPWFzeW5jIHQ9Pnthd2FpdCB0aGlzLmlzSW5pdGlhbGl6ZWQoKTtjb25zdHtpZDplLHJlYXNvbjpzfT10LGk9dGhpcy5nZXRQZW5kaW5nQXV0aFJlcXVlc3QoZSk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBwZW5kaW5nIGF1dGggcmVxdWVzdCB3aXRoIGlkICR7ZX1gKTtjb25zdCByPWkucmVxdWVzdGVyLnB1YmxpY0tleSxvPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmdlbmVyYXRlS2V5UGFpcigpLGE9X2UociksYz17dHlwZTpJZSxyZWNlaXZlclB1YmxpY0tleTpyLHNlbmRlclB1YmxpY0tleTpvfTthd2FpdCB0aGlzLnNlbmRFcnJvcih7aWQ6ZSx0b3BpYzphLGVycm9yOnMsZW5jb2RlT3B0czpjLHJwY09wdHM6Uy53Y19zZXNzaW9uQXV0aGVudGljYXRlLnJlamVjdH0pLGF3YWl0IHRoaXMuY2xpZW50LmF1dGgucmVxdWVzdHMuZGVsZXRlKGUse21lc3NhZ2U6XCJyZWplY3RlZFwiLGNvZGU6MH0pLGF3YWl0IHRoaXMuY2xpZW50LnByb3Bvc2FsLmRlbGV0ZShlLE4oXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSl9LHRoaXMuZm9ybWF0QXV0aE1lc3NhZ2U9dD0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0e3JlcXVlc3Q6ZSxpc3M6c309dDtyZXR1cm4gZnQoZSxzKX0sdGhpcy5wcm9jZXNzUmVsYXlNZXNzYWdlQ2FjaGU9KCk9PntzZXRUaW1lb3V0KGFzeW5jKCk9PntpZih0aGlzLnJlbGF5TWVzc2FnZUNhY2hlLmxlbmd0aCE9PTApZm9yKDt0aGlzLnJlbGF5TWVzc2FnZUNhY2hlLmxlbmd0aD4wOyl0cnl7Y29uc3QgdD10aGlzLnJlbGF5TWVzc2FnZUNhY2hlLnNoaWZ0KCk7dCYmYXdhaXQgdGhpcy5vblJlbGF5TWVzc2FnZSh0KX1jYXRjaCh0KXt0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IodCl9fSw1MCl9LHRoaXMuY2xlYW51cER1cGxpY2F0ZVBhaXJpbmdzPWFzeW5jIHQ9PntpZih0LnBhaXJpbmdUb3BpYyl0cnl7Y29uc3QgZT10aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcucGFpcmluZ3MuZ2V0KHQucGFpcmluZ1RvcGljKSxzPXRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5wYWlyaW5ncy5nZXRBbGwoKS5maWx0ZXIoaT0+e3ZhciByLG87cmV0dXJuKChyPWkucGVlck1ldGFkYXRhKT09bnVsbD92b2lkIDA6ci51cmwpJiYoKG89aS5wZWVyTWV0YWRhdGEpPT1udWxsP3ZvaWQgMDpvLnVybCk9PT10LnBlZXIubWV0YWRhdGEudXJsJiZpLnRvcGljJiZpLnRvcGljIT09ZS50b3BpY30pO2lmKHMubGVuZ3RoPT09MClyZXR1cm47dGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYENsZWFuaW5nIHVwICR7cy5sZW5ndGh9IGR1cGxpY2F0ZSBwYWlyaW5nKHMpYCksYXdhaXQgUHJvbWlzZS5hbGwocy5tYXAoaT0+dGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmRpc2Nvbm5lY3Qoe3RvcGljOmkudG9waWN9KSkpLHRoaXMuY2xpZW50LmxvZ2dlci5pbmZvKFwiRHVwbGljYXRlIHBhaXJpbmdzIGNsZWFuIHVwIGZpbmlzaGVkXCIpfWNhdGNoKGUpe3RoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihlKX19LHRoaXMuZGVsZXRlU2Vzc2lvbj1hc3luYyB0PT57dmFyIGU7Y29uc3R7dG9waWM6cyxleHBpcmVySGFzRGVsZXRlZDppPSExLGVtaXRFdmVudDpyPSEwLGlkOm89MH09dCx7c2VsZjphfT10aGlzLmNsaWVudC5zZXNzaW9uLmdldChzKTthd2FpdCB0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIudW5zdWJzY3JpYmUocyksYXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi5kZWxldGUocyxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpLHRoaXMuYWRkVG9SZWNlbnRseURlbGV0ZWQocyxcInNlc3Npb25cIiksdGhpcy5jbGllbnQuY29yZS5jcnlwdG8ua2V5Y2hhaW4uaGFzKGEucHVibGljS2V5KSYmYXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZGVsZXRlS2V5UGFpcihhLnB1YmxpY0tleSksdGhpcy5jbGllbnQuY29yZS5jcnlwdG8ua2V5Y2hhaW4uaGFzKHMpJiZhd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5kZWxldGVTeW1LZXkocyksaXx8dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLmRlbChzKSx0aGlzLmNsaWVudC5jb3JlLnN0b3JhZ2UucmVtb3ZlSXRlbShQZSkuY2F0Y2goYz0+dGhpcy5jbGllbnQubG9nZ2VyLndhcm4oYykpLHRoaXMuZ2V0UGVuZGluZ1Nlc3Npb25SZXF1ZXN0cygpLmZvckVhY2goYz0+e2MudG9waWM9PT1zJiZ0aGlzLmRlbGV0ZVBlbmRpbmdTZXNzaW9uUmVxdWVzdChjLmlkLE4oXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSl9KSxzPT09KChlPXRoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZS5xdWV1ZVswXSk9PW51bGw/dm9pZCAwOmUudG9waWMpJiYodGhpcy5zZXNzaW9uUmVxdWVzdFF1ZXVlLnN0YXRlPXguaWRsZSksciYmdGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX2RlbGV0ZVwiLHtpZDpvLHRvcGljOnN9KX0sdGhpcy5kZWxldGVQcm9wb3NhbD1hc3luYyh0LGUpPT57aWYoZSl0cnl7Y29uc3Qgcz10aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQodCksaT10aGlzLmNsaWVudC5jb3JlLmV2ZW50Q2xpZW50LmdldEV2ZW50KHt0b3BpYzpzLnBhaXJpbmdUb3BpY30pO2k/LnNldEVycm9yKFUucHJvcG9zYWxfZXhwaXJlZCl9Y2F0Y2h7fWF3YWl0IFByb21pc2UuYWxsKFt0aGlzLmNsaWVudC5wcm9wb3NhbC5kZWxldGUodCxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpLGU/UHJvbWlzZS5yZXNvbHZlKCk6dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLmRlbCh0KV0pLHRoaXMuYWRkVG9SZWNlbnRseURlbGV0ZWQodCxcInByb3Bvc2FsXCIpfSx0aGlzLmRlbGV0ZVBlbmRpbmdTZXNzaW9uUmVxdWVzdD1hc3luYyh0LGUscz0hMSk9Pnthd2FpdCBQcm9taXNlLmFsbChbdGhpcy5jbGllbnQucGVuZGluZ1JlcXVlc3QuZGVsZXRlKHQsZSkscz9Qcm9taXNlLnJlc29sdmUoKTp0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIuZGVsKHQpXSksdGhpcy5hZGRUb1JlY2VudGx5RGVsZXRlZCh0LFwicmVxdWVzdFwiKSx0aGlzLnNlc3Npb25SZXF1ZXN0UXVldWUucXVldWU9dGhpcy5zZXNzaW9uUmVxdWVzdFF1ZXVlLnF1ZXVlLmZpbHRlcihpPT5pLmlkIT09dCkscyYmKHRoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZS5zdGF0ZT14LmlkbGUsdGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3JlcXVlc3RfZXhwaXJlXCIse2lkOnR9KSl9LHRoaXMuZGVsZXRlUGVuZGluZ0F1dGhSZXF1ZXN0PWFzeW5jKHQsZSxzPSExKT0+e2F3YWl0IFByb21pc2UuYWxsKFt0aGlzLmNsaWVudC5hdXRoLnJlcXVlc3RzLmRlbGV0ZSh0LGUpLHM/UHJvbWlzZS5yZXNvbHZlKCk6dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLmRlbCh0KV0pfSx0aGlzLnNldEV4cGlyeT1hc3luYyh0LGUpPT57dGhpcy5jbGllbnQuc2Vzc2lvbi5rZXlzLmluY2x1ZGVzKHQpJiYodGhpcy5jbGllbnQuY29yZS5leHBpcmVyLnNldCh0LGUpLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKHQse2V4cGlyeTplfSkpfSx0aGlzLnNldFByb3Bvc2FsPWFzeW5jKHQsZSk9Pnt0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIuc2V0KHQsVChTLndjX3Nlc3Npb25Qcm9wb3NlLnJlcS50dGwpKSxhd2FpdCB0aGlzLmNsaWVudC5wcm9wb3NhbC5zZXQodCxlKX0sdGhpcy5zZXRBdXRoUmVxdWVzdD1hc3luYyh0LGUpPT57Y29uc3R7cmVxdWVzdDpzLHBhaXJpbmdUb3BpYzppfT1lO3RoaXMuY2xpZW50LmNvcmUuZXhwaXJlci5zZXQodCxzLmV4cGlyeVRpbWVzdGFtcCksYXdhaXQgdGhpcy5jbGllbnQuYXV0aC5yZXF1ZXN0cy5zZXQodCx7YXV0aFBheWxvYWQ6cy5hdXRoUGF5bG9hZCxyZXF1ZXN0ZXI6cy5yZXF1ZXN0ZXIsZXhwaXJ5VGltZXN0YW1wOnMuZXhwaXJ5VGltZXN0YW1wLGlkOnQscGFpcmluZ1RvcGljOmksdmVyaWZ5Q29udGV4dDpzLnZlcmlmeUNvbnRleHR9KX0sdGhpcy5zZXRQZW5kaW5nU2Vzc2lvblJlcXVlc3Q9YXN5bmMgdD0+e2NvbnN0e2lkOmUsdG9waWM6cyxwYXJhbXM6aSx2ZXJpZnlDb250ZXh0OnJ9PXQsbz1pLnJlcXVlc3QuZXhwaXJ5VGltZXN0YW1wfHxUKFMud2Nfc2Vzc2lvblJlcXVlc3QucmVxLnR0bCk7dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLnNldChlLG8pLGF3YWl0IHRoaXMuY2xpZW50LnBlbmRpbmdSZXF1ZXN0LnNldChlLHtpZDplLHRvcGljOnMscGFyYW1zOmksdmVyaWZ5Q29udGV4dDpyfSl9LHRoaXMuc2VuZFJlcXVlc3Q9YXN5bmMgdD0+e2NvbnN0e3RvcGljOmUsbWV0aG9kOnMscGFyYW1zOmksZXhwaXJ5OnIscmVsYXlScGNJZDpvLGNsaWVudFJwY0lkOmEsdGhyb3dPbkZhaWxlZFB1Ymxpc2g6Y309dCxoPWZlKHMsaSxhKTtsZXQgbDt0cnl7bD1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5lbmNvZGUoZSxoKX1jYXRjaCh1KXt0aHJvdyBhd2FpdCB0aGlzLmNsZWFudXAoKSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYHNlbmRSZXF1ZXN0KCkgLT4gY29yZS5jcnlwdG8uZW5jb2RlKCkgZm9yIHRvcGljICR7ZX0gZmFpbGVkYCksdX1sZXQgZztpZihYZS5pbmNsdWRlcyhzKSl7Y29uc3QgdT1ZKEpTT04uc3RyaW5naWZ5KGgpKSxfPVkobCk7Zz1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLnZlcmlmeS5yZWdpc3Rlcih7aWQ6XyxkZWNyeXB0ZWRJZDp1fSl9Y29uc3QgZD1TW3NdLnJlcTtyZXR1cm4gZC5hdHRlc3RhdGlvbj1nLHImJihkLnR0bD1yKSxvJiYoZC5pZD1vKSx0aGlzLmNsaWVudC5jb3JlLmhpc3Rvcnkuc2V0KGUsaCksYz8oZC5pbnRlcm5hbD1qKEUoe30sZC5pbnRlcm5hbCkse3Rocm93T25GYWlsZWRQdWJsaXNoOiEwfSksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5yZWxheWVyLnB1Ymxpc2goZSxsLGQpKTp0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIucHVibGlzaChlLGwsZCkuY2F0Y2godT0+dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKHUpKSxoLmlkfSx0aGlzLnNlbmRSZXN1bHQ9YXN5bmMgdD0+e2NvbnN0e2lkOmUsdG9waWM6cyxyZXN1bHQ6aSx0aHJvd09uRmFpbGVkUHVibGlzaDpyLGVuY29kZU9wdHM6b309dCxhPWt0KGUsaSk7bGV0IGM7dHJ5e2M9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZW5jb2RlKHMsYSxvKX1jYXRjaChnKXt0aHJvdyBhd2FpdCB0aGlzLmNsZWFudXAoKSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYHNlbmRSZXN1bHQoKSAtPiBjb3JlLmNyeXB0by5lbmNvZGUoKSBmb3IgdG9waWMgJHtzfSBmYWlsZWRgKSxnfWxldCBoO3RyeXtoPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5nZXQocyxlKX1jYXRjaChnKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYHNlbmRSZXN1bHQoKSAtPiBoaXN0b3J5LmdldCgke3N9LCAke2V9KSBmYWlsZWRgKSxnfWNvbnN0IGw9U1toLnJlcXVlc3QubWV0aG9kXS5yZXM7cj8obC5pbnRlcm5hbD1qKEUoe30sbC5pbnRlcm5hbCkse3Rocm93T25GYWlsZWRQdWJsaXNoOiEwfSksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5yZWxheWVyLnB1Ymxpc2gocyxjLGwpKTp0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIucHVibGlzaChzLGMsbCkuY2F0Y2goZz0+dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGcpKSxhd2FpdCB0aGlzLmNsaWVudC5jb3JlLmhpc3RvcnkucmVzb2x2ZShhKX0sdGhpcy5zZW5kRXJyb3I9YXN5bmMgdD0+e2NvbnN0e2lkOmUsdG9waWM6cyxlcnJvcjppLGVuY29kZU9wdHM6cixycGNPcHRzOm99PXQsYT1qdChlLGkpO2xldCBjO3RyeXtjPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmVuY29kZShzLGEscil9Y2F0Y2goZyl7dGhyb3cgYXdhaXQgdGhpcy5jbGVhbnVwKCksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGBzZW5kRXJyb3IoKSAtPiBjb3JlLmNyeXB0by5lbmNvZGUoKSBmb3IgdG9waWMgJHtzfSBmYWlsZWRgKSxnfWxldCBoO3RyeXtoPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5nZXQocyxlKX1jYXRjaChnKXt0aHJvdyB0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoYHNlbmRFcnJvcigpIC0+IGhpc3RvcnkuZ2V0KCR7c30sICR7ZX0pIGZhaWxlZGApLGd9Y29uc3QgbD1vfHxTW2gucmVxdWVzdC5tZXRob2RdLnJlczt0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIucHVibGlzaChzLGMsbCksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnJlc29sdmUoYSl9LHRoaXMuY2xlYW51cD1hc3luYygpPT57Y29uc3QgdD1bXSxlPVtdO3RoaXMuY2xpZW50LnNlc3Npb24uZ2V0QWxsKCkuZm9yRWFjaChzPT57bGV0IGk9ITE7WChzLmV4cGlyeSkmJihpPSEwKSx0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5rZXljaGFpbi5oYXMocy50b3BpYyl8fChpPSEwKSxpJiZ0LnB1c2gocy50b3BpYyl9KSx0aGlzLmNsaWVudC5wcm9wb3NhbC5nZXRBbGwoKS5mb3JFYWNoKHM9PntYKHMuZXhwaXJ5VGltZXN0YW1wKSYmZS5wdXNoKHMuaWQpfSksYXdhaXQgUHJvbWlzZS5hbGwoWy4uLnQubWFwKHM9PnRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6c30pKSwuLi5lLm1hcChzPT50aGlzLmRlbGV0ZVByb3Bvc2FsKHMpKV0pfSx0aGlzLm9uUmVsYXlFdmVudFJlcXVlc3Q9YXN5bmMgdD0+e3RoaXMucmVxdWVzdFF1ZXVlLnF1ZXVlLnB1c2godCksYXdhaXQgdGhpcy5wcm9jZXNzUmVxdWVzdHNRdWV1ZSgpfSx0aGlzLnByb2Nlc3NSZXF1ZXN0c1F1ZXVlPWFzeW5jKCk9PntpZih0aGlzLnJlcXVlc3RRdWV1ZS5zdGF0ZT09PXguYWN0aXZlKXt0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyhcIlJlcXVlc3QgcXVldWUgYWxyZWFkeSBhY3RpdmUsIHNraXBwaW5nLi4uXCIpO3JldHVybn1mb3IodGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYFJlcXVlc3QgcXVldWUgc3RhcnRpbmcgd2l0aCAke3RoaXMucmVxdWVzdFF1ZXVlLnF1ZXVlLmxlbmd0aH0gcmVxdWVzdHNgKTt0aGlzLnJlcXVlc3RRdWV1ZS5xdWV1ZS5sZW5ndGg+MDspe3RoaXMucmVxdWVzdFF1ZXVlLnN0YXRlPXguYWN0aXZlO2NvbnN0IHQ9dGhpcy5yZXF1ZXN0UXVldWUucXVldWUuc2hpZnQoKTtpZih0KXRyeXthd2FpdCB0aGlzLnByb2Nlc3NSZXF1ZXN0KHQpfWNhdGNoKGUpe3RoaXMuY2xpZW50LmxvZ2dlci53YXJuKGUpfX10aGlzLnJlcXVlc3RRdWV1ZS5zdGF0ZT14LmlkbGV9LHRoaXMucHJvY2Vzc1JlcXVlc3Q9YXN5bmMgdD0+e2NvbnN0e3RvcGljOmUscGF5bG9hZDpzLGF0dGVzdGF0aW9uOmksZW5jcnlwdGVkSWQ6cn09dCxvPXMubWV0aG9kO2lmKCF0aGlzLnNob3VsZElnbm9yZVBhaXJpbmdSZXF1ZXN0KHt0b3BpYzplLHJlcXVlc3RNZXRob2Q6b30pKXN3aXRjaChvKXtjYXNlXCJ3Y19zZXNzaW9uUHJvcG9zZVwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvblByb3Bvc2VSZXF1ZXN0KHt0b3BpYzplLHBheWxvYWQ6cyxhdHRlc3RhdGlvbjppLGVuY3J5cHRlZElkOnJ9KTtjYXNlXCJ3Y19zZXNzaW9uU2V0dGxlXCI6cmV0dXJuIGF3YWl0IHRoaXMub25TZXNzaW9uU2V0dGxlUmVxdWVzdChlLHMpO2Nhc2VcIndjX3Nlc3Npb25VcGRhdGVcIjpyZXR1cm4gYXdhaXQgdGhpcy5vblNlc3Npb25VcGRhdGVSZXF1ZXN0KGUscyk7Y2FzZVwid2Nfc2Vzc2lvbkV4dGVuZFwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvbkV4dGVuZFJlcXVlc3QoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uUGluZ1wiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvblBpbmdSZXF1ZXN0KGUscyk7Y2FzZVwid2Nfc2Vzc2lvbkRlbGV0ZVwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvbkRlbGV0ZVJlcXVlc3QoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uUmVxdWVzdFwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvblJlcXVlc3Qoe3RvcGljOmUscGF5bG9hZDpzLGF0dGVzdGF0aW9uOmksZW5jcnlwdGVkSWQ6cn0pO2Nhc2VcIndjX3Nlc3Npb25FdmVudFwiOnJldHVybiBhd2FpdCB0aGlzLm9uU2Vzc2lvbkV2ZW50UmVxdWVzdChlLHMpO2Nhc2VcIndjX3Nlc3Npb25BdXRoZW50aWNhdGVcIjpyZXR1cm4gYXdhaXQgdGhpcy5vblNlc3Npb25BdXRoZW50aWNhdGVSZXF1ZXN0KHt0b3BpYzplLHBheWxvYWQ6cyxhdHRlc3RhdGlvbjppLGVuY3J5cHRlZElkOnJ9KTtkZWZhdWx0OnJldHVybiB0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyhgVW5zdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2QgJHtvfWApfX0sdGhpcy5vblJlbGF5RXZlbnRSZXNwb25zZT1hc3luYyB0PT57Y29uc3R7dG9waWM6ZSxwYXlsb2FkOnN9PXQsaT0oYXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LmdldChlLHMuaWQpKS5yZXF1ZXN0Lm1ldGhvZDtzd2l0Y2goaSl7Y2FzZVwid2Nfc2Vzc2lvblByb3Bvc2VcIjpyZXR1cm4gdGhpcy5vblNlc3Npb25Qcm9wb3NlUmVzcG9uc2UoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uU2V0dGxlXCI6cmV0dXJuIHRoaXMub25TZXNzaW9uU2V0dGxlUmVzcG9uc2UoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uVXBkYXRlXCI6cmV0dXJuIHRoaXMub25TZXNzaW9uVXBkYXRlUmVzcG9uc2UoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uRXh0ZW5kXCI6cmV0dXJuIHRoaXMub25TZXNzaW9uRXh0ZW5kUmVzcG9uc2UoZSxzKTtjYXNlXCJ3Y19zZXNzaW9uUGluZ1wiOnJldHVybiB0aGlzLm9uU2Vzc2lvblBpbmdSZXNwb25zZShlLHMpO2Nhc2VcIndjX3Nlc3Npb25SZXF1ZXN0XCI6cmV0dXJuIHRoaXMub25TZXNzaW9uUmVxdWVzdFJlc3BvbnNlKGUscyk7Y2FzZVwid2Nfc2Vzc2lvbkF1dGhlbnRpY2F0ZVwiOnJldHVybiB0aGlzLm9uU2Vzc2lvbkF1dGhlbnRpY2F0ZVJlc3BvbnNlKGUscyk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYFVuc3VwcG9ydGVkIHJlc3BvbnNlIG1ldGhvZCAke2l9YCl9fSx0aGlzLm9uUmVsYXlFdmVudFVua25vd25QYXlsb2FkPXQ9Pntjb25zdHt0b3BpYzplfT10LHttZXNzYWdlOnN9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgRGVjb2RlZCBwYXlsb2FkIG9uIHRvcGljICR7ZX0gaXMgbm90IGlkZW50aWZpYWJsZSBhcyBhIEpTT04tUlBDIHJlcXVlc3Qgb3IgYSByZXNwb25zZS5gKTt0aHJvdyBuZXcgRXJyb3Iocyl9LHRoaXMuc2hvdWxkSWdub3JlUGFpcmluZ1JlcXVlc3Q9dD0+e2NvbnN0e3RvcGljOmUscmVxdWVzdE1ldGhvZDpzfT10LGk9dGhpcy5leHBlY3RlZFBhaXJpbmdNZXRob2RNYXAuZ2V0KGUpO3JldHVybiFpfHxpLmluY2x1ZGVzKHMpPyExOiEhKGkuaW5jbHVkZXMoXCJ3Y19zZXNzaW9uQXV0aGVudGljYXRlXCIpJiZ0aGlzLmNsaWVudC5ldmVudHMubGlzdGVuZXJDb3VudChcInNlc3Npb25fYXV0aGVudGljYXRlXCIpPjApfSx0aGlzLm9uU2Vzc2lvblByb3Bvc2VSZXF1ZXN0PWFzeW5jIHQ9Pntjb25zdHt0b3BpYzplLHBheWxvYWQ6cyxhdHRlc3RhdGlvbjppLGVuY3J5cHRlZElkOnJ9PXQse3BhcmFtczpvLGlkOmF9PXM7dHJ5e2NvbnN0IGM9dGhpcy5jbGllbnQuY29yZS5ldmVudENsaWVudC5nZXRFdmVudCh7dG9waWM6ZX0pO3RoaXMuaXNWYWxpZENvbm5lY3QoRSh7fSxzLnBhcmFtcykpO2NvbnN0IGg9by5leHBpcnlUaW1lc3RhbXB8fFQoUy53Y19zZXNzaW9uUHJvcG9zZS5yZXEudHRsKSxsPUUoe2lkOmEscGFpcmluZ1RvcGljOmUsZXhwaXJ5VGltZXN0YW1wOmh9LG8pO2F3YWl0IHRoaXMuc2V0UHJvcG9zYWwoYSxsKTtjb25zdCBnPWF3YWl0IHRoaXMuZ2V0VmVyaWZ5Q29udGV4dCh7YXR0ZXN0YXRpb25JZDppLGhhc2g6WShKU09OLnN0cmluZ2lmeShzKSksZW5jcnlwdGVkSWQ6cixtZXRhZGF0YTpsLnByb3Bvc2VyLm1ldGFkYXRhfSk7dGhpcy5jbGllbnQuZXZlbnRzLmxpc3RlbmVyQ291bnQoXCJzZXNzaW9uX3Byb3Bvc2FsXCIpPT09MCYmKGNvbnNvbGUud2FybihcIk5vIGxpc3RlbmVyIGZvciBzZXNzaW9uX3Byb3Bvc2FsIGV2ZW50XCIpLGM/LnNldEVycm9yKGF0LnByb3Bvc2FsX2xpc3RlbmVyX25vdF9mb3VuZCkpLGM/LmFkZFRyYWNlKGN0LmVtaXRfc2Vzc2lvbl9wcm9wb3NhbCksdGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3Byb3Bvc2FsXCIse2lkOmEscGFyYW1zOmwsdmVyaWZ5Q29udGV4dDpnfSl9Y2F0Y2goYyl7YXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOmEsdG9waWM6ZSxlcnJvcjpjLHJwY09wdHM6Uy53Y19zZXNzaW9uUHJvcG9zZS5hdXRvUmVqZWN0fSksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGMpfX0sdGhpcy5vblNlc3Npb25Qcm9wb3NlUmVzcG9uc2U9YXN5bmModCxlKT0+e2NvbnN0e2lkOnN9PWU7aWYoTChlKSl7Y29uc3R7cmVzdWx0Oml9PWU7dGhpcy5jbGllbnQubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwib25TZXNzaW9uUHJvcG9zZVJlc3BvbnNlXCIscmVzdWx0Oml9KTtjb25zdCByPXRoaXMuY2xpZW50LnByb3Bvc2FsLmdldChzKTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixwcm9wb3NhbDpyfSk7Y29uc3Qgbz1yLnByb3Bvc2VyLnB1YmxpY0tleTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixzZWxmUHVibGljS2V5Om99KTtjb25zdCBhPWkucmVzcG9uZGVyUHVibGljS2V5O3RoaXMuY2xpZW50LmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcIm9uU2Vzc2lvblByb3Bvc2VSZXNwb25zZVwiLHBlZXJQdWJsaWNLZXk6YX0pO2NvbnN0IGM9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZ2VuZXJhdGVTaGFyZWRLZXkobyxhKTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixzZXNzaW9uVG9waWM6Y30pO2NvbnN0IGg9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5yZWxheWVyLnN1YnNjcmliZShjKTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixzdWJzY3JpcHRpb25JZDpofSksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmFjdGl2YXRlKHt0b3BpYzp0fSl9ZWxzZSBpZigkKGUpKXthd2FpdCB0aGlzLmNsaWVudC5wcm9wb3NhbC5kZWxldGUocyxOKFwiVVNFUl9ESVNDT05ORUNURURcIikpO2NvbnN0IGk9dyhcInNlc3Npb25fY29ubmVjdFwiKTtpZih0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KGkpPT09MCl0aHJvdyBuZXcgRXJyb3IoYGVtaXR0aW5nICR7aX0gd2l0aG91dCBhbnkgbGlzdGVuZXJzLCA5NTRgKTt0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX2Nvbm5lY3RcIikse2Vycm9yOmUuZXJyb3J9KX19LHRoaXMub25TZXNzaW9uU2V0dGxlUmVxdWVzdD1hc3luYyh0LGUpPT57Y29uc3R7aWQ6cyxwYXJhbXM6aX09ZTt0cnl7dGhpcy5pc1ZhbGlkU2Vzc2lvblNldHRsZVJlcXVlc3QoaSk7Y29uc3R7cmVsYXk6cixjb250cm9sbGVyOm8sZXhwaXJ5OmEsbmFtZXNwYWNlczpjLHNlc3Npb25Qcm9wZXJ0aWVzOmgsc2Vzc2lvbkNvbmZpZzpsfT1lLnBhcmFtcyxnPUUoRSh7dG9waWM6dCxyZWxheTpyLGV4cGlyeTphLG5hbWVzcGFjZXM6YyxhY2tub3dsZWRnZWQ6ITAscGFpcmluZ1RvcGljOlwiXCIscmVxdWlyZWROYW1lc3BhY2VzOnt9LG9wdGlvbmFsTmFtZXNwYWNlczp7fSxjb250cm9sbGVyOm8ucHVibGljS2V5LHNlbGY6e3B1YmxpY0tleTpcIlwiLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSxwZWVyOntwdWJsaWNLZXk6by5wdWJsaWNLZXksbWV0YWRhdGE6by5tZXRhZGF0YX19LGgmJntzZXNzaW9uUHJvcGVydGllczpofSksbCYme3Nlc3Npb25Db25maWc6bH0pLGQ9dyhcInNlc3Npb25fY29ubmVjdFwiKTtpZih0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KGQpPT09MCl0aHJvdyBuZXcgRXJyb3IoYGVtaXR0aW5nICR7ZH0gd2l0aG91dCBhbnkgbGlzdGVuZXJzIDk5N2ApO3RoaXMuZXZlbnRzLmVtaXQodyhcInNlc3Npb25fY29ubmVjdFwiKSx7c2Vzc2lvbjpnfSksYXdhaXQgdGhpcy5zZW5kUmVzdWx0KHtpZDplLmlkLHRvcGljOnQscmVzdWx0OiEwLHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSl9Y2F0Y2gocil7YXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOnMsdG9waWM6dCxlcnJvcjpyfSksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKHIpfX0sdGhpcy5vblNlc3Npb25TZXR0bGVSZXNwb25zZT1hc3luYyh0LGUpPT57Y29uc3R7aWQ6c309ZTtMKGUpPyhhd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLnVwZGF0ZSh0LHthY2tub3dsZWRnZWQ6ITB9KSx0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX2FwcHJvdmVcIixzKSx7fSkpOiQoZSkmJihhd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLmRlbGV0ZSh0LE4oXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSksdGhpcy5ldmVudHMuZW1pdCh3KFwic2Vzc2lvbl9hcHByb3ZlXCIscykse2Vycm9yOmUuZXJyb3J9KSl9LHRoaXMub25TZXNzaW9uVXBkYXRlUmVxdWVzdD1hc3luYyh0LGUpPT57Y29uc3R7cGFyYW1zOnMsaWQ6aX09ZTt0cnl7Y29uc3Qgcj1gJHt0fV9zZXNzaW9uX3VwZGF0ZWAsbz1lZS5nZXQocik7aWYobyYmdGhpcy5pc1JlcXVlc3RPdXRPZlN5bmMobyxpKSl7dGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYERpc2NhcmRpbmcgb3V0IG9mIHN5bmMgcmVxdWVzdCAtICR7aX1gKSx0aGlzLnNlbmRFcnJvcih7aWQ6aSx0b3BpYzp0LGVycm9yOk4oXCJJTlZBTElEX1VQREFURV9SRVFVRVNUXCIpfSk7cmV0dXJufXRoaXMuaXNWYWxpZFVwZGF0ZShFKHt0b3BpYzp0fSxzKSk7dHJ5e2VlLnNldChyLGkpLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKHQse25hbWVzcGFjZXM6cy5uYW1lc3BhY2VzfSksYXdhaXQgdGhpcy5zZW5kUmVzdWx0KHtpZDppLHRvcGljOnQscmVzdWx0OiEwLHRocm93T25GYWlsZWRQdWJsaXNoOiEwfSl9Y2F0Y2goYSl7dGhyb3cgZWUuZGVsZXRlKHIpLGF9dGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3VwZGF0ZVwiLHtpZDppLHRvcGljOnQscGFyYW1zOnN9KX1jYXRjaChyKXthd2FpdCB0aGlzLnNlbmRFcnJvcih7aWQ6aSx0b3BpYzp0LGVycm9yOnJ9KSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3Iocil9fSx0aGlzLmlzUmVxdWVzdE91dE9mU3luYz0odCxlKT0+cGFyc2VJbnQoZS50b1N0cmluZygpLnNsaWNlKDAsLTMpKTw9cGFyc2VJbnQodC50b1N0cmluZygpLnNsaWNlKDAsLTMpKSx0aGlzLm9uU2Vzc2lvblVwZGF0ZVJlc3BvbnNlPSh0LGUpPT57Y29uc3R7aWQ6c309ZSxpPXcoXCJzZXNzaW9uX3VwZGF0ZVwiLHMpO2lmKHRoaXMuZXZlbnRzLmxpc3RlbmVyQ291bnQoaSk9PT0wKXRocm93IG5ldyBFcnJvcihgZW1pdHRpbmcgJHtpfSB3aXRob3V0IGFueSBsaXN0ZW5lcnNgKTtMKGUpP3RoaXMuZXZlbnRzLmVtaXQodyhcInNlc3Npb25fdXBkYXRlXCIscykse30pOiQoZSkmJnRoaXMuZXZlbnRzLmVtaXQodyhcInNlc3Npb25fdXBkYXRlXCIscykse2Vycm9yOmUuZXJyb3J9KX0sdGhpcy5vblNlc3Npb25FeHRlbmRSZXF1ZXN0PWFzeW5jKHQsZSk9Pntjb25zdHtpZDpzfT1lO3RyeXt0aGlzLmlzVmFsaWRFeHRlbmQoe3RvcGljOnR9KSxhd2FpdCB0aGlzLnNldEV4cGlyeSh0LFQoaykpLGF3YWl0IHRoaXMuc2VuZFJlc3VsdCh7aWQ6cyx0b3BpYzp0LHJlc3VsdDohMCx0aHJvd09uRmFpbGVkUHVibGlzaDohMH0pLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9leHRlbmRcIix7aWQ6cyx0b3BpYzp0fSl9Y2F0Y2goaSl7YXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOnMsdG9waWM6dCxlcnJvcjppfSksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGkpfX0sdGhpcy5vblNlc3Npb25FeHRlbmRSZXNwb25zZT0odCxlKT0+e2NvbnN0e2lkOnN9PWUsaT13KFwic2Vzc2lvbl9leHRlbmRcIixzKTtpZih0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KGkpPT09MCl0aHJvdyBuZXcgRXJyb3IoYGVtaXR0aW5nICR7aX0gd2l0aG91dCBhbnkgbGlzdGVuZXJzYCk7TChlKT90aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX2V4dGVuZFwiLHMpLHt9KTokKGUpJiZ0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX2V4dGVuZFwiLHMpLHtlcnJvcjplLmVycm9yfSl9LHRoaXMub25TZXNzaW9uUGluZ1JlcXVlc3Q9YXN5bmModCxlKT0+e2NvbnN0e2lkOnN9PWU7dHJ5e3RoaXMuaXNWYWxpZFBpbmcoe3RvcGljOnR9KSxhd2FpdCB0aGlzLnNlbmRSZXN1bHQoe2lkOnMsdG9waWM6dCxyZXN1bHQ6ITAsdGhyb3dPbkZhaWxlZFB1Ymxpc2g6ITB9KSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInNlc3Npb25fcGluZ1wiLHtpZDpzLHRvcGljOnR9KX1jYXRjaChpKXthd2FpdCB0aGlzLnNlbmRFcnJvcih7aWQ6cyx0b3BpYzp0LGVycm9yOml9KSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoaSl9fSx0aGlzLm9uU2Vzc2lvblBpbmdSZXNwb25zZT0odCxlKT0+e2NvbnN0e2lkOnN9PWUsaT13KFwic2Vzc2lvbl9waW5nXCIscyk7aWYodGhpcy5ldmVudHMubGlzdGVuZXJDb3VudChpKT09PTApdGhyb3cgbmV3IEVycm9yKGBlbWl0dGluZyAke2l9IHdpdGhvdXQgYW55IGxpc3RlbmVyc2ApO3NldFRpbWVvdXQoKCk9PntMKGUpP3RoaXMuZXZlbnRzLmVtaXQodyhcInNlc3Npb25fcGluZ1wiLHMpLHt9KTokKGUpJiZ0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX3BpbmdcIixzKSx7ZXJyb3I6ZS5lcnJvcn0pfSw1MDApfSx0aGlzLm9uU2Vzc2lvbkRlbGV0ZVJlcXVlc3Q9YXN5bmModCxlKT0+e2NvbnN0e2lkOnN9PWU7dHJ5e3RoaXMuaXNWYWxpZERpc2Nvbm5lY3Qoe3RvcGljOnQscmVhc29uOmUucGFyYW1zfSksYXdhaXQgUHJvbWlzZS5hbGwoW25ldyBQcm9taXNlKGk9Pnt0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIub25jZShBZS5wdWJsaXNoLGFzeW5jKCk9PntpKGF3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6dCxpZDpzfSkpfSl9KSx0aGlzLnNlbmRSZXN1bHQoe2lkOnMsdG9waWM6dCxyZXN1bHQ6ITAsdGhyb3dPbkZhaWxlZFB1Ymxpc2g6ITB9KSx0aGlzLmNsZWFudXBQZW5kaW5nU2VudFJlcXVlc3RzRm9yVG9waWMoe3RvcGljOnQsZXJyb3I6TihcIlVTRVJfRElTQ09OTkVDVEVEXCIpfSldKX1jYXRjaChpKXt0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoaSl9fSx0aGlzLm9uU2Vzc2lvblJlcXVlc3Q9YXN5bmMgdD0+e3ZhciBlO2NvbnN0e3RvcGljOnMscGF5bG9hZDppLGF0dGVzdGF0aW9uOnIsZW5jcnlwdGVkSWQ6b309dCx7aWQ6YSxwYXJhbXM6Y309aTt0cnl7YXdhaXQgdGhpcy5pc1ZhbGlkUmVxdWVzdChFKHt0b3BpYzpzfSxjKSk7Y29uc3QgaD10aGlzLmNsaWVudC5zZXNzaW9uLmdldChzKSxsPWF3YWl0IHRoaXMuZ2V0VmVyaWZ5Q29udGV4dCh7YXR0ZXN0YXRpb25JZDpyLGhhc2g6WShKU09OLnN0cmluZ2lmeShmZShcIndjX3Nlc3Npb25SZXF1ZXN0XCIsYyxhKSkpLGVuY3J5cHRlZElkOm8sbWV0YWRhdGE6aC5wZWVyLm1ldGFkYXRhfSksZz17aWQ6YSx0b3BpYzpzLHBhcmFtczpjLHZlcmlmeUNvbnRleHQ6bH07YXdhaXQgdGhpcy5zZXRQZW5kaW5nU2Vzc2lvblJlcXVlc3QoZyksKGU9dGhpcy5jbGllbnQuc2lnbkNvbmZpZykhPW51bGwmJmUuZGlzYWJsZVJlcXVlc3RRdWV1ZT90aGlzLmVtaXRTZXNzaW9uUmVxdWVzdChnKToodGhpcy5hZGRTZXNzaW9uUmVxdWVzdFRvU2Vzc2lvblJlcXVlc3RRdWV1ZShnKSx0aGlzLnByb2Nlc3NTZXNzaW9uUmVxdWVzdFF1ZXVlKCkpfWNhdGNoKGgpe2F3YWl0IHRoaXMuc2VuZEVycm9yKHtpZDphLHRvcGljOnMsZXJyb3I6aH0pLHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihoKX19LHRoaXMub25TZXNzaW9uUmVxdWVzdFJlc3BvbnNlPSh0LGUpPT57Y29uc3R7aWQ6c309ZSxpPXcoXCJzZXNzaW9uX3JlcXVlc3RcIixzKTtpZih0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KGkpPT09MCl0aHJvdyBuZXcgRXJyb3IoYGVtaXR0aW5nICR7aX0gd2l0aG91dCBhbnkgbGlzdGVuZXJzYCk7TChlKT90aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX3JlcXVlc3RcIixzKSx7cmVzdWx0OmUucmVzdWx0fSk6JChlKSYmdGhpcy5ldmVudHMuZW1pdCh3KFwic2Vzc2lvbl9yZXF1ZXN0XCIscykse2Vycm9yOmUuZXJyb3J9KX0sdGhpcy5vblNlc3Npb25FdmVudFJlcXVlc3Q9YXN5bmModCxlKT0+e2NvbnN0e2lkOnMscGFyYW1zOml9PWU7dHJ5e2NvbnN0IHI9YCR7dH1fc2Vzc2lvbl9ldmVudF8ke2kuZXZlbnQubmFtZX1gLG89ZWUuZ2V0KHIpO2lmKG8mJnRoaXMuaXNSZXF1ZXN0T3V0T2ZTeW5jKG8scykpe3RoaXMuY2xpZW50LmxvZ2dlci5pbmZvKGBEaXNjYXJkaW5nIG91dCBvZiBzeW5jIHJlcXVlc3QgLSAke3N9YCk7cmV0dXJufXRoaXMuaXNWYWxpZEVtaXQoRSh7dG9waWM6dH0saSkpLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9ldmVudFwiLHtpZDpzLHRvcGljOnQscGFyYW1zOml9KSxlZS5zZXQocixzKX1jYXRjaChyKXthd2FpdCB0aGlzLnNlbmRFcnJvcih7aWQ6cyx0b3BpYzp0LGVycm9yOnJ9KSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3Iocil9fSx0aGlzLm9uU2Vzc2lvbkF1dGhlbnRpY2F0ZVJlc3BvbnNlPSh0LGUpPT57Y29uc3R7aWQ6c309ZTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25BdXRoZW50aWNhdGVSZXNwb25zZVwiLHRvcGljOnQscGF5bG9hZDplfSksTChlKT90aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX3JlcXVlc3RcIixzKSx7cmVzdWx0OmUucmVzdWx0fSk6JChlKSYmdGhpcy5ldmVudHMuZW1pdCh3KFwic2Vzc2lvbl9yZXF1ZXN0XCIscykse2Vycm9yOmUuZXJyb3J9KX0sdGhpcy5vblNlc3Npb25BdXRoZW50aWNhdGVSZXF1ZXN0PWFzeW5jIHQ9Pntjb25zdHt0b3BpYzplLHBheWxvYWQ6cyxhdHRlc3RhdGlvbjppLGVuY3J5cHRlZElkOnJ9PXQ7dHJ5e2NvbnN0e3JlcXVlc3RlcjpvLGF1dGhQYXlsb2FkOmEsZXhwaXJ5VGltZXN0YW1wOmN9PXMucGFyYW1zLGg9YXdhaXQgdGhpcy5nZXRWZXJpZnlDb250ZXh0KHthdHRlc3RhdGlvbklkOmksaGFzaDpZKEpTT04uc3RyaW5naWZ5KHMpKSxlbmNyeXB0ZWRJZDpyLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfSksbD17cmVxdWVzdGVyOm8scGFpcmluZ1RvcGljOmUsaWQ6cy5pZCxhdXRoUGF5bG9hZDphLHZlcmlmeUNvbnRleHQ6aCxleHBpcnlUaW1lc3RhbXA6Y307YXdhaXQgdGhpcy5zZXRBdXRoUmVxdWVzdChzLmlkLHtyZXF1ZXN0OmwscGFpcmluZ1RvcGljOmV9KSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInNlc3Npb25fYXV0aGVudGljYXRlXCIse3RvcGljOmUscGFyYW1zOnMucGFyYW1zLGlkOnMuaWQsdmVyaWZ5Q29udGV4dDpofSl9Y2F0Y2gobyl7dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKG8pO2NvbnN0IGE9cy5wYXJhbXMucmVxdWVzdGVyLnB1YmxpY0tleSxjPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmdlbmVyYXRlS2V5UGFpcigpLGg9e3R5cGU6SWUscmVjZWl2ZXJQdWJsaWNLZXk6YSxzZW5kZXJQdWJsaWNLZXk6Y307YXdhaXQgdGhpcy5zZW5kRXJyb3Ioe2lkOnMuaWQsdG9waWM6ZSxlcnJvcjpvLGVuY29kZU9wdHM6aCxycGNPcHRzOlMud2Nfc2Vzc2lvbkF1dGhlbnRpY2F0ZS5hdXRvUmVqZWN0fSl9fSx0aGlzLmFkZFNlc3Npb25SZXF1ZXN0VG9TZXNzaW9uUmVxdWVzdFF1ZXVlPXQ9Pnt0aGlzLnNlc3Npb25SZXF1ZXN0UXVldWUucXVldWUucHVzaCh0KX0sdGhpcy5jbGVhbnVwQWZ0ZXJSZXNwb25zZT10PT57dGhpcy5kZWxldGVQZW5kaW5nU2Vzc2lvblJlcXVlc3QodC5yZXNwb25zZS5pZCx7bWVzc2FnZTpcImZ1bGZpbGxlZFwiLGNvZGU6MH0pLHNldFRpbWVvdXQoKCk9Pnt0aGlzLnNlc3Npb25SZXF1ZXN0UXVldWUuc3RhdGU9eC5pZGxlLHRoaXMucHJvY2Vzc1Nlc3Npb25SZXF1ZXN0UXVldWUoKX0samUodGhpcy5yZXF1ZXN0UXVldWVEZWxheSkpfSx0aGlzLmNsZWFudXBQZW5kaW5nU2VudFJlcXVlc3RzRm9yVG9waWM9KHt0b3BpYzp0LGVycm9yOmV9KT0+e2NvbnN0IHM9dGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnBlbmRpbmc7cy5sZW5ndGg+MCYmcy5maWx0ZXIoaT0+aS50b3BpYz09PXQmJmkucmVxdWVzdC5tZXRob2Q9PT1cIndjX3Nlc3Npb25SZXF1ZXN0XCIpLmZvckVhY2goaT0+e2NvbnN0IHI9aS5yZXF1ZXN0LmlkLG89dyhcInNlc3Npb25fcmVxdWVzdFwiLHIpO2lmKHRoaXMuZXZlbnRzLmxpc3RlbmVyQ291bnQobyk9PT0wKXRocm93IG5ldyBFcnJvcihgZW1pdHRpbmcgJHtvfSB3aXRob3V0IGFueSBsaXN0ZW5lcnNgKTt0aGlzLmV2ZW50cy5lbWl0KHcoXCJzZXNzaW9uX3JlcXVlc3RcIixpLnJlcXVlc3QuaWQpLHtlcnJvcjplfSl9KX0sdGhpcy5wcm9jZXNzU2Vzc2lvblJlcXVlc3RRdWV1ZT0oKT0+e2lmKHRoaXMuc2Vzc2lvblJlcXVlc3RRdWV1ZS5zdGF0ZT09PXguYWN0aXZlKXt0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyhcInNlc3Npb24gcmVxdWVzdCBxdWV1ZSBpcyBhbHJlYWR5IGFjdGl2ZS5cIik7cmV0dXJufWNvbnN0IHQ9dGhpcy5zZXNzaW9uUmVxdWVzdFF1ZXVlLnF1ZXVlWzBdO2lmKCF0KXt0aGlzLmNsaWVudC5sb2dnZXIuaW5mbyhcInNlc3Npb24gcmVxdWVzdCBxdWV1ZSBpcyBlbXB0eS5cIik7cmV0dXJufXRyeXt0aGlzLnNlc3Npb25SZXF1ZXN0UXVldWUuc3RhdGU9eC5hY3RpdmUsdGhpcy5lbWl0U2Vzc2lvblJlcXVlc3QodCl9Y2F0Y2goZSl7dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKGUpfX0sdGhpcy5lbWl0U2Vzc2lvblJlcXVlc3Q9dD0+e3RoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9yZXF1ZXN0XCIsdCl9LHRoaXMub25QYWlyaW5nQ3JlYXRlZD10PT57aWYodC5tZXRob2RzJiZ0aGlzLmV4cGVjdGVkUGFpcmluZ01ldGhvZE1hcC5zZXQodC50b3BpYyx0Lm1ldGhvZHMpLHQuYWN0aXZlKXJldHVybjtjb25zdCBlPXRoaXMuY2xpZW50LnByb3Bvc2FsLmdldEFsbCgpLmZpbmQocz0+cy5wYWlyaW5nVG9waWM9PT10LnRvcGljKTtlJiZ0aGlzLm9uU2Vzc2lvblByb3Bvc2VSZXF1ZXN0KHt0b3BpYzp0LnRvcGljLHBheWxvYWQ6ZmUoXCJ3Y19zZXNzaW9uUHJvcG9zZVwiLHtyZXF1aXJlZE5hbWVzcGFjZXM6ZS5yZXF1aXJlZE5hbWVzcGFjZXMsb3B0aW9uYWxOYW1lc3BhY2VzOmUub3B0aW9uYWxOYW1lc3BhY2VzLHJlbGF5czplLnJlbGF5cyxwcm9wb3NlcjplLnByb3Bvc2VyLHNlc3Npb25Qcm9wZXJ0aWVzOmUuc2Vzc2lvblByb3BlcnRpZXN9LGUuaWQpfSl9LHRoaXMuaXNWYWxpZENvbm5lY3Q9YXN5bmMgdD0+e2lmKCFiKHQpKXtjb25zdHttZXNzYWdlOmF9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgY29ubmVjdCgpIHBhcmFtczogJHtKU09OLnN0cmluZ2lmeSh0KX1gKTt0aHJvdyBuZXcgRXJyb3IoYSl9Y29uc3R7cGFpcmluZ1RvcGljOmUscmVxdWlyZWROYW1lc3BhY2VzOnMsb3B0aW9uYWxOYW1lc3BhY2VzOmksc2Vzc2lvblByb3BlcnRpZXM6cixyZWxheXM6b309dDtpZih0ZShlKXx8YXdhaXQgdGhpcy5pc1ZhbGlkUGFpcmluZ1RvcGljKGUpLCFxdChvLCEwKSl7Y29uc3R7bWVzc2FnZTphfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGNvbm5lY3QoKSByZWxheXM6ICR7b31gKTt0aHJvdyBuZXcgRXJyb3IoYSl9IXRlKHMpJiYkZShzKSE9PTAmJnRoaXMudmFsaWRhdGVOYW1lc3BhY2VzKHMsXCJyZXF1aXJlZE5hbWVzcGFjZXNcIiksIXRlKGkpJiYkZShpKSE9PTAmJnRoaXMudmFsaWRhdGVOYW1lc3BhY2VzKGksXCJvcHRpb25hbE5hbWVzcGFjZXNcIiksdGUocil8fHRoaXMudmFsaWRhdGVTZXNzaW9uUHJvcHMocixcInNlc3Npb25Qcm9wZXJ0aWVzXCIpfSx0aGlzLnZhbGlkYXRlTmFtZXNwYWNlcz0odCxlKT0+e2NvbnN0IHM9dnQodCxcImNvbm5lY3QoKVwiLGUpO2lmKHMpdGhyb3cgbmV3IEVycm9yKHMubWVzc2FnZSl9LHRoaXMuaXNWYWxpZEFwcHJvdmU9YXN5bmMgdD0+e2lmKCFiKHQpKXRocm93IG5ldyBFcnJvcihwKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGFwcHJvdmUoKSBwYXJhbXM6ICR7dH1gKS5tZXNzYWdlKTtjb25zdHtpZDplLG5hbWVzcGFjZXM6cyxyZWxheVByb3RvY29sOmksc2Vzc2lvblByb3BlcnRpZXM6cn09dDt0aGlzLmNoZWNrUmVjZW50bHlEZWxldGVkKGUpLGF3YWl0IHRoaXMuaXNWYWxpZFByb3Bvc2FsSWQoZSk7Y29uc3Qgbz10aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQoZSksYT1TZShzLFwiYXBwcm92ZSgpXCIpO2lmKGEpdGhyb3cgbmV3IEVycm9yKGEubWVzc2FnZSk7Y29uc3QgYz1LZShvLnJlcXVpcmVkTmFtZXNwYWNlcyxzLFwiYXBwcm92ZSgpXCIpO2lmKGMpdGhyb3cgbmV3IEVycm9yKGMubWVzc2FnZSk7aWYoIVYoaSwhMCkpe2NvbnN0e21lc3NhZ2U6aH09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBhcHByb3ZlKCkgcmVsYXlQcm90b2NvbDogJHtpfWApO3Rocm93IG5ldyBFcnJvcihoKX10ZShyKXx8dGhpcy52YWxpZGF0ZVNlc3Npb25Qcm9wcyhyLFwic2Vzc2lvblByb3BlcnRpZXNcIil9LHRoaXMuaXNWYWxpZFJlamVjdD1hc3luYyB0PT57aWYoIWIodCkpe2NvbnN0e21lc3NhZ2U6aX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZWplY3QoKSBwYXJhbXM6ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3IoaSl9Y29uc3R7aWQ6ZSxyZWFzb246c309dDtpZih0aGlzLmNoZWNrUmVjZW50bHlEZWxldGVkKGUpLGF3YWl0IHRoaXMuaXNWYWxpZFByb3Bvc2FsSWQoZSksIU50KHMpKXtjb25zdHttZXNzYWdlOml9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcmVqZWN0KCkgcmVhc29uOiAke0pTT04uc3RyaW5naWZ5KHMpfWApO3Rocm93IG5ldyBFcnJvcihpKX19LHRoaXMuaXNWYWxpZFNlc3Npb25TZXR0bGVSZXF1ZXN0PXQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTpjfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYG9uU2Vzc2lvblNldHRsZVJlcXVlc3QoKSBwYXJhbXM6ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3IoYyl9Y29uc3R7cmVsYXk6ZSxjb250cm9sbGVyOnMsbmFtZXNwYWNlczppLGV4cGlyeTpyfT10O2lmKCFQdChlKSl7Y29uc3R7bWVzc2FnZTpjfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KCkgcmVsYXkgcHJvdG9jb2wgc2hvdWxkIGJlIGEgc3RyaW5nXCIpO3Rocm93IG5ldyBFcnJvcihjKX1jb25zdCBvPVR0KHMsXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KClcIik7aWYobyl0aHJvdyBuZXcgRXJyb3Ioby5tZXNzYWdlKTtjb25zdCBhPVNlKGksXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KClcIik7aWYoYSl0aHJvdyBuZXcgRXJyb3IoYS5tZXNzYWdlKTtpZihYKHIpKXtjb25zdHttZXNzYWdlOmN9PXAoXCJFWFBJUkVEXCIsXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KClcIik7dGhyb3cgbmV3IEVycm9yKGMpfX0sdGhpcy5pc1ZhbGlkVXBkYXRlPWFzeW5jIHQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTphfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHVwZGF0ZSgpIHBhcmFtczogJHt0fWApO3Rocm93IG5ldyBFcnJvcihhKX1jb25zdHt0b3BpYzplLG5hbWVzcGFjZXM6c309dDt0aGlzLmNoZWNrUmVjZW50bHlEZWxldGVkKGUpLGF3YWl0IHRoaXMuaXNWYWxpZFNlc3Npb25Ub3BpYyhlKTtjb25zdCBpPXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KGUpLHI9U2UocyxcInVwZGF0ZSgpXCIpO2lmKHIpdGhyb3cgbmV3IEVycm9yKHIubWVzc2FnZSk7Y29uc3Qgbz1LZShpLnJlcXVpcmVkTmFtZXNwYWNlcyxzLFwidXBkYXRlKClcIik7aWYobyl0aHJvdyBuZXcgRXJyb3Ioby5tZXNzYWdlKX0sdGhpcy5pc1ZhbGlkRXh0ZW5kPWFzeW5jIHQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTpzfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGV4dGVuZCgpIHBhcmFtczogJHt0fWApO3Rocm93IG5ldyBFcnJvcihzKX1jb25zdHt0b3BpYzplfT10O3RoaXMuY2hlY2tSZWNlbnRseURlbGV0ZWQoZSksYXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvblRvcGljKGUpfSx0aGlzLmlzVmFsaWRSZXF1ZXN0PWFzeW5jIHQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTphfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHJlcXVlc3QoKSBwYXJhbXM6ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3IoYSl9Y29uc3R7dG9waWM6ZSxyZXF1ZXN0OnMsY2hhaW5JZDppLGV4cGlyeTpyfT10O3RoaXMuY2hlY2tSZWNlbnRseURlbGV0ZWQoZSksYXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvblRvcGljKGUpO2NvbnN0e25hbWVzcGFjZXM6b309dGhpcy5jbGllbnQuc2Vzc2lvbi5nZXQoZSk7aWYoIVVlKG8saSkpe2NvbnN0e21lc3NhZ2U6YX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgY2hhaW5JZDogJHtpfWApO3Rocm93IG5ldyBFcnJvcihhKX1pZighT3Qocykpe2NvbnN0e21lc3NhZ2U6YX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgJHtKU09OLnN0cmluZ2lmeShzKX1gKTt0aHJvdyBuZXcgRXJyb3IoYSl9aWYoIUF0KG8saSxzLm1ldGhvZCkpe2NvbnN0e21lc3NhZ2U6YX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgbWV0aG9kOiAke3MubWV0aG9kfWApO3Rocm93IG5ldyBFcnJvcihhKX1pZihyJiYhQ3QocixoZSkpe2NvbnN0e21lc3NhZ2U6YX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgZXhwaXJ5OiAke3J9LiBFeHBpcnkgbXVzdCBiZSBhIG51bWJlciAoaW4gc2Vjb25kcykgYmV0d2VlbiAke2hlLm1pbn0gYW5kICR7aGUubWF4fWApO3Rocm93IG5ldyBFcnJvcihhKX19LHRoaXMuaXNWYWxpZFJlc3BvbmQ9YXN5bmMgdD0+e3ZhciBlO2lmKCFiKHQpKXtjb25zdHttZXNzYWdlOnJ9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcmVzcG9uZCgpIHBhcmFtczogJHt0fWApO3Rocm93IG5ldyBFcnJvcihyKX1jb25zdHt0b3BpYzpzLHJlc3BvbnNlOml9PXQ7dHJ5e2F3YWl0IHRoaXMuaXNWYWxpZFNlc3Npb25Ub3BpYyhzKX1jYXRjaChyKXt0aHJvdyhlPXQ/LnJlc3BvbnNlKSE9bnVsbCYmZS5pZCYmdGhpcy5jbGVhbnVwQWZ0ZXJSZXNwb25zZSh0KSxyfWlmKCFidChpKSl7Y29uc3R7bWVzc2FnZTpyfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHJlc3BvbmQoKSByZXNwb25zZTogJHtKU09OLnN0cmluZ2lmeShpKX1gKTt0aHJvdyBuZXcgRXJyb3Iocil9fSx0aGlzLmlzVmFsaWRQaW5nPWFzeW5jIHQ9PntpZighYih0KSl7Y29uc3R7bWVzc2FnZTpzfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHBpbmcoKSBwYXJhbXM6ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3Iocyl9Y29uc3R7dG9waWM6ZX09dDthd2FpdCB0aGlzLmlzVmFsaWRTZXNzaW9uT3JQYWlyaW5nVG9waWMoZSl9LHRoaXMuaXNWYWxpZEVtaXQ9YXN5bmMgdD0+e2lmKCFiKHQpKXtjb25zdHttZXNzYWdlOm99PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgZW1pdCgpIHBhcmFtczogJHt0fWApO3Rocm93IG5ldyBFcnJvcihvKX1jb25zdHt0b3BpYzplLGV2ZW50OnMsY2hhaW5JZDppfT10O2F3YWl0IHRoaXMuaXNWYWxpZFNlc3Npb25Ub3BpYyhlKTtjb25zdHtuYW1lc3BhY2VzOnJ9PXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KGUpO2lmKCFVZShyLGkpKXtjb25zdHttZXNzYWdlOm99PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgZW1pdCgpIGNoYWluSWQ6ICR7aX1gKTt0aHJvdyBuZXcgRXJyb3Iobyl9aWYoIXh0KHMpKXtjb25zdHttZXNzYWdlOm99PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgZW1pdCgpIGV2ZW50OiAke0pTT04uc3RyaW5naWZ5KHMpfWApO3Rocm93IG5ldyBFcnJvcihvKX1pZighRHQocixpLHMubmFtZSkpe2NvbnN0e21lc3NhZ2U6b309cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBlbWl0KCkgZXZlbnQ6ICR7SlNPTi5zdHJpbmdpZnkocyl9YCk7dGhyb3cgbmV3IEVycm9yKG8pfX0sdGhpcy5pc1ZhbGlkRGlzY29ubmVjdD1hc3luYyB0PT57aWYoIWIodCkpe2NvbnN0e21lc3NhZ2U6c309cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBkaXNjb25uZWN0KCkgcGFyYW1zOiAke3R9YCk7dGhyb3cgbmV3IEVycm9yKHMpfWNvbnN0e3RvcGljOmV9PXQ7YXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvbk9yUGFpcmluZ1RvcGljKGUpfSx0aGlzLmlzVmFsaWRBdXRoZW50aWNhdGU9dD0+e2NvbnN0e2NoYWluczplLHVyaTpzLGRvbWFpbjppLG5vbmNlOnJ9PXQ7aWYoIUFycmF5LmlzQXJyYXkoZSl8fGUubGVuZ3RoPT09MCl0aHJvdyBuZXcgRXJyb3IoXCJjaGFpbnMgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXlcIik7aWYoIVYocywhMSkpdGhyb3cgbmV3IEVycm9yKFwidXJpIGlzIHJlcXVpcmVkIHBhcmFtZXRlclwiKTtpZighVihpLCExKSl0aHJvdyBuZXcgRXJyb3IoXCJkb21haW4gaXMgcmVxdWlyZWQgcGFyYW1ldGVyXCIpO2lmKCFWKHIsITEpKXRocm93IG5ldyBFcnJvcihcIm5vbmNlIGlzIHJlcXVpcmVkIHBhcmFtZXRlclwiKTtpZihbLi4ubmV3IFNldChlLm1hcChhPT5FZShhKS5uYW1lc3BhY2UpKV0ubGVuZ3RoPjEpdGhyb3cgbmV3IEVycm9yKFwiTXVsdGktbmFtZXNwYWNlIHJlcXVlc3RzIGFyZSBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgcmVxdWVzdCBzaW5nbGUgbmFtZXNwYWNlIG9ubHkuXCIpO2NvbnN0e25hbWVzcGFjZTpvfT1FZShlWzBdKTtpZihvIT09XCJlaXAxNTVcIil0aHJvdyBuZXcgRXJyb3IoXCJPbmx5IGVpcDE1NSBuYW1lc3BhY2UgaXMgc3VwcG9ydGVkIGZvciBhdXRoZW50aWNhdGVkIHNlc3Npb25zLiBQbGVhc2UgdXNlIC5jb25uZWN0KCkgZm9yIG5vbi1laXAxNTUgY2hhaW5zLlwiKX0sdGhpcy5nZXRWZXJpZnlDb250ZXh0PWFzeW5jIHQ9Pntjb25zdHthdHRlc3RhdGlvbklkOmUsaGFzaDpzLGVuY3J5cHRlZElkOmksbWV0YWRhdGE6cn09dCxvPXt2ZXJpZmllZDp7dmVyaWZ5VXJsOnIudmVyaWZ5VXJsfHxsdCx2YWxpZGF0aW9uOlwiVU5LTk9XTlwiLG9yaWdpbjpyLnVybHx8XCJcIn19O3RyeXtjb25zdCBhPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUudmVyaWZ5LnJlc29sdmUoe2F0dGVzdGF0aW9uSWQ6ZSxoYXNoOnMsZW5jcnlwdGVkSWQ6aSx2ZXJpZnlVcmw6ci52ZXJpZnlVcmx9KTthJiYoby52ZXJpZmllZC5vcmlnaW49YS5vcmlnaW4sby52ZXJpZmllZC5pc1NjYW09YS5pc1NjYW0sby52ZXJpZmllZC52YWxpZGF0aW9uPWEub3JpZ2luPT09bmV3IFVSTChyLnVybCkub3JpZ2luP1wiVkFMSURcIjpcIklOVkFMSURcIil9Y2F0Y2goYSl7dGhpcy5jbGllbnQubG9nZ2VyLndhcm4oYSl9cmV0dXJuIHRoaXMuY2xpZW50LmxvZ2dlci5kZWJ1ZyhgVmVyaWZ5IGNvbnRleHQ6ICR7SlNPTi5zdHJpbmdpZnkobyl9YCksb30sdGhpcy52YWxpZGF0ZVNlc3Npb25Qcm9wcz0odCxlKT0+e09iamVjdC52YWx1ZXModCkuZm9yRWFjaChzPT57aWYoIVYocywhMSkpe2NvbnN0e21lc3NhZ2U6aX09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGAke2V9IG11c3QgYmUgaW4gUmVjb3JkPHN0cmluZywgc3RyaW5nPiBmb3JtYXQuIFJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KHMpfWApO3Rocm93IG5ldyBFcnJvcihpKX19KX0sdGhpcy5nZXRQZW5kaW5nQXV0aFJlcXVlc3Q9dD0+e2NvbnN0IGU9dGhpcy5jbGllbnQuYXV0aC5yZXF1ZXN0cy5nZXQodCk7cmV0dXJuIHR5cGVvZiBlPT1cIm9iamVjdFwiP2U6dm9pZCAwfSx0aGlzLmFkZFRvUmVjZW50bHlEZWxldGVkPSh0LGUpPT57aWYodGhpcy5yZWNlbnRseURlbGV0ZWRNYXAuc2V0KHQsZSksdGhpcy5yZWNlbnRseURlbGV0ZWRNYXAuc2l6ZT49dGhpcy5yZWNlbnRseURlbGV0ZWRMaW1pdCl7bGV0IHM9MDtjb25zdCBpPXRoaXMucmVjZW50bHlEZWxldGVkTGltaXQvMjtmb3IoY29uc3QgciBvZiB0aGlzLnJlY2VudGx5RGVsZXRlZE1hcC5rZXlzKCkpe2lmKHMrKz49aSlicmVhazt0aGlzLnJlY2VudGx5RGVsZXRlZE1hcC5kZWxldGUocil9fX0sdGhpcy5jaGVja1JlY2VudGx5RGVsZXRlZD10PT57Y29uc3QgZT10aGlzLnJlY2VudGx5RGVsZXRlZE1hcC5nZXQodCk7aWYoZSl7Y29uc3R7bWVzc2FnZTpzfT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYFJlY29yZCB3YXMgcmVjZW50bHkgZGVsZXRlZCAtICR7ZX06ICR7dH1gKTt0aHJvdyBuZXcgRXJyb3Iocyl9fX1hc3luYyBpc0luaXRpYWxpemVkKCl7aWYoIXRoaXMuaW5pdGlhbGl6ZWQpe2NvbnN0e21lc3NhZ2U6bn09cChcIk5PVF9JTklUSUFMSVpFRFwiLHRoaXMubmFtZSk7dGhyb3cgbmV3IEVycm9yKG4pfWF3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5jb25maXJtT25saW5lU3RhdGVPclRocm93KCl9cmVnaXN0ZXJSZWxheWVyRXZlbnRzKCl7dGhpcy5jbGllbnQuY29yZS5yZWxheWVyLm9uKEFlLm1lc3NhZ2Usbj0+eyF0aGlzLmluaXRpYWxpemVkfHx0aGlzLnJlbGF5TWVzc2FnZUNhY2hlLmxlbmd0aD4wP3RoaXMucmVsYXlNZXNzYWdlQ2FjaGUucHVzaChuKTp0aGlzLm9uUmVsYXlNZXNzYWdlKG4pfSl9YXN5bmMgb25SZWxheU1lc3NhZ2Uobil7Y29uc3R7dG9waWM6dCxtZXNzYWdlOmUsYXR0ZXN0YXRpb246c309bix7cHVibGljS2V5Oml9PXRoaXMuY2xpZW50LmF1dGguYXV0aEtleXMua2V5cy5pbmNsdWRlcyhpZSk/dGhpcy5jbGllbnQuYXV0aC5hdXRoS2V5cy5nZXQoaWUpOntyZXNwb25zZVRvcGljOnZvaWQgMCxwdWJsaWNLZXk6dm9pZCAwfSxyPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmRlY29kZSh0LGUse3JlY2VpdmVyUHVibGljS2V5Oml9KTt0cnl7RnQocik/KHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5zZXQodCxyKSx0aGlzLm9uUmVsYXlFdmVudFJlcXVlc3Qoe3RvcGljOnQscGF5bG9hZDpyLGF0dGVzdGF0aW9uOnMsZW5jcnlwdGVkSWQ6WShlKX0pKTpRdChyKT8oYXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnJlc29sdmUociksYXdhaXQgdGhpcy5vblJlbGF5RXZlbnRSZXNwb25zZSh7dG9waWM6dCxwYXlsb2FkOnJ9KSx0aGlzLmNsaWVudC5jb3JlLmhpc3RvcnkuZGVsZXRlKHQsci5pZCkpOnRoaXMub25SZWxheUV2ZW50VW5rbm93blBheWxvYWQoe3RvcGljOnQscGF5bG9hZDpyfSl9Y2F0Y2gobyl7dGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKG8pfX1yZWdpc3RlckV4cGlyZXJFdmVudHMoKXt0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIub24oaHQuZXhwaXJlZCxhc3luYyBuPT57Y29uc3R7dG9waWM6dCxpZDplfT1WdChuLnRhcmdldCk7aWYoZSYmdGhpcy5jbGllbnQucGVuZGluZ1JlcXVlc3Qua2V5cy5pbmNsdWRlcyhlKSlyZXR1cm4gYXdhaXQgdGhpcy5kZWxldGVQZW5kaW5nU2Vzc2lvblJlcXVlc3QoZSxwKFwiRVhQSVJFRFwiKSwhMCk7aWYoZSYmdGhpcy5jbGllbnQuYXV0aC5yZXF1ZXN0cy5rZXlzLmluY2x1ZGVzKGUpKXJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZVBlbmRpbmdBdXRoUmVxdWVzdChlLHAoXCJFWFBJUkVEXCIpLCEwKTt0P3RoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyh0KSYmKGF3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6dCxleHBpcmVySGFzRGVsZXRlZDohMH0pLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9leHBpcmVcIix7dG9waWM6dH0pKTplJiYoYXdhaXQgdGhpcy5kZWxldGVQcm9wb3NhbChlLCEwKSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInByb3Bvc2FsX2V4cGlyZVwiLHtpZDplfSkpfSl9cmVnaXN0ZXJQYWlyaW5nRXZlbnRzKCl7dGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmV2ZW50cy5vbihDZS5jcmVhdGUsbj0+dGhpcy5vblBhaXJpbmdDcmVhdGVkKG4pKSx0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuZXZlbnRzLm9uKENlLmRlbGV0ZSxuPT57dGhpcy5hZGRUb1JlY2VudGx5RGVsZXRlZChuLnRvcGljLFwicGFpcmluZ1wiKX0pfWlzVmFsaWRQYWlyaW5nVG9waWMobil7aWYoIVYobiwhMSkpe2NvbnN0e21lc3NhZ2U6dH09cChcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBwYWlyaW5nIHRvcGljIHNob3VsZCBiZSBhIHN0cmluZzogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX1pZighdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMobikpe2NvbnN0e21lc3NhZ2U6dH09cChcIk5PX01BVENISU5HX0tFWVwiLGBwYWlyaW5nIHRvcGljIGRvZXNuJ3QgZXhpc3Q6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IodCl9aWYoWCh0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcucGFpcmluZ3MuZ2V0KG4pLmV4cGlyeSkpe2NvbnN0e21lc3NhZ2U6dH09cChcIkVYUElSRURcIixgcGFpcmluZyB0b3BpYzogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX19YXN5bmMgaXNWYWxpZFNlc3Npb25Ub3BpYyhuKXtpZighVihuLCExKSl7Y29uc3R7bWVzc2FnZTp0fT1wKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHNlc3Npb24gdG9waWMgc2hvdWxkIGJlIGEgc3RyaW5nOiAke259YCk7dGhyb3cgbmV3IEVycm9yKHQpfWlmKHRoaXMuY2hlY2tSZWNlbnRseURlbGV0ZWQobiksIXRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhuKSl7Y29uc3R7bWVzc2FnZTp0fT1wKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYHNlc3Npb24gdG9waWMgZG9lc24ndCBleGlzdDogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX1pZihYKHRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KG4pLmV4cGlyeSkpe2F3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6bn0pO2NvbnN0e21lc3NhZ2U6dH09cChcIkVYUElSRURcIixgc2Vzc2lvbiB0b3BpYzogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX1pZighdGhpcy5jbGllbnQuY29yZS5jcnlwdG8ua2V5Y2hhaW4uaGFzKG4pKXtjb25zdHttZXNzYWdlOnR9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgc2Vzc2lvbiB0b3BpYyBkb2VzIG5vdCBleGlzdCBpbiBrZXljaGFpbjogJHtufWApO3Rocm93IGF3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbih7dG9waWM6bn0pLG5ldyBFcnJvcih0KX19YXN5bmMgaXNWYWxpZFNlc3Npb25PclBhaXJpbmdUb3BpYyhuKXtpZih0aGlzLmNoZWNrUmVjZW50bHlEZWxldGVkKG4pLHRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhuKSlhd2FpdCB0aGlzLmlzVmFsaWRTZXNzaW9uVG9waWMobik7ZWxzZSBpZih0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcucGFpcmluZ3Mua2V5cy5pbmNsdWRlcyhuKSl0aGlzLmlzVmFsaWRQYWlyaW5nVG9waWMobik7ZWxzZSBpZihWKG4sITEpKXtjb25zdHttZXNzYWdlOnR9PXAoXCJOT19NQVRDSElOR19LRVlcIixgc2Vzc2lvbiBvciBwYWlyaW5nIHRvcGljIGRvZXNuJ3QgZXhpc3Q6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IodCl9ZWxzZXtjb25zdHttZXNzYWdlOnR9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgc2Vzc2lvbiBvciBwYWlyaW5nIHRvcGljIHNob3VsZCBiZSBhIHN0cmluZzogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX19YXN5bmMgaXNWYWxpZFByb3Bvc2FsSWQobil7aWYoIU10KG4pKXtjb25zdHttZXNzYWdlOnR9PXAoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcHJvcG9zYWwgaWQgc2hvdWxkIGJlIGEgbnVtYmVyOiAke259YCk7dGhyb3cgbmV3IEVycm9yKHQpfWlmKCF0aGlzLmNsaWVudC5wcm9wb3NhbC5rZXlzLmluY2x1ZGVzKG4pKXtjb25zdHttZXNzYWdlOnR9PXAoXCJOT19NQVRDSElOR19LRVlcIixgcHJvcG9zYWwgaWQgZG9lc24ndCBleGlzdDogJHtufWApO3Rocm93IG5ldyBFcnJvcih0KX1pZihYKHRoaXMuY2xpZW50LnByb3Bvc2FsLmdldChuKS5leHBpcnlUaW1lc3RhbXApKXthd2FpdCB0aGlzLmRlbGV0ZVByb3Bvc2FsKG4pO2NvbnN0e21lc3NhZ2U6dH09cChcIkVYUElSRURcIixgcHJvcG9zYWwgaWQ6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IodCl9fX1jbGFzcyBucyBleHRlbmRzIEh7Y29uc3RydWN0b3Iobix0KXtzdXBlcihuLHQsRmUsY2UpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPXR9fWNsYXNzIGl0IGV4dGVuZHMgSHtjb25zdHJ1Y3RvcihuLHQpe3N1cGVyKG4sdCxIZSxjZSksdGhpcy5jb3JlPW4sdGhpcy5sb2dnZXI9dH19Y2xhc3Mgb3MgZXh0ZW5kcyBIe2NvbnN0cnVjdG9yKG4sdCl7c3VwZXIobix0LFllLGNlLGU9PmUuaWQpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPXR9fWNsYXNzIGFzIGV4dGVuZHMgSHtjb25zdHJ1Y3RvcihuLHQpe3N1cGVyKG4sdCxXZSxzZSwoKT0+aWUpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPXR9fWNsYXNzIGNzIGV4dGVuZHMgSHtjb25zdHJ1Y3RvcihuLHQpe3N1cGVyKG4sdCxaZSxzZSksdGhpcy5jb3JlPW4sdGhpcy5sb2dnZXI9dH19Y2xhc3MgbHMgZXh0ZW5kcyBIe2NvbnN0cnVjdG9yKG4sdCl7c3VwZXIobix0LGV0LHNlLGU9PmUuaWQpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPXR9fWNsYXNzIGhze2NvbnN0cnVjdG9yKG4sdCl7dGhpcy5jb3JlPW4sdGhpcy5sb2dnZXI9dCx0aGlzLmF1dGhLZXlzPW5ldyBhcyh0aGlzLmNvcmUsdGhpcy5sb2dnZXIpLHRoaXMucGFpcmluZ1RvcGljcz1uZXcgY3ModGhpcy5jb3JlLHRoaXMubG9nZ2VyKSx0aGlzLnJlcXVlc3RzPW5ldyBscyh0aGlzLmNvcmUsdGhpcy5sb2dnZXIpfWFzeW5jIGluaXQoKXthd2FpdCB0aGlzLmF1dGhLZXlzLmluaXQoKSxhd2FpdCB0aGlzLnBhaXJpbmdUb3BpY3MuaW5pdCgpLGF3YWl0IHRoaXMucmVxdWVzdHMuaW5pdCgpfX1jbGFzcyBwZSBleHRlbmRzIG10e2NvbnN0cnVjdG9yKG4pe3N1cGVyKG4pLHRoaXMucHJvdG9jb2w9cWUsdGhpcy52ZXJzaW9uPXZlLHRoaXMubmFtZT1sZS5uYW1lLHRoaXMuZXZlbnRzPW5ldyBLdCx0aGlzLm9uPShlLHMpPT50aGlzLmV2ZW50cy5vbihlLHMpLHRoaXMub25jZT0oZSxzKT0+dGhpcy5ldmVudHMub25jZShlLHMpLHRoaXMub2ZmPShlLHMpPT50aGlzLmV2ZW50cy5vZmYoZSxzKSx0aGlzLnJlbW92ZUxpc3RlbmVyPShlLHMpPT50aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihlLHMpLHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzPWU9PnRoaXMuZXZlbnRzLnJlbW92ZUFsbExpc3RlbmVycyhlKSx0aGlzLmNvbm5lY3Q9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuY29ubmVjdChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnBhaXI9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUucGFpcihlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmFwcHJvdmU9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuYXBwcm92ZShlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnJlamVjdD1hc3luYyBlPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5yZWplY3QoZSl9Y2F0Y2gocyl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSxzfX0sdGhpcy51cGRhdGU9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUudXBkYXRlKGUpfWNhdGNoKHMpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksc319LHRoaXMuZXh0ZW5kPWFzeW5jIGU9Pnt0cnl7cmV0dXJuIGF3YWl0IHRoaXMuZW5naW5lLmV4dGVuZChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnJlcXVlc3Q9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUucmVxdWVzdChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnJlc3BvbmQ9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUucmVzcG9uZChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLnBpbmc9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUucGluZyhlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmVtaXQ9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuZW1pdChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmRpc2Nvbm5lY3Q9YXN5bmMgZT0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuZGlzY29ubmVjdChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmZpbmQ9ZT0+e3RyeXtyZXR1cm4gdGhpcy5lbmdpbmUuZmluZChlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmdldFBlbmRpbmdTZXNzaW9uUmVxdWVzdHM9KCk9Pnt0cnl7cmV0dXJuIHRoaXMuZW5naW5lLmdldFBlbmRpbmdTZXNzaW9uUmVxdWVzdHMoKX1jYXRjaChlKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLGV9fSx0aGlzLmF1dGhlbnRpY2F0ZT1hc3luYyBlPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5hdXRoZW50aWNhdGUoZSl9Y2F0Y2gocyl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSxzfX0sdGhpcy5mb3JtYXRBdXRoTWVzc2FnZT1lPT57dHJ5e3JldHVybiB0aGlzLmVuZ2luZS5mb3JtYXRBdXRoTWVzc2FnZShlKX1jYXRjaChzKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHN9fSx0aGlzLmFwcHJvdmVTZXNzaW9uQXV0aGVudGljYXRlPWFzeW5jIGU9Pnt0cnl7cmV0dXJuIGF3YWl0IHRoaXMuZW5naW5lLmFwcHJvdmVTZXNzaW9uQXV0aGVudGljYXRlKGUpfWNhdGNoKHMpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksc319LHRoaXMucmVqZWN0U2Vzc2lvbkF1dGhlbnRpY2F0ZT1hc3luYyBlPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5yZWplY3RTZXNzaW9uQXV0aGVudGljYXRlKGUpfWNhdGNoKHMpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksc319LHRoaXMubmFtZT1uPy5uYW1lfHxsZS5uYW1lLHRoaXMubWV0YWRhdGE9bj8ubWV0YWRhdGF8fEx0KCksdGhpcy5zaWduQ29uZmlnPW4/LnNpZ25Db25maWc7Y29uc3QgdD10eXBlb2Ygbj8ubG9nZ2VyPFwidVwiJiZ0eXBlb2Ygbj8ubG9nZ2VyIT1cInN0cmluZ1wiP24ubG9nZ2VyOmR0KHV0KHtsZXZlbDpuPy5sb2dnZXJ8fGxlLmxvZ2dlcn0pKTt0aGlzLmNvcmU9bj8uY29yZXx8bmV3IHB0KG4pLHRoaXMubG9nZ2VyPWd0KHQsdGhpcy5uYW1lKSx0aGlzLnNlc3Npb249bmV3IGl0KHRoaXMuY29yZSx0aGlzLmxvZ2dlciksdGhpcy5wcm9wb3NhbD1uZXcgbnModGhpcy5jb3JlLHRoaXMubG9nZ2VyKSx0aGlzLnBlbmRpbmdSZXF1ZXN0PW5ldyBvcyh0aGlzLmNvcmUsdGhpcy5sb2dnZXIpLHRoaXMuZW5naW5lPW5ldyBycyh0aGlzKSx0aGlzLmF1dGg9bmV3IGhzKHRoaXMuY29yZSx0aGlzLmxvZ2dlcil9c3RhdGljIGFzeW5jIGluaXQobil7Y29uc3QgdD1uZXcgcGUobik7cmV0dXJuIGF3YWl0IHQuaW5pdGlhbGl6ZSgpLHR9Z2V0IGNvbnRleHQoKXtyZXR1cm4gd3QodGhpcy5sb2dnZXIpfWdldCBwYWlyaW5nKCl7cmV0dXJuIHRoaXMuY29yZS5wYWlyaW5nLnBhaXJpbmdzfWFzeW5jIGluaXRpYWxpemUoKXt0aGlzLmxvZ2dlci50cmFjZShcIkluaXRpYWxpemVkXCIpO3RyeXthd2FpdCB0aGlzLmNvcmUuc3RhcnQoKSxhd2FpdCB0aGlzLnNlc3Npb24uaW5pdCgpLGF3YWl0IHRoaXMucHJvcG9zYWwuaW5pdCgpLGF3YWl0IHRoaXMucGVuZGluZ1JlcXVlc3QuaW5pdCgpLGF3YWl0IHRoaXMuZW5naW5lLmluaXQoKSxhd2FpdCB0aGlzLmF1dGguaW5pdCgpLHRoaXMubG9nZ2VyLmluZm8oXCJTaWduQ2xpZW50IEluaXRpYWxpemF0aW9uIFN1Y2Nlc3NcIiksdGhpcy5lbmdpbmUucHJvY2Vzc1JlbGF5TWVzc2FnZUNhY2hlKCl9Y2F0Y2gobil7dGhyb3cgdGhpcy5sb2dnZXIuaW5mbyhcIlNpZ25DbGllbnQgSW5pdGlhbGl6YXRpb24gRmFpbHVyZVwiKSx0aGlzLmxvZ2dlci5lcnJvcihuLm1lc3NhZ2UpLG59fX1jb25zdCBwcz1pdCxkcz1wZTtleHBvcnR7QmUgYXMgQVVUSF9DT05URVhULFdlIGFzIEFVVEhfS0VZU19DT05URVhULFplIGFzIEFVVEhfUEFJUklOR19UT1BJQ19DT05URVhULEplIGFzIEFVVEhfUFJPVE9DT0wsaWUgYXMgQVVUSF9QVUJMSUNfS0VZX05BTUUsZXQgYXMgQVVUSF9SRVFVRVNUX0NPTlRFWFQsc2UgYXMgQVVUSF9TVE9SQUdFX1BSRUZJWCxXdCBhcyBBVVRIX1ZFUlNJT04semUgYXMgRU5HSU5FX0NPTlRFWFQseCBhcyBFTkdJTkVfUVVFVUVfU1RBVEVTLFMgYXMgRU5HSU5FX1JQQ19PUFRTLFh0IGFzIEhJU1RPUllfQ09OVEVYVCxZdCBhcyBISVNUT1JZX0VWRU5UUyxKdCBhcyBISVNUT1JZX1NUT1JBR0VfVkVSU0lPTixYZSBhcyBNRVRIT0RTX1RPX1ZFUklGWSxGZSBhcyBQUk9QT1NBTF9DT05URVhULEJ0IGFzIFBST1BPU0FMX0VYUElSWSxRZSBhcyBQUk9QT1NBTF9FWFBJUllfTUVTU0FHRSxZZSBhcyBSRVFVRVNUX0NPTlRFWFQsSGUgYXMgU0VTU0lPTl9DT05URVhULGsgYXMgU0VTU0lPTl9FWFBJUlksaGUgYXMgU0VTU0lPTl9SRVFVRVNUX0VYUElSWV9CT1VOREFSSUVTLE5lIGFzIFNJR05fQ0xJRU5UX0NPTlRFWFQsbGUgYXMgU0lHTl9DTElFTlRfREVGQVVMVCxIdCBhcyBTSUdOX0NMSUVOVF9FVkVOVFMscWUgYXMgU0lHTl9DTElFTlRfUFJPVE9DT0wsenQgYXMgU0lHTl9DTElFTlRfU1RPUkFHRV9PUFRJT05TLGNlIGFzIFNJR05fQ0xJRU5UX1NUT1JBR0VfUFJFRklYLHZlIGFzIFNJR05fQ0xJRU5UX1ZFUlNJT04scHMgYXMgU2Vzc2lvblN0b3JlLGRzIGFzIFNpZ25DbGllbnQsUGUgYXMgV0FMTEVUQ09OTkVDVF9ERUVQTElOS19DSE9JQ0UscGUgYXMgZGVmYXVsdH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@walletconnect+sign-client@2.15.2_bufferutil@4.0.8_utf-8-validate@5.0.10/node_modules/@walletconnect/sign-client/dist/index.es.js\n");

/***/ })

};
;